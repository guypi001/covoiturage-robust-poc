function dy(e,t){for(var s=0;s<t.length;s++){const i=t[s];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ku(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sm={exports:{}},tl={},Cm={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=Symbol.for("react.element"),fy=Symbol.for("react.portal"),py=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),xy=Symbol.for("react.profiler"),gy=Symbol.for("react.provider"),vy=Symbol.for("react.context"),yy=Symbol.for("react.forward_ref"),by=Symbol.for("react.suspense"),_y=Symbol.for("react.memo"),wy=Symbol.for("react.lazy"),cf=Symbol.iterator;function jy(e){return e===null||typeof e!="object"?null:(e=cf&&e[cf]||e["@@iterator"],typeof e=="function"?e:null)}var Pm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Em=Object.assign,Lm={};function Ur(e,t,s){this.props=e,this.context=t,this.refs=Lm,this.updater=s||Pm}Ur.prototype.isReactComponent={};Ur.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ur.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Tm(){}Tm.prototype=Ur.prototype;function Yu(e,t,s){this.props=e,this.context=t,this.refs=Lm,this.updater=s||Pm}var Xu=Yu.prototype=new Tm;Xu.constructor=Yu;Em(Xu,Ur.prototype);Xu.isPureReactComponent=!0;var uf=Array.isArray,Mm=Object.prototype.hasOwnProperty,Qu={current:null},Am={key:!0,ref:!0,__self:!0,__source:!0};function Rm(e,t,s){var i,o={},l=null,u=null;if(t!=null)for(i in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(l=""+t.key),t)Mm.call(t,i)&&!Am.hasOwnProperty(i)&&(o[i]=t[i]);var h=arguments.length-2;if(h===1)o.children=s;else if(1<h){for(var f=Array(h),m=0;m<h;m++)f[m]=arguments[m+2];o.children=f}if(e&&e.defaultProps)for(i in h=e.defaultProps,h)o[i]===void 0&&(o[i]=h[i]);return{$$typeof:ea,type:e,key:l,ref:u,props:o,_owner:Qu.current}}function Ny(e,t){return{$$typeof:ea,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ju(e){return typeof e=="object"&&e!==null&&e.$$typeof===ea}function ky(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var df=/\/+/g;function ec(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ky(""+e.key):t.toString(36)}function no(e,t,s,i,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case ea:case fy:u=!0}}if(u)return u=e,o=o(u),e=i===""?"."+ec(u,0):i,uf(o)?(s="",e!=null&&(s=e.replace(df,"$&/")+"/"),no(o,t,s,"",function(m){return m})):o!=null&&(Ju(o)&&(o=Ny(o,s+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(df,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=i===""?".":i+":",uf(e))for(var h=0;h<e.length;h++){l=e[h];var f=i+ec(l,h);u+=no(l,t,s,f,o)}else if(f=jy(e),typeof f=="function")for(e=f.call(e),h=0;!(l=e.next()).done;)l=l.value,f=i+ec(l,h++),u+=no(l,t,s,f,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function La(e,t,s){if(e==null)return e;var i=[],o=0;return no(e,i,"","",function(l){return t.call(s,l,o++)}),i}function Sy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dt={current:null},ro={transition:null},Cy={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:ro,ReactCurrentOwner:Qu};function Im(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:La,forEach:function(e,t,s){La(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return La(e,function(){t++}),t},toArray:function(e){return La(e,function(t){return t})||[]},only:function(e){if(!Ju(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ue.Component=Ur;Ue.Fragment=py;Ue.Profiler=xy;Ue.PureComponent=Yu;Ue.StrictMode=my;Ue.Suspense=by;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cy;Ue.act=Im;Ue.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Em({},e.props),o=e.key,l=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,u=Qu.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(f in t)Mm.call(t,f)&&!Am.hasOwnProperty(f)&&(i[f]=t[f]===void 0&&h!==void 0?h[f]:t[f])}var f=arguments.length-2;if(f===1)i.children=s;else if(1<f){h=Array(f);for(var m=0;m<f;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:ea,type:e.type,key:o,ref:l,props:i,_owner:u}};Ue.createContext=function(e){return e={$$typeof:vy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gy,_context:e},e.Consumer=e};Ue.createElement=Rm;Ue.createFactory=function(e){var t=Rm.bind(null,e);return t.type=e,t};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(e){return{$$typeof:yy,render:e}};Ue.isValidElement=Ju;Ue.lazy=function(e){return{$$typeof:wy,_payload:{_status:-1,_result:e},_init:Sy}};Ue.memo=function(e,t){return{$$typeof:_y,type:e,compare:t===void 0?null:t}};Ue.startTransition=function(e){var t=ro.transition;ro.transition={};try{e()}finally{ro.transition=t}};Ue.unstable_act=Im;Ue.useCallback=function(e,t){return Dt.current.useCallback(e,t)};Ue.useContext=function(e){return Dt.current.useContext(e)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(e){return Dt.current.useDeferredValue(e)};Ue.useEffect=function(e,t){return Dt.current.useEffect(e,t)};Ue.useId=function(){return Dt.current.useId()};Ue.useImperativeHandle=function(e,t,s){return Dt.current.useImperativeHandle(e,t,s)};Ue.useInsertionEffect=function(e,t){return Dt.current.useInsertionEffect(e,t)};Ue.useLayoutEffect=function(e,t){return Dt.current.useLayoutEffect(e,t)};Ue.useMemo=function(e,t){return Dt.current.useMemo(e,t)};Ue.useReducer=function(e,t,s){return Dt.current.useReducer(e,t,s)};Ue.useRef=function(e){return Dt.current.useRef(e)};Ue.useState=function(e){return Dt.current.useState(e)};Ue.useSyncExternalStore=function(e,t,s){return Dt.current.useSyncExternalStore(e,t,s)};Ue.useTransition=function(){return Dt.current.useTransition()};Ue.version="18.3.1";Cm.exports=Ue;var x=Cm.exports;const Tr=Ku(x),Py=dy({__proto__:null,default:Tr},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey=x,Ly=Symbol.for("react.element"),Ty=Symbol.for("react.fragment"),My=Object.prototype.hasOwnProperty,Ay=Ey.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ry={key:!0,ref:!0,__self:!0,__source:!0};function zm(e,t,s){var i,o={},l=null,u=null;s!==void 0&&(l=""+s),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(u=t.ref);for(i in t)My.call(t,i)&&!Ry.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:Ly,type:e,key:l,ref:u,props:o,_owner:Ay.current}}tl.Fragment=Ty;tl.jsx=zm;tl.jsxs=zm;Sm.exports=tl;var r=Sm.exports,Oc={},Om={exports:{}},rs={},Dm={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,D){var P=M.length;M.push(D);e:for(;0<P;){var G=P-1>>>1,J=M[G];if(0<o(J,D))M[G]=D,M[P]=J,P=G;else break e}}function s(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var D=M[0],P=M.pop();if(P!==D){M[0]=P;e:for(var G=0,J=M.length,H=J>>>1;G<H;){var B=2*(G+1)-1,X=M[B],ee=B+1,pe=M[ee];if(0>o(X,P))ee<J&&0>o(pe,X)?(M[G]=pe,M[ee]=P,G=ee):(M[G]=X,M[B]=P,G=B);else if(ee<J&&0>o(pe,P))M[G]=pe,M[ee]=P,G=ee;else break e}}return D}function o(M,D){var P=M.sortIndex-D.sortIndex;return P!==0?P:M.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var f=[],m=[],g=1,_=null,y=3,v=!1,k=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(M){for(var D=s(m);D!==null;){if(D.callback===null)i(m);else if(D.startTime<=M)i(m),D.sortIndex=D.expirationTime,t(f,D);else break;D=s(m)}}function O(M){if(C=!1,N(M),!k)if(s(f)!==null)k=!0,Z(A);else{var D=s(m);D!==null&&le(O,D.startTime-M)}}function A(M,D){k=!1,C&&(C=!1,j(V),V=-1),v=!0;var P=y;try{for(N(D),_=s(f);_!==null&&(!(_.expirationTime>D)||M&&!K());){var G=_.callback;if(typeof G=="function"){_.callback=null,y=_.priorityLevel;var J=G(_.expirationTime<=D);D=e.unstable_now(),typeof J=="function"?_.callback=J:_===s(f)&&i(f),N(D)}else i(f);_=s(f)}if(_!==null)var H=!0;else{var B=s(m);B!==null&&le(O,B.startTime-D),H=!1}return H}finally{_=null,y=P,v=!1}}var F=!1,R=null,V=-1,$=5,T=-1;function K(){return!(e.unstable_now()-T<$)}function Y(){if(R!==null){var M=e.unstable_now();T=M;var D=!0;try{D=R(!0,M)}finally{D?ue():(F=!1,R=null)}}else F=!1}var ue;if(typeof w=="function")ue=function(){w(Y)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,ve=he.port2;he.port1.onmessage=Y,ue=function(){ve.postMessage(null)}}else ue=function(){S(Y,0)};function Z(M){R=M,F||(F=!0,ue())}function le(M,D){V=S(function(){M(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){k||v||(k=!0,Z(A))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return s(f)},e.unstable_next=function(M){switch(y){case 1:case 2:case 3:var D=3;break;default:D=y}var P=y;y=D;try{return M()}finally{y=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,D){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var P=y;y=M;try{return D()}finally{y=P}},e.unstable_scheduleCallback=function(M,D,P){var G=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?G+P:G):P=G,M){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=P+J,M={id:g++,callback:D,priorityLevel:M,startTime:P,expirationTime:J,sortIndex:-1},P>G?(M.sortIndex=P,t(m,M),s(f)===null&&M===s(m)&&(C?(j(V),V=-1):C=!0,le(O,P-G))):(M.sortIndex=J,t(f,M),k||v||(k=!0,Z(A))),M},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(M){var D=y;return function(){var P=y;y=D;try{return M.apply(this,arguments)}finally{y=P}}}})(Bm);Dm.exports=Bm;var Iy=Dm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy=x,ns=Iy;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fm=new Set,Ai={};function Qn(e,t){Mr(e,t),Mr(e+"Capture",t)}function Mr(e,t){for(Ai[e]=t,e=0;e<t.length;e++)Fm.add(t[e])}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dc=Object.prototype.hasOwnProperty,Oy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hf={},ff={};function Dy(e){return Dc.call(ff,e)?!0:Dc.call(hf,e)?!1:Oy.test(e)?ff[e]=!0:(hf[e]=!0,!1)}function By(e,t,s,i){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Fy(e,t,s,i){if(t===null||typeof t>"u"||By(e,t,s,i))return!0;if(i)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bt(e,t,s,i,o,l,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=u}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new Bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new Bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new Bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new Bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new Bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new Bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new Bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new Bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new Bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ed=/[\-:]([a-z])/g;function td(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ed,td);Et[t]=new Bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ed,td);Et[t]=new Bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ed,td);Et[t]=new Bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new Bt(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new Bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function sd(e,t,s,i){var o=Et.hasOwnProperty(t)?Et[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Fy(t,s,o,i)&&(s=null),i||o===null?Dy(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):o.mustUseProperty?e[o.propertyName]=s===null?o.type===3?!1:"":s:(t=o.attributeName,i=o.attributeNamespace,s===null?e.removeAttribute(t):(o=o.type,s=o===3||o===4&&s===!0?"":""+s,i?e.setAttributeNS(i,t,s):e.setAttribute(t,s))))}var tn=zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ta=Symbol.for("react.element"),hr=Symbol.for("react.portal"),fr=Symbol.for("react.fragment"),nd=Symbol.for("react.strict_mode"),Bc=Symbol.for("react.profiler"),$m=Symbol.for("react.provider"),Um=Symbol.for("react.context"),rd=Symbol.for("react.forward_ref"),Fc=Symbol.for("react.suspense"),$c=Symbol.for("react.suspense_list"),id=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),Vm=Symbol.for("react.offscreen"),pf=Symbol.iterator;function oi(e){return e===null||typeof e!="object"?null:(e=pf&&e[pf]||e["@@iterator"],typeof e=="function"?e:null)}var at=Object.assign,tc;function vi(e){if(tc===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);tc=t&&t[1]||""}return`
`+tc+e}var sc=!1;function nc(e,t){if(!e||sc)return"";sc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var i=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){i=m}e.call(t.prototype)}else{try{throw Error()}catch(m){i=m}e()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var o=m.stack.split(`
`),l=i.stack.split(`
`),u=o.length-1,h=l.length-1;1<=u&&0<=h&&o[u]!==l[h];)h--;for(;1<=u&&0<=h;u--,h--)if(o[u]!==l[h]){if(u!==1||h!==1)do if(u--,h--,0>h||o[u]!==l[h]){var f=`
`+o[u].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=u&&0<=h);break}}}finally{sc=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?vi(e):""}function $y(e){switch(e.tag){case 5:return vi(e.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 2:case 15:return e=nc(e.type,!1),e;case 11:return e=nc(e.type.render,!1),e;case 1:return e=nc(e.type,!0),e;default:return""}}function Uc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fr:return"Fragment";case hr:return"Portal";case Bc:return"Profiler";case nd:return"StrictMode";case Fc:return"Suspense";case $c:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Um:return(e.displayName||"Context")+".Consumer";case $m:return(e._context.displayName||"Context")+".Provider";case rd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case id:return t=e.displayName||null,t!==null?t:Uc(e.type)||"Memo";case an:t=e._payload,e=e._init;try{return Uc(e(t))}catch{}}return null}function Uy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uc(t);case 8:return t===nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vy(e){var t=Zm(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,l=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(u){i=""+u,l.call(this,u)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ma(e){e._valueTracker||(e._valueTracker=Vy(e))}function Hm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=Zm(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vc(e,t){var s=t.checked;return at({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function mf(e,t){var s=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;s=wn(t.value!=null?t.value:s),e._wrapperState={initialChecked:i,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qm(e,t){t=t.checked,t!=null&&sd(e,"checked",t,!1)}function Zc(e,t){qm(e,t);var s=wn(t.value),i=t.type;if(s!=null)i==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hc(e,t.type,s):t.hasOwnProperty("defaultValue")&&Hc(e,t.type,wn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xf(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Hc(e,t,s){(t!=="number"||bo(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var yi=Array.isArray;function kr(e,t,s,i){if(e=e.options,t){t={};for(var o=0;o<s.length;o++)t["$"+s[o]]=!0;for(s=0;s<e.length;s++)o=t.hasOwnProperty("$"+e[s].value),e[s].selected!==o&&(e[s].selected=o),o&&i&&(e[s].defaultSelected=!0)}else{for(s=""+wn(s),t=null,o=0;o<e.length;o++){if(e[o].value===s){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function qc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return at({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gf(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(ce(92));if(yi(s)){if(1<s.length)throw Error(ce(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:wn(s)}}function Wm(e,t){var s=wn(t.value),i=wn(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),i!=null&&(e.defaultValue=""+i)}function vf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Gm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Gm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Aa,Km=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,s,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Aa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ri(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zy=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(e){Zy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wi[t]=wi[e]})});function Ym(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||wi.hasOwnProperty(e)&&wi[e]?(""+t).trim():t+"px"}function Xm(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var i=s.indexOf("--")===0,o=Ym(s,t[s],i);s==="float"&&(s="cssFloat"),i?e.setProperty(s,o):e[s]=o}}var Hy=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gc(e,t){if(t){if(Hy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function Kc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yc=null;function ad(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xc=null,Sr=null,Cr=null;function yf(e){if(e=na(e)){if(typeof Xc!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=al(t),Xc(e.stateNode,e.type,t))}}function Qm(e){Sr?Cr?Cr.push(e):Cr=[e]:Sr=e}function Jm(){if(Sr){var e=Sr,t=Cr;if(Cr=Sr=null,yf(e),t)for(e=0;e<t.length;e++)yf(t[e])}}function ex(e,t){return e(t)}function tx(){}var rc=!1;function sx(e,t,s){if(rc)return e(t,s);rc=!0;try{return ex(e,t,s)}finally{rc=!1,(Sr!==null||Cr!==null)&&(tx(),Jm())}}function Ii(e,t){var s=e.stateNode;if(s===null)return null;var i=al(s);if(i===null)return null;s=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(ce(231,t,typeof s));return s}var Qc=!1;if(Xs)try{var li={};Object.defineProperty(li,"passive",{get:function(){Qc=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Qc=!1}function qy(e,t,s,i,o,l,u,h,f){var m=Array.prototype.slice.call(arguments,3);try{t.apply(s,m)}catch(g){this.onError(g)}}var ji=!1,_o=null,wo=!1,Jc=null,Wy={onError:function(e){ji=!0,_o=e}};function Gy(e,t,s,i,o,l,u,h,f){ji=!1,_o=null,qy.apply(Wy,arguments)}function Ky(e,t,s,i,o,l,u,h,f){if(Gy.apply(this,arguments),ji){if(ji){var m=_o;ji=!1,_o=null}else throw Error(ce(198));wo||(wo=!0,Jc=m)}}function Jn(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function nx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bf(e){if(Jn(e)!==e)throw Error(ce(188))}function Yy(e){var t=e.alternate;if(!t){if(t=Jn(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var s=e,i=t;;){var o=s.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){s=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===s)return bf(o),e;if(l===i)return bf(o),t;l=l.sibling}throw Error(ce(188))}if(s.return!==i.return)s=o,i=l;else{for(var u=!1,h=o.child;h;){if(h===s){u=!0,s=o,i=l;break}if(h===i){u=!0,i=o,s=l;break}h=h.sibling}if(!u){for(h=l.child;h;){if(h===s){u=!0,s=l,i=o;break}if(h===i){u=!0,i=l,s=o;break}h=h.sibling}if(!u)throw Error(ce(189))}}if(s.alternate!==i)throw Error(ce(190))}if(s.tag!==3)throw Error(ce(188));return s.stateNode.current===s?e:t}function rx(e){return e=Yy(e),e!==null?ix(e):null}function ix(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ix(e);if(t!==null)return t;e=e.sibling}return null}var ax=ns.unstable_scheduleCallback,_f=ns.unstable_cancelCallback,Xy=ns.unstable_shouldYield,Qy=ns.unstable_requestPaint,dt=ns.unstable_now,Jy=ns.unstable_getCurrentPriorityLevel,od=ns.unstable_ImmediatePriority,ox=ns.unstable_UserBlockingPriority,jo=ns.unstable_NormalPriority,eb=ns.unstable_LowPriority,lx=ns.unstable_IdlePriority,sl=null,Os=null;function tb(e){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(sl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ns=Math.clz32?Math.clz32:rb,sb=Math.log,nb=Math.LN2;function rb(e){return e>>>=0,e===0?32:31-(sb(e)/nb|0)|0}var Ra=64,Ia=4194304;function bi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function No(e,t){var s=e.pendingLanes;if(s===0)return 0;var i=0,o=e.suspendedLanes,l=e.pingedLanes,u=s&268435455;if(u!==0){var h=u&~o;h!==0?i=bi(h):(l&=u,l!==0&&(i=bi(l)))}else u=s&~o,u!==0?i=bi(u):l!==0&&(i=bi(l));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(i&4&&(i|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)s=31-Ns(t),o=1<<s,i|=e[s],t&=~o;return i}function ib(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ab(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var u=31-Ns(l),h=1<<u,f=o[u];f===-1?(!(h&s)||h&i)&&(o[u]=ib(h,t)):f<=t&&(e.expiredLanes|=h),l&=~h}}function eu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cx(){var e=Ra;return Ra<<=1,!(Ra&4194240)&&(Ra=64),e}function ic(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ta(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ns(t),e[t]=s}function ob(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<s;){var o=31-Ns(s),l=1<<o;t[o]=0,i[o]=-1,e[o]=-1,s&=~l}}function ld(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-Ns(s),o=1<<i;o&t|e[i]&t&&(e[i]|=t),s&=~o}}var Ke=0;function ux(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dx,cd,hx,fx,px,tu=!1,za=[],fn=null,pn=null,mn=null,zi=new Map,Oi=new Map,ln=[],lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wf(e,t){switch(e){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":zi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(t.pointerId)}}function ci(e,t,s,i,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},t!==null&&(t=na(t),t!==null&&cd(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function cb(e,t,s,i,o){switch(t){case"focusin":return fn=ci(fn,e,t,s,i,o),!0;case"dragenter":return pn=ci(pn,e,t,s,i,o),!0;case"mouseover":return mn=ci(mn,e,t,s,i,o),!0;case"pointerover":var l=o.pointerId;return zi.set(l,ci(zi.get(l)||null,e,t,s,i,o)),!0;case"gotpointercapture":return l=o.pointerId,Oi.set(l,ci(Oi.get(l)||null,e,t,s,i,o)),!0}return!1}function mx(e){var t=Dn(e.target);if(t!==null){var s=Jn(t);if(s!==null){if(t=s.tag,t===13){if(t=nx(s),t!==null){e.blockedOn=t,px(e.priority,function(){hx(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function io(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=su(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);Yc=i,s.target.dispatchEvent(i),Yc=null}else return t=na(s),t!==null&&cd(t),e.blockedOn=s,!1;t.shift()}return!0}function jf(e,t,s){io(e)&&s.delete(t)}function ub(){tu=!1,fn!==null&&io(fn)&&(fn=null),pn!==null&&io(pn)&&(pn=null),mn!==null&&io(mn)&&(mn=null),zi.forEach(jf),Oi.forEach(jf)}function ui(e,t){e.blockedOn===t&&(e.blockedOn=null,tu||(tu=!0,ns.unstable_scheduleCallback(ns.unstable_NormalPriority,ub)))}function Di(e){function t(o){return ui(o,e)}if(0<za.length){ui(za[0],e);for(var s=1;s<za.length;s++){var i=za[s];i.blockedOn===e&&(i.blockedOn=null)}}for(fn!==null&&ui(fn,e),pn!==null&&ui(pn,e),mn!==null&&ui(mn,e),zi.forEach(t),Oi.forEach(t),s=0;s<ln.length;s++)i=ln[s],i.blockedOn===e&&(i.blockedOn=null);for(;0<ln.length&&(s=ln[0],s.blockedOn===null);)mx(s),s.blockedOn===null&&ln.shift()}var Pr=tn.ReactCurrentBatchConfig,ko=!0;function db(e,t,s,i){var o=Ke,l=Pr.transition;Pr.transition=null;try{Ke=1,ud(e,t,s,i)}finally{Ke=o,Pr.transition=l}}function hb(e,t,s,i){var o=Ke,l=Pr.transition;Pr.transition=null;try{Ke=4,ud(e,t,s,i)}finally{Ke=o,Pr.transition=l}}function ud(e,t,s,i){if(ko){var o=su(e,t,s,i);if(o===null)mc(e,t,i,So,s),wf(e,i);else if(cb(o,e,t,s,i))i.stopPropagation();else if(wf(e,i),t&4&&-1<lb.indexOf(e)){for(;o!==null;){var l=na(o);if(l!==null&&dx(l),l=su(e,t,s,i),l===null&&mc(e,t,i,So,s),l===o)break;o=l}o!==null&&i.stopPropagation()}else mc(e,t,i,null,s)}}var So=null;function su(e,t,s,i){if(So=null,e=ad(i),e=Dn(e),e!==null)if(t=Jn(e),t===null)e=null;else if(s=t.tag,s===13){if(e=nx(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return So=e,null}function xx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jy()){case od:return 1;case ox:return 4;case jo:case eb:return 16;case lx:return 536870912;default:return 16}default:return 16}}var un=null,dd=null,ao=null;function gx(){if(ao)return ao;var e,t=dd,s=t.length,i,o="value"in un?un.value:un.textContent,l=o.length;for(e=0;e<s&&t[e]===o[e];e++);var u=s-e;for(i=1;i<=u&&t[s-i]===o[l-i];i++);return ao=o.slice(e,1<i?1-i:void 0)}function oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Oa(){return!0}function Nf(){return!1}function is(e){function t(s,i,o,l,u){this._reactName=s,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(s=e[h],this[h]=s?s(l):l[h]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Oa:Nf,this.isPropagationStopped=Nf,this}return at(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=is(Vr),sa=at({},Vr,{view:0,detail:0}),fb=is(sa),ac,oc,di,nl=at({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==di&&(di&&e.type==="mousemove"?(ac=e.screenX-di.screenX,oc=e.screenY-di.screenY):oc=ac=0,di=e),ac)},movementY:function(e){return"movementY"in e?e.movementY:oc}}),kf=is(nl),pb=at({},nl,{dataTransfer:0}),mb=is(pb),xb=at({},sa,{relatedTarget:0}),lc=is(xb),gb=at({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),vb=is(gb),yb=at({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bb=is(yb),_b=at({},Vr,{data:0}),Sf=is(_b),wb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nb[e])?!!t[e]:!1}function fd(){return kb}var Sb=at({},sa,{key:function(e){if(e.key){var t=wb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fd,charCode:function(e){return e.type==="keypress"?oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cb=is(Sb),Pb=at({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cf=is(Pb),Eb=at({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fd}),Lb=is(Eb),Tb=at({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mb=is(Tb),Ab=at({},nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rb=is(Ab),Ib=[9,13,27,32],pd=Xs&&"CompositionEvent"in window,Ni=null;Xs&&"documentMode"in document&&(Ni=document.documentMode);var zb=Xs&&"TextEvent"in window&&!Ni,vx=Xs&&(!pd||Ni&&8<Ni&&11>=Ni),Pf=" ",Ef=!1;function yx(e,t){switch(e){case"keyup":return Ib.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pr=!1;function Ob(e,t){switch(e){case"compositionend":return bx(t);case"keypress":return t.which!==32?null:(Ef=!0,Pf);case"textInput":return e=t.data,e===Pf&&Ef?null:e;default:return null}}function Db(e,t){if(pr)return e==="compositionend"||!pd&&yx(e,t)?(e=gx(),ao=dd=un=null,pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vx&&t.locale!=="ko"?null:t.data;default:return null}}var Bb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bb[e.type]:t==="textarea"}function _x(e,t,s,i){Qm(i),t=Co(t,"onChange"),0<t.length&&(s=new hd("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var ki=null,Bi=null;function Fb(e){Mx(e,0)}function rl(e){var t=gr(e);if(Hm(t))return e}function $b(e,t){if(e==="change")return t}var wx=!1;if(Xs){var cc;if(Xs){var uc="oninput"in document;if(!uc){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),uc=typeof Tf.oninput=="function"}cc=uc}else cc=!1;wx=cc&&(!document.documentMode||9<document.documentMode)}function Mf(){ki&&(ki.detachEvent("onpropertychange",jx),Bi=ki=null)}function jx(e){if(e.propertyName==="value"&&rl(Bi)){var t=[];_x(t,Bi,e,ad(e)),sx(Fb,t)}}function Ub(e,t,s){e==="focusin"?(Mf(),ki=t,Bi=s,ki.attachEvent("onpropertychange",jx)):e==="focusout"&&Mf()}function Vb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rl(Bi)}function Zb(e,t){if(e==="click")return rl(t)}function Hb(e,t){if(e==="input"||e==="change")return rl(t)}function qb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ss=typeof Object.is=="function"?Object.is:qb;function Fi(e,t){if(Ss(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var o=s[i];if(!Dc.call(t,o)||!Ss(e[o],t[o]))return!1}return!0}function Af(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rf(e,t){var s=Af(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Af(s)}}function Nx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kx(){for(var e=window,t=bo();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=bo(e.document)}return t}function md(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wb(e){var t=kx(),s=e.focusedElem,i=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Nx(s.ownerDocument.documentElement,s)){if(i!==null&&md(s)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=s.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!e.extend&&l>i&&(o=i,i=l,l=o),o=Rf(s,l);var u=Rf(s,i);o&&u&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>i?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gb=Xs&&"documentMode"in document&&11>=document.documentMode,mr=null,nu=null,Si=null,ru=!1;function If(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ru||mr==null||mr!==bo(i)||(i=mr,"selectionStart"in i&&md(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Si&&Fi(Si,i)||(Si=i,i=Co(nu,"onSelect"),0<i.length&&(t=new hd("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=mr)))}function Da(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var xr={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionend:Da("Transition","TransitionEnd")},dc={},Sx={};Xs&&(Sx=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function il(e){if(dc[e])return dc[e];if(!xr[e])return e;var t=xr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Sx)return dc[e]=t[s];return e}var Cx=il("animationend"),Px=il("animationiteration"),Ex=il("animationstart"),Lx=il("transitionend"),Tx=new Map,zf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){Tx.set(e,t),Qn(t,[e])}for(var hc=0;hc<zf.length;hc++){var fc=zf[hc],Kb=fc.toLowerCase(),Yb=fc[0].toUpperCase()+fc.slice(1);Nn(Kb,"on"+Yb)}Nn(Cx,"onAnimationEnd");Nn(Px,"onAnimationIteration");Nn(Ex,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(Lx,"onTransitionEnd");Mr("onMouseEnter",["mouseout","mouseover"]);Mr("onMouseLeave",["mouseout","mouseover"]);Mr("onPointerEnter",["pointerout","pointerover"]);Mr("onPointerLeave",["pointerout","pointerover"]);Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xb=new Set("cancel close invalid load scroll toggle".split(" ").concat(_i));function Of(e,t,s){var i=e.type||"unknown-event";e.currentTarget=s,Ky(i,t,void 0,e),e.currentTarget=null}function Mx(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],o=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var u=i.length-1;0<=u;u--){var h=i[u],f=h.instance,m=h.currentTarget;if(h=h.listener,f!==l&&o.isPropagationStopped())break e;Of(o,h,m),l=f}else for(u=0;u<i.length;u++){if(h=i[u],f=h.instance,m=h.currentTarget,h=h.listener,f!==l&&o.isPropagationStopped())break e;Of(o,h,m),l=f}}}if(wo)throw e=Jc,wo=!1,Jc=null,e}function Je(e,t){var s=t[cu];s===void 0&&(s=t[cu]=new Set);var i=e+"__bubble";s.has(i)||(Ax(t,e,2,!1),s.add(i))}function pc(e,t,s){var i=0;t&&(i|=4),Ax(s,e,i,t)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function $i(e){if(!e[Ba]){e[Ba]=!0,Fm.forEach(function(s){s!=="selectionchange"&&(Xb.has(s)||pc(s,!1,e),pc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ba]||(t[Ba]=!0,pc("selectionchange",!1,t))}}function Ax(e,t,s,i){switch(xx(t)){case 1:var o=db;break;case 4:o=hb;break;default:o=ud}s=o.bind(null,t,s,e),o=void 0,!Qc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,s,{capture:!0,passive:o}):e.addEventListener(t,s,!0):o!==void 0?e.addEventListener(t,s,{passive:o}):e.addEventListener(t,s,!1)}function mc(e,t,s,i,o){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var h=i.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(u===4)for(u=i.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===o||f.nodeType===8&&f.parentNode===o))return;u=u.return}for(;h!==null;){if(u=Dn(h),u===null)return;if(f=u.tag,f===5||f===6){i=l=u;continue e}h=h.parentNode}}i=i.return}sx(function(){var m=l,g=ad(s),_=[];e:{var y=Tx.get(e);if(y!==void 0){var v=hd,k=e;switch(e){case"keypress":if(oo(s)===0)break e;case"keydown":case"keyup":v=Cb;break;case"focusin":k="focus",v=lc;break;case"focusout":k="blur",v=lc;break;case"beforeblur":case"afterblur":v=lc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=mb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Lb;break;case Cx:case Px:case Ex:v=vb;break;case Lx:v=Mb;break;case"scroll":v=fb;break;case"wheel":v=Rb;break;case"copy":case"cut":case"paste":v=bb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Cf}var C=(t&4)!==0,S=!C&&e==="scroll",j=C?y!==null?y+"Capture":null:y;C=[];for(var w=m,N;w!==null;){N=w;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,j!==null&&(O=Ii(w,j),O!=null&&C.push(Ui(w,O,N)))),S)break;w=w.return}0<C.length&&(y=new v(y,k,null,s,g),_.push({event:y,listeners:C}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",y&&s!==Yc&&(k=s.relatedTarget||s.fromElement)&&(Dn(k)||k[Qs]))break e;if((v||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,v?(k=s.relatedTarget||s.toElement,v=m,k=k?Dn(k):null,k!==null&&(S=Jn(k),k!==S||k.tag!==5&&k.tag!==6)&&(k=null)):(v=null,k=m),v!==k)){if(C=kf,O="onMouseLeave",j="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(C=Cf,O="onPointerLeave",j="onPointerEnter",w="pointer"),S=v==null?y:gr(v),N=k==null?y:gr(k),y=new C(O,w+"leave",v,s,g),y.target=S,y.relatedTarget=N,O=null,Dn(g)===m&&(C=new C(j,w+"enter",k,s,g),C.target=N,C.relatedTarget=S,O=C),S=O,v&&k)t:{for(C=v,j=k,w=0,N=C;N;N=dr(N))w++;for(N=0,O=j;O;O=dr(O))N++;for(;0<w-N;)C=dr(C),w--;for(;0<N-w;)j=dr(j),N--;for(;w--;){if(C===j||j!==null&&C===j.alternate)break t;C=dr(C),j=dr(j)}C=null}else C=null;v!==null&&Df(_,y,v,C,!1),k!==null&&S!==null&&Df(_,S,k,C,!0)}}e:{if(y=m?gr(m):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var A=$b;else if(Lf(y))if(wx)A=Hb;else{A=Vb;var F=Ub}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(A=Zb);if(A&&(A=A(e,m))){_x(_,A,s,g);break e}F&&F(e,y,m),e==="focusout"&&(F=y._wrapperState)&&F.controlled&&y.type==="number"&&Hc(y,"number",y.value)}switch(F=m?gr(m):window,e){case"focusin":(Lf(F)||F.contentEditable==="true")&&(mr=F,nu=m,Si=null);break;case"focusout":Si=nu=mr=null;break;case"mousedown":ru=!0;break;case"contextmenu":case"mouseup":case"dragend":ru=!1,If(_,s,g);break;case"selectionchange":if(Gb)break;case"keydown":case"keyup":If(_,s,g)}var R;if(pd)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else pr?yx(e,s)&&(V="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(V="onCompositionStart");V&&(vx&&s.locale!=="ko"&&(pr||V!=="onCompositionStart"?V==="onCompositionEnd"&&pr&&(R=gx()):(un=g,dd="value"in un?un.value:un.textContent,pr=!0)),F=Co(m,V),0<F.length&&(V=new Sf(V,e,null,s,g),_.push({event:V,listeners:F}),R?V.data=R:(R=bx(s),R!==null&&(V.data=R)))),(R=zb?Ob(e,s):Db(e,s))&&(m=Co(m,"onBeforeInput"),0<m.length&&(g=new Sf("onBeforeInput","beforeinput",null,s,g),_.push({event:g,listeners:m}),g.data=R))}Mx(_,t)})}function Ui(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Co(e,t){for(var s=t+"Capture",i=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Ii(e,s),l!=null&&i.unshift(Ui(e,l,o)),l=Ii(e,t),l!=null&&i.push(Ui(e,l,o))),e=e.return}return i}function dr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Df(e,t,s,i,o){for(var l=t._reactName,u=[];s!==null&&s!==i;){var h=s,f=h.alternate,m=h.stateNode;if(f!==null&&f===i)break;h.tag===5&&m!==null&&(h=m,o?(f=Ii(s,l),f!=null&&u.unshift(Ui(s,f,h))):o||(f=Ii(s,l),f!=null&&u.push(Ui(s,f,h)))),s=s.return}u.length!==0&&e.push({event:t,listeners:u})}var Qb=/\r\n?/g,Jb=/\u0000|\uFFFD/g;function Bf(e){return(typeof e=="string"?e:""+e).replace(Qb,`
`).replace(Jb,"")}function Fa(e,t,s){if(t=Bf(t),Bf(e)!==t&&s)throw Error(ce(425))}function Po(){}var iu=null,au=null;function ou(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lu=typeof setTimeout=="function"?setTimeout:void 0,e_=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,t_=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(e){return Ff.resolve(null).then(e).catch(s_)}:lu;function s_(e){setTimeout(function(){throw e})}function xc(e,t){var s=t,i=0;do{var o=s.nextSibling;if(e.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(i===0){e.removeChild(o),Di(t);return}i--}else s!=="$"&&s!=="$?"&&s!=="$!"||i++;s=o}while(s);Di(t)}function xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $f(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Zr=Math.random().toString(36).slice(2),Is="__reactFiber$"+Zr,Vi="__reactProps$"+Zr,Qs="__reactContainer$"+Zr,cu="__reactEvents$"+Zr,n_="__reactListeners$"+Zr,r_="__reactHandles$"+Zr;function Dn(e){var t=e[Is];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Qs]||s[Is]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=$f(e);e!==null;){if(s=e[Is])return s;e=$f(e)}return t}e=s,s=e.parentNode}return null}function na(e){return e=e[Is]||e[Qs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function al(e){return e[Vi]||null}var uu=[],vr=-1;function kn(e){return{current:e}}function et(e){0>vr||(e.current=uu[vr],uu[vr]=null,vr--)}function Qe(e,t){vr++,uu[vr]=e.current,e.current=t}var jn={},Rt=kn(jn),Ht=kn(!1),Hn=jn;function Ar(e,t){var s=e.type.contextTypes;if(!s)return jn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in s)o[l]=t[l];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function qt(e){return e=e.childContextTypes,e!=null}function Eo(){et(Ht),et(Rt)}function Uf(e,t,s){if(Rt.current!==jn)throw Error(ce(168));Qe(Rt,t),Qe(Ht,s)}function Rx(e,t,s){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return s;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(ce(108,Uy(e)||"Unknown",o));return at({},s,i)}function Lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jn,Hn=Rt.current,Qe(Rt,e),Qe(Ht,Ht.current),!0}function Vf(e,t,s){var i=e.stateNode;if(!i)throw Error(ce(169));s?(e=Rx(e,t,Hn),i.__reactInternalMemoizedMergedChildContext=e,et(Ht),et(Rt),Qe(Rt,e)):et(Ht),Qe(Ht,s)}var Hs=null,ol=!1,gc=!1;function Ix(e){Hs===null?Hs=[e]:Hs.push(e)}function i_(e){ol=!0,Ix(e)}function Sn(){if(!gc&&Hs!==null){gc=!0;var e=0,t=Ke;try{var s=Hs;for(Ke=1;e<s.length;e++){var i=s[e];do i=i(!0);while(i!==null)}Hs=null,ol=!1}catch(o){throw Hs!==null&&(Hs=Hs.slice(e+1)),ax(od,Sn),o}finally{Ke=t,gc=!1}}return null}var yr=[],br=0,To=null,Mo=0,us=[],ds=0,qn=null,qs=1,Ws="";function zn(e,t){yr[br++]=Mo,yr[br++]=To,To=e,Mo=t}function zx(e,t,s){us[ds++]=qs,us[ds++]=Ws,us[ds++]=qn,qn=e;var i=qs;e=Ws;var o=32-Ns(i)-1;i&=~(1<<o),s+=1;var l=32-Ns(t)+o;if(30<l){var u=o-o%5;l=(i&(1<<u)-1).toString(32),i>>=u,o-=u,qs=1<<32-Ns(t)+o|s<<o|i,Ws=l+e}else qs=1<<l|s<<o|i,Ws=e}function xd(e){e.return!==null&&(zn(e,1),zx(e,1,0))}function gd(e){for(;e===To;)To=yr[--br],yr[br]=null,Mo=yr[--br],yr[br]=null;for(;e===qn;)qn=us[--ds],us[ds]=null,Ws=us[--ds],us[ds]=null,qs=us[--ds],us[ds]=null}var ts=null,Jt=null,st=!1,js=null;function Ox(e,t){var s=hs(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Zf(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ts=e,Jt=xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ts=e,Jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=qn!==null?{id:qs,overflow:Ws}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=hs(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ts=e,Jt=null,!0):!1;default:return!1}}function du(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hu(e){if(st){var t=Jt;if(t){var s=t;if(!Zf(e,t)){if(du(e))throw Error(ce(418));t=xn(s.nextSibling);var i=ts;t&&Zf(e,t)?Ox(i,s):(e.flags=e.flags&-4097|2,st=!1,ts=e)}}else{if(du(e))throw Error(ce(418));e.flags=e.flags&-4097|2,st=!1,ts=e}}}function Hf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ts=e}function $a(e){if(e!==ts)return!1;if(!st)return Hf(e),st=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ou(e.type,e.memoizedProps)),t&&(t=Jt)){if(du(e))throw Dx(),Error(ce(418));for(;t;)Ox(e,t),t=xn(t.nextSibling)}if(Hf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Jt=xn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Jt=null}}else Jt=ts?xn(e.stateNode.nextSibling):null;return!0}function Dx(){for(var e=Jt;e;)e=xn(e.nextSibling)}function Rr(){Jt=ts=null,st=!1}function vd(e){js===null?js=[e]:js.push(e)}var a_=tn.ReactCurrentBatchConfig;function hi(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ce(309));var i=s.stateNode}if(!i)throw Error(ce(147,e));var o=i,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(u){var h=o.refs;u===null?delete h[l]:h[l]=u},t._stringRef=l,t)}if(typeof e!="string")throw Error(ce(284));if(!s._owner)throw Error(ce(290,e))}return e}function Ua(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qf(e){var t=e._init;return t(e._payload)}function Bx(e){function t(j,w){if(e){var N=j.deletions;N===null?(j.deletions=[w],j.flags|=16):N.push(w)}}function s(j,w){if(!e)return null;for(;w!==null;)t(j,w),w=w.sibling;return null}function i(j,w){for(j=new Map;w!==null;)w.key!==null?j.set(w.key,w):j.set(w.index,w),w=w.sibling;return j}function o(j,w){return j=bn(j,w),j.index=0,j.sibling=null,j}function l(j,w,N){return j.index=N,e?(N=j.alternate,N!==null?(N=N.index,N<w?(j.flags|=2,w):N):(j.flags|=2,w)):(j.flags|=1048576,w)}function u(j){return e&&j.alternate===null&&(j.flags|=2),j}function h(j,w,N,O){return w===null||w.tag!==6?(w=Nc(N,j.mode,O),w.return=j,w):(w=o(w,N),w.return=j,w)}function f(j,w,N,O){var A=N.type;return A===fr?g(j,w,N.props.children,O,N.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===an&&qf(A)===w.type)?(O=o(w,N.props),O.ref=hi(j,w,N),O.return=j,O):(O=mo(N.type,N.key,N.props,null,j.mode,O),O.ref=hi(j,w,N),O.return=j,O)}function m(j,w,N,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=kc(N,j.mode,O),w.return=j,w):(w=o(w,N.children||[]),w.return=j,w)}function g(j,w,N,O,A){return w===null||w.tag!==7?(w=Vn(N,j.mode,O,A),w.return=j,w):(w=o(w,N),w.return=j,w)}function _(j,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nc(""+w,j.mode,N),w.return=j,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ta:return N=mo(w.type,w.key,w.props,null,j.mode,N),N.ref=hi(j,null,w),N.return=j,N;case hr:return w=kc(w,j.mode,N),w.return=j,w;case an:var O=w._init;return _(j,O(w._payload),N)}if(yi(w)||oi(w))return w=Vn(w,j.mode,N,null),w.return=j,w;Ua(j,w)}return null}function y(j,w,N,O){var A=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return A!==null?null:h(j,w,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ta:return N.key===A?f(j,w,N,O):null;case hr:return N.key===A?m(j,w,N,O):null;case an:return A=N._init,y(j,w,A(N._payload),O)}if(yi(N)||oi(N))return A!==null?null:g(j,w,N,O,null);Ua(j,N)}return null}function v(j,w,N,O,A){if(typeof O=="string"&&O!==""||typeof O=="number")return j=j.get(N)||null,h(w,j,""+O,A);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ta:return j=j.get(O.key===null?N:O.key)||null,f(w,j,O,A);case hr:return j=j.get(O.key===null?N:O.key)||null,m(w,j,O,A);case an:var F=O._init;return v(j,w,N,F(O._payload),A)}if(yi(O)||oi(O))return j=j.get(N)||null,g(w,j,O,A,null);Ua(w,O)}return null}function k(j,w,N,O){for(var A=null,F=null,R=w,V=w=0,$=null;R!==null&&V<N.length;V++){R.index>V?($=R,R=null):$=R.sibling;var T=y(j,R,N[V],O);if(T===null){R===null&&(R=$);break}e&&R&&T.alternate===null&&t(j,R),w=l(T,w,V),F===null?A=T:F.sibling=T,F=T,R=$}if(V===N.length)return s(j,R),st&&zn(j,V),A;if(R===null){for(;V<N.length;V++)R=_(j,N[V],O),R!==null&&(w=l(R,w,V),F===null?A=R:F.sibling=R,F=R);return st&&zn(j,V),A}for(R=i(j,R);V<N.length;V++)$=v(R,j,V,N[V],O),$!==null&&(e&&$.alternate!==null&&R.delete($.key===null?V:$.key),w=l($,w,V),F===null?A=$:F.sibling=$,F=$);return e&&R.forEach(function(K){return t(j,K)}),st&&zn(j,V),A}function C(j,w,N,O){var A=oi(N);if(typeof A!="function")throw Error(ce(150));if(N=A.call(N),N==null)throw Error(ce(151));for(var F=A=null,R=w,V=w=0,$=null,T=N.next();R!==null&&!T.done;V++,T=N.next()){R.index>V?($=R,R=null):$=R.sibling;var K=y(j,R,T.value,O);if(K===null){R===null&&(R=$);break}e&&R&&K.alternate===null&&t(j,R),w=l(K,w,V),F===null?A=K:F.sibling=K,F=K,R=$}if(T.done)return s(j,R),st&&zn(j,V),A;if(R===null){for(;!T.done;V++,T=N.next())T=_(j,T.value,O),T!==null&&(w=l(T,w,V),F===null?A=T:F.sibling=T,F=T);return st&&zn(j,V),A}for(R=i(j,R);!T.done;V++,T=N.next())T=v(R,j,V,T.value,O),T!==null&&(e&&T.alternate!==null&&R.delete(T.key===null?V:T.key),w=l(T,w,V),F===null?A=T:F.sibling=T,F=T);return e&&R.forEach(function(Y){return t(j,Y)}),st&&zn(j,V),A}function S(j,w,N,O){if(typeof N=="object"&&N!==null&&N.type===fr&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ta:e:{for(var A=N.key,F=w;F!==null;){if(F.key===A){if(A=N.type,A===fr){if(F.tag===7){s(j,F.sibling),w=o(F,N.props.children),w.return=j,j=w;break e}}else if(F.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===an&&qf(A)===F.type){s(j,F.sibling),w=o(F,N.props),w.ref=hi(j,F,N),w.return=j,j=w;break e}s(j,F);break}else t(j,F);F=F.sibling}N.type===fr?(w=Vn(N.props.children,j.mode,O,N.key),w.return=j,j=w):(O=mo(N.type,N.key,N.props,null,j.mode,O),O.ref=hi(j,w,N),O.return=j,j=O)}return u(j);case hr:e:{for(F=N.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){s(j,w.sibling),w=o(w,N.children||[]),w.return=j,j=w;break e}else{s(j,w);break}else t(j,w);w=w.sibling}w=kc(N,j.mode,O),w.return=j,j=w}return u(j);case an:return F=N._init,S(j,w,F(N._payload),O)}if(yi(N))return k(j,w,N,O);if(oi(N))return C(j,w,N,O);Ua(j,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(s(j,w.sibling),w=o(w,N),w.return=j,j=w):(s(j,w),w=Nc(N,j.mode,O),w.return=j,j=w),u(j)):s(j,w)}return S}var Ir=Bx(!0),Fx=Bx(!1),Ao=kn(null),Ro=null,_r=null,yd=null;function bd(){yd=_r=Ro=null}function _d(e){var t=Ao.current;et(Ao),e._currentValue=t}function fu(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function Er(e,t){Ro=e,yd=_r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zt=!0),e.firstContext=null)}function ms(e){var t=e._currentValue;if(yd!==e)if(e={context:e,memoizedValue:t,next:null},_r===null){if(Ro===null)throw Error(ce(308));_r=e,Ro.dependencies={lanes:0,firstContext:e}}else _r=_r.next=e;return t}var Bn=null;function wd(e){Bn===null?Bn=[e]:Bn.push(e)}function $x(e,t,s,i){var o=t.interleaved;return o===null?(s.next=s,wd(t)):(s.next=o.next,o.next=s),t.interleaved=s,Js(e,i)}function Js(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var on=!1;function jd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ux(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,qe&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,Js(e,s)}return o=i.interleaved,o===null?(t.next=t,wd(i)):(t.next=o.next,o.next=t),i.interleaved=t,Js(e,s)}function lo(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,ld(e,s)}}function Wf(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var o=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var u={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?o=l=u:l=l.next=u,s=s.next}while(s!==null);l===null?o=l=t:l=l.next=t}else o=l=t;s={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Io(e,t,s,i){var o=e.updateQueue;on=!1;var l=o.firstBaseUpdate,u=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var f=h,m=f.next;f.next=null,u===null?l=m:u.next=m,u=f;var g=e.alternate;g!==null&&(g=g.updateQueue,h=g.lastBaseUpdate,h!==u&&(h===null?g.firstBaseUpdate=m:h.next=m,g.lastBaseUpdate=f))}if(l!==null){var _=o.baseState;u=0,g=m=f=null,h=l;do{var y=h.lane,v=h.eventTime;if((i&y)===y){g!==null&&(g=g.next={eventTime:v,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var k=e,C=h;switch(y=t,v=s,C.tag){case 1:if(k=C.payload,typeof k=="function"){_=k.call(v,_,y);break e}_=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,y=typeof k=="function"?k.call(v,_,y):k,y==null)break e;_=at({},_,y);break e;case 2:on=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,y=o.effects,y===null?o.effects=[h]:y.push(h))}else v={eventTime:v,lane:y,tag:h.tag,payload:h.payload,callback:h.callback,next:null},g===null?(m=g=v,f=_):g=g.next=v,u|=y;if(h=h.next,h===null){if(h=o.shared.pending,h===null)break;y=h,h=y.next,y.next=null,o.lastBaseUpdate=y,o.shared.pending=null}}while(!0);if(g===null&&(f=_),o.baseState=f,o.firstBaseUpdate=m,o.lastBaseUpdate=g,t=o.shared.interleaved,t!==null){o=t;do u|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);Gn|=u,e.lanes=u,e.memoizedState=_}}function Gf(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=s,typeof o!="function")throw Error(ce(191,o));o.call(i)}}}var ra={},Ds=kn(ra),Zi=kn(ra),Hi=kn(ra);function Fn(e){if(e===ra)throw Error(ce(174));return e}function Nd(e,t){switch(Qe(Hi,t),Qe(Zi,e),Qe(Ds,ra),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wc(t,e)}et(Ds),Qe(Ds,t)}function zr(){et(Ds),et(Zi),et(Hi)}function Vx(e){Fn(Hi.current);var t=Fn(Ds.current),s=Wc(t,e.type);t!==s&&(Qe(Zi,e),Qe(Ds,s))}function kd(e){Zi.current===e&&(et(Ds),et(Zi))}var rt=kn(0);function zo(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vc=[];function Sd(){for(var e=0;e<vc.length;e++)vc[e]._workInProgressVersionPrimary=null;vc.length=0}var co=tn.ReactCurrentDispatcher,yc=tn.ReactCurrentBatchConfig,Wn=0,it=null,vt=null,jt=null,Oo=!1,Ci=!1,qi=0,o_=0;function Lt(){throw Error(ce(321))}function Cd(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ss(e[s],t[s]))return!1;return!0}function Pd(e,t,s,i,o,l){if(Wn=l,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,co.current=e===null||e.memoizedState===null?d_:h_,e=s(i,o),Ci){l=0;do{if(Ci=!1,qi=0,25<=l)throw Error(ce(301));l+=1,jt=vt=null,t.updateQueue=null,co.current=f_,e=s(i,o)}while(Ci)}if(co.current=Do,t=vt!==null&&vt.next!==null,Wn=0,jt=vt=it=null,Oo=!1,t)throw Error(ce(300));return e}function Ed(){var e=qi!==0;return qi=0,e}function Rs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?it.memoizedState=jt=e:jt=jt.next=e,jt}function xs(){if(vt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=jt===null?it.memoizedState:jt.next;if(t!==null)jt=t,vt=e;else{if(e===null)throw Error(ce(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},jt===null?it.memoizedState=jt=e:jt=jt.next=e}return jt}function Wi(e,t){return typeof t=="function"?t(e):t}function bc(e){var t=xs(),s=t.queue;if(s===null)throw Error(ce(311));s.lastRenderedReducer=e;var i=vt,o=i.baseQueue,l=s.pending;if(l!==null){if(o!==null){var u=o.next;o.next=l.next,l.next=u}i.baseQueue=o=l,s.pending=null}if(o!==null){l=o.next,i=i.baseState;var h=u=null,f=null,m=l;do{var g=m.lane;if((Wn&g)===g)f!==null&&(f=f.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:e(i,m.action);else{var _={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};f===null?(h=f=_,u=i):f=f.next=_,it.lanes|=g,Gn|=g}m=m.next}while(m!==null&&m!==l);f===null?u=i:f.next=h,Ss(i,t.memoizedState)||(Zt=!0),t.memoizedState=i,t.baseState=u,t.baseQueue=f,s.lastRenderedState=i}if(e=s.interleaved,e!==null){o=e;do l=o.lane,it.lanes|=l,Gn|=l,o=o.next;while(o!==e)}else o===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function _c(e){var t=xs(),s=t.queue;if(s===null)throw Error(ce(311));s.lastRenderedReducer=e;var i=s.dispatch,o=s.pending,l=t.memoizedState;if(o!==null){s.pending=null;var u=o=o.next;do l=e(l,u.action),u=u.next;while(u!==o);Ss(l,t.memoizedState)||(Zt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),s.lastRenderedState=l}return[l,i]}function Zx(){}function Hx(e,t){var s=it,i=xs(),o=t(),l=!Ss(i.memoizedState,o);if(l&&(i.memoizedState=o,Zt=!0),i=i.queue,Ld(Gx.bind(null,s,i,e),[e]),i.getSnapshot!==t||l||jt!==null&&jt.memoizedState.tag&1){if(s.flags|=2048,Gi(9,Wx.bind(null,s,i,o,t),void 0,null),Nt===null)throw Error(ce(349));Wn&30||qx(s,t,o)}return o}function qx(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Wx(e,t,s,i){t.value=s,t.getSnapshot=i,Kx(t)&&Yx(e)}function Gx(e,t,s){return s(function(){Kx(t)&&Yx(e)})}function Kx(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ss(e,s)}catch{return!0}}function Yx(e){var t=Js(e,1);t!==null&&ks(t,e,1,-1)}function Kf(e){var t=Rs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},t.queue=e,e=e.dispatch=u_.bind(null,it,e),[t.memoizedState,e]}function Gi(e,t,s,i){return e={tag:e,create:t,destroy:s,deps:i,next:null},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e)),e}function Xx(){return xs().memoizedState}function uo(e,t,s,i){var o=Rs();it.flags|=e,o.memoizedState=Gi(1|t,s,void 0,i===void 0?null:i)}function ll(e,t,s,i){var o=xs();i=i===void 0?null:i;var l=void 0;if(vt!==null){var u=vt.memoizedState;if(l=u.destroy,i!==null&&Cd(i,u.deps)){o.memoizedState=Gi(t,s,l,i);return}}it.flags|=e,o.memoizedState=Gi(1|t,s,l,i)}function Yf(e,t){return uo(8390656,8,e,t)}function Ld(e,t){return ll(2048,8,e,t)}function Qx(e,t){return ll(4,2,e,t)}function Jx(e,t){return ll(4,4,e,t)}function e0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function t0(e,t,s){return s=s!=null?s.concat([e]):null,ll(4,4,e0.bind(null,t,e),s)}function Td(){}function s0(e,t){var s=xs();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&Cd(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function n0(e,t){var s=xs();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&Cd(t,i[1])?i[0]:(e=e(),s.memoizedState=[e,t],e)}function r0(e,t,s){return Wn&21?(Ss(s,t)||(s=cx(),it.lanes|=s,Gn|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zt=!0),e.memoizedState=s)}function l_(e,t){var s=Ke;Ke=s!==0&&4>s?s:4,e(!0);var i=yc.transition;yc.transition={};try{e(!1),t()}finally{Ke=s,yc.transition=i}}function i0(){return xs().memoizedState}function c_(e,t,s){var i=yn(e);if(s={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null},a0(e))o0(t,s);else if(s=$x(e,t,s,i),s!==null){var o=Ot();ks(s,e,i,o),l0(s,t,i)}}function u_(e,t,s){var i=yn(e),o={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null};if(a0(e))o0(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var u=t.lastRenderedState,h=l(u,s);if(o.hasEagerState=!0,o.eagerState=h,Ss(h,u)){var f=t.interleaved;f===null?(o.next=o,wd(t)):(o.next=f.next,f.next=o),t.interleaved=o;return}}catch{}finally{}s=$x(e,t,o,i),s!==null&&(o=Ot(),ks(s,e,i,o),l0(s,t,i))}}function a0(e){var t=e.alternate;return e===it||t!==null&&t===it}function o0(e,t){Ci=Oo=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function l0(e,t,s){if(s&4194240){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,ld(e,s)}}var Do={readContext:ms,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},d_={readContext:ms,useCallback:function(e,t){return Rs().memoizedState=[e,t===void 0?null:t],e},useContext:ms,useEffect:Yf,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,uo(4194308,4,e0.bind(null,t,e),s)},useLayoutEffect:function(e,t){return uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return uo(4,2,e,t)},useMemo:function(e,t){var s=Rs();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var i=Rs();return t=s!==void 0?s(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=c_.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=Rs();return e={current:e},t.memoizedState=e},useState:Kf,useDebugValue:Td,useDeferredValue:function(e){return Rs().memoizedState=e},useTransition:function(){var e=Kf(!1),t=e[0];return e=l_.bind(null,e[1]),Rs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var i=it,o=Rs();if(st){if(s===void 0)throw Error(ce(407));s=s()}else{if(s=t(),Nt===null)throw Error(ce(349));Wn&30||qx(i,t,s)}o.memoizedState=s;var l={value:s,getSnapshot:t};return o.queue=l,Yf(Gx.bind(null,i,l,e),[e]),i.flags|=2048,Gi(9,Wx.bind(null,i,l,s,t),void 0,null),s},useId:function(){var e=Rs(),t=Nt.identifierPrefix;if(st){var s=Ws,i=qs;s=(i&~(1<<32-Ns(i)-1)).toString(32)+s,t=":"+t+"R"+s,s=qi++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=o_++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},h_={readContext:ms,useCallback:s0,useContext:ms,useEffect:Ld,useImperativeHandle:t0,useInsertionEffect:Qx,useLayoutEffect:Jx,useMemo:n0,useReducer:bc,useRef:Xx,useState:function(){return bc(Wi)},useDebugValue:Td,useDeferredValue:function(e){var t=xs();return r0(t,vt.memoizedState,e)},useTransition:function(){var e=bc(Wi)[0],t=xs().memoizedState;return[e,t]},useMutableSource:Zx,useSyncExternalStore:Hx,useId:i0,unstable_isNewReconciler:!1},f_={readContext:ms,useCallback:s0,useContext:ms,useEffect:Ld,useImperativeHandle:t0,useInsertionEffect:Qx,useLayoutEffect:Jx,useMemo:n0,useReducer:_c,useRef:Xx,useState:function(){return _c(Wi)},useDebugValue:Td,useDeferredValue:function(e){var t=xs();return vt===null?t.memoizedState=e:r0(t,vt.memoizedState,e)},useTransition:function(){var e=_c(Wi)[0],t=xs().memoizedState;return[e,t]},useMutableSource:Zx,useSyncExternalStore:Hx,useId:i0,unstable_isNewReconciler:!1};function _s(e,t){if(e&&e.defaultProps){t=at({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function pu(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:at({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var cl={isMounted:function(e){return(e=e._reactInternals)?Jn(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var i=Ot(),o=yn(e),l=Gs(i,o);l.payload=t,s!=null&&(l.callback=s),t=gn(e,l,o),t!==null&&(ks(t,e,o,i),lo(t,e,o))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=Ot(),o=yn(e),l=Gs(i,o);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=gn(e,l,o),t!==null&&(ks(t,e,o,i),lo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ot(),i=yn(e),o=Gs(s,i);o.tag=2,t!=null&&(o.callback=t),t=gn(e,o,i),t!==null&&(ks(t,e,i,s),lo(t,e,i))}};function Xf(e,t,s,i,o,l,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,u):t.prototype&&t.prototype.isPureReactComponent?!Fi(s,i)||!Fi(o,l):!0}function c0(e,t,s){var i=!1,o=jn,l=t.contextType;return typeof l=="object"&&l!==null?l=ms(l):(o=qt(t)?Hn:Rt.current,i=t.contextTypes,l=(i=i!=null)?Ar(e,o):jn),t=new t(s,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cl,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Qf(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&cl.enqueueReplaceState(t,t.state,null)}function mu(e,t,s,i){var o=e.stateNode;o.props=s,o.state=e.memoizedState,o.refs={},jd(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=ms(l):(l=qt(t)?Hn:Rt.current,o.context=Ar(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(pu(e,t,l,s),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&cl.enqueueReplaceState(o,o.state,null),Io(e,s,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var s="",i=t;do s+=$y(i),i=i.return;while(i);var o=s}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function wc(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function xu(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var p_=typeof WeakMap=="function"?WeakMap:Map;function u0(e,t,s){s=Gs(-1,s),s.tag=3,s.payload={element:null};var i=t.value;return s.callback=function(){Fo||(Fo=!0,Su=i),xu(e,t)},s}function d0(e,t,s){s=Gs(-1,s),s.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;s.payload=function(){return i(o)},s.callback=function(){xu(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){xu(e,t),typeof i!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),s}function Jf(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new p_;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(s)||(o.add(s),e=P_.bind(null,e,t,s),t.then(e,e))}function ep(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tp(e,t,s,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Gs(-1,1),t.tag=2,gn(s,t,1))),s.lanes|=1),e)}var m_=tn.ReactCurrentOwner,Zt=!1;function zt(e,t,s,i){t.child=e===null?Fx(t,null,s,i):Ir(t,e.child,s,i)}function sp(e,t,s,i,o){s=s.render;var l=t.ref;return Er(t,o),i=Pd(e,t,s,i,l,o),s=Ed(),e!==null&&!Zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,en(e,t,o)):(st&&s&&xd(t),t.flags|=1,zt(e,t,i,o),t.child)}function np(e,t,s,i,o){if(e===null){var l=s.type;return typeof l=="function"&&!Bd(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=l,h0(e,t,l,i,o)):(e=mo(s.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var u=l.memoizedProps;if(s=s.compare,s=s!==null?s:Fi,s(u,i)&&e.ref===t.ref)return en(e,t,o)}return t.flags|=1,e=bn(l,i),e.ref=t.ref,e.return=t,t.child=e}function h0(e,t,s,i,o){if(e!==null){var l=e.memoizedProps;if(Fi(l,i)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=i=l,(e.lanes&o)!==0)e.flags&131072&&(Zt=!0);else return t.lanes=e.lanes,en(e,t,o)}return gu(e,t,s,i,o)}function f0(e,t,s){var i=t.pendingProps,o=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(jr,Qt),Qt|=s;else{if(!(s&1073741824))return e=l!==null?l.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qe(jr,Qt),Qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:s,Qe(jr,Qt),Qt|=i}else l!==null?(i=l.baseLanes|s,t.memoizedState=null):i=s,Qe(jr,Qt),Qt|=i;return zt(e,t,o,s),t.child}function p0(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function gu(e,t,s,i,o){var l=qt(s)?Hn:Rt.current;return l=Ar(t,l),Er(t,o),s=Pd(e,t,s,i,l,o),i=Ed(),e!==null&&!Zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,en(e,t,o)):(st&&i&&xd(t),t.flags|=1,zt(e,t,s,o),t.child)}function rp(e,t,s,i,o){if(qt(s)){var l=!0;Lo(t)}else l=!1;if(Er(t,o),t.stateNode===null)ho(e,t),c0(t,s,i),mu(t,s,i,o),i=!0;else if(e===null){var u=t.stateNode,h=t.memoizedProps;u.props=h;var f=u.context,m=s.contextType;typeof m=="object"&&m!==null?m=ms(m):(m=qt(s)?Hn:Rt.current,m=Ar(t,m));var g=s.getDerivedStateFromProps,_=typeof g=="function"||typeof u.getSnapshotBeforeUpdate=="function";_||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==i||f!==m)&&Qf(t,u,i,m),on=!1;var y=t.memoizedState;u.state=y,Io(t,i,u,o),f=t.memoizedState,h!==i||y!==f||Ht.current||on?(typeof g=="function"&&(pu(t,s,g,i),f=t.memoizedState),(h=on||Xf(t,s,h,i,y,f,m))?(_||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=f),u.props=i,u.state=f,u.context=m,i=h):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,Ux(e,t),h=t.memoizedProps,m=t.type===t.elementType?h:_s(t.type,h),u.props=m,_=t.pendingProps,y=u.context,f=s.contextType,typeof f=="object"&&f!==null?f=ms(f):(f=qt(s)?Hn:Rt.current,f=Ar(t,f));var v=s.getDerivedStateFromProps;(g=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==_||y!==f)&&Qf(t,u,i,f),on=!1,y=t.memoizedState,u.state=y,Io(t,i,u,o);var k=t.memoizedState;h!==_||y!==k||Ht.current||on?(typeof v=="function"&&(pu(t,s,v,i),k=t.memoizedState),(m=on||Xf(t,s,m,i,y,k,f)||!1)?(g||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,k,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,k,f)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=k),u.props=i,u.state=k,u.context=f,i=m):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),i=!1)}return vu(e,t,s,i,l,o)}function vu(e,t,s,i,o,l){p0(e,t);var u=(t.flags&128)!==0;if(!i&&!u)return o&&Vf(t,s,!1),en(e,t,l);i=t.stateNode,m_.current=t;var h=u&&typeof s.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&u?(t.child=Ir(t,e.child,null,l),t.child=Ir(t,null,h,l)):zt(e,t,h,l),t.memoizedState=i.state,o&&Vf(t,s,!0),t.child}function m0(e){var t=e.stateNode;t.pendingContext?Uf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uf(e,t.context,!1),Nd(e,t.containerInfo)}function ip(e,t,s,i,o){return Rr(),vd(o),t.flags|=256,zt(e,t,s,i),t.child}var yu={dehydrated:null,treeContext:null,retryLane:0};function bu(e){return{baseLanes:e,cachePool:null,transitions:null}}function x0(e,t,s){var i=t.pendingProps,o=rt.current,l=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(o&2)!==0),h?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Qe(rt,o&1),e===null)return hu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=i.children,e=i.fallback,l?(i=t.mode,l=t.child,u={mode:"hidden",children:u},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=u):l=hl(u,i,0,null),e=Vn(e,i,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=bu(s),t.memoizedState=yu,e):Md(t,u));if(o=e.memoizedState,o!==null&&(h=o.dehydrated,h!==null))return x_(e,t,u,i,h,o,s);if(l){l=i.fallback,u=t.mode,o=e.child,h=o.sibling;var f={mode:"hidden",children:i.children};return!(u&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=f,t.deletions=null):(i=bn(o,f),i.subtreeFlags=o.subtreeFlags&14680064),h!==null?l=bn(h,l):(l=Vn(l,u,s,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,i=l,l=t.child,u=e.child.memoizedState,u=u===null?bu(s):{baseLanes:u.baseLanes|s,cachePool:null,transitions:u.transitions},l.memoizedState=u,l.childLanes=e.childLanes&~s,t.memoizedState=yu,i}return l=e.child,e=l.sibling,i=bn(l,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=s),i.return=t,i.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=i,t.memoizedState=null,i}function Md(e,t){return t=hl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Va(e,t,s,i){return i!==null&&vd(i),Ir(t,e.child,null,s),e=Md(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x_(e,t,s,i,o,l,u){if(s)return t.flags&256?(t.flags&=-257,i=wc(Error(ce(422))),Va(e,t,u,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=i.fallback,o=t.mode,i=hl({mode:"visible",children:i.children},o,0,null),l=Vn(l,o,u,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,t.mode&1&&Ir(t,e.child,null,u),t.child.memoizedState=bu(u),t.memoizedState=yu,l);if(!(t.mode&1))return Va(e,t,u,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var h=i.dgst;return i=h,l=Error(ce(419)),i=wc(l,i,void 0),Va(e,t,u,i)}if(h=(u&e.childLanes)!==0,Zt||h){if(i=Nt,i!==null){switch(u&-u){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|u)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Js(e,o),ks(i,e,o,-1))}return Dd(),i=wc(Error(ce(421))),Va(e,t,u,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=E_.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Jt=xn(o.nextSibling),ts=t,st=!0,js=null,e!==null&&(us[ds++]=qs,us[ds++]=Ws,us[ds++]=qn,qs=e.id,Ws=e.overflow,qn=t),t=Md(t,i.children),t.flags|=4096,t)}function ap(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),fu(e.return,t,s)}function jc(e,t,s,i,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=s,l.tailMode=o)}function g0(e,t,s){var i=t.pendingProps,o=i.revealOrder,l=i.tail;if(zt(e,t,i.children,s),i=rt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ap(e,s,t);else if(e.tag===19)ap(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Qe(rt,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(s=t.child,o=null;s!==null;)e=s.alternate,e!==null&&zo(e)===null&&(o=s),s=s.sibling;s=o,s===null?(o=t.child,t.child=null):(o=s.sibling,s.sibling=null),jc(t,!1,o,s,l);break;case"backwards":for(s=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&zo(e)===null){t.child=o;break}e=o.sibling,o.sibling=s,s=o,o=e}jc(t,!0,s,null,l);break;case"together":jc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ho(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function en(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Gn|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,s=bn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=bn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function g_(e,t,s){switch(t.tag){case 3:m0(t),Rr();break;case 5:Vx(t);break;case 1:qt(t.type)&&Lo(t);break;case 4:Nd(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;Qe(Ao,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Qe(rt,rt.current&1),t.flags|=128,null):s&t.child.childLanes?x0(e,t,s):(Qe(rt,rt.current&1),e=en(e,t,s),e!==null?e.sibling:null);Qe(rt,rt.current&1);break;case 19:if(i=(s&t.childLanes)!==0,e.flags&128){if(i)return g0(e,t,s);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Qe(rt,rt.current),i)break;return null;case 22:case 23:return t.lanes=0,f0(e,t,s)}return en(e,t,s)}var v0,_u,y0,b0;v0=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};_u=function(){};y0=function(e,t,s,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,Fn(Ds.current);var l=null;switch(s){case"input":o=Vc(e,o),i=Vc(e,i),l=[];break;case"select":o=at({},o,{value:void 0}),i=at({},i,{value:void 0}),l=[];break;case"textarea":o=qc(e,o),i=qc(e,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Po)}Gc(s,i);var u;s=null;for(m in o)if(!i.hasOwnProperty(m)&&o.hasOwnProperty(m)&&o[m]!=null)if(m==="style"){var h=o[m];for(u in h)h.hasOwnProperty(u)&&(s||(s={}),s[u]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Ai.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in i){var f=i[m];if(h=o!=null?o[m]:void 0,i.hasOwnProperty(m)&&f!==h&&(f!=null||h!=null))if(m==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(s||(s={}),s[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(s||(s={}),s[u]=f[u])}else s||(l||(l=[]),l.push(m,s)),s=f;else m==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(l=l||[]).push(m,f)):m==="children"?typeof f!="string"&&typeof f!="number"||(l=l||[]).push(m,""+f):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(m)?(f!=null&&m==="onScroll"&&Je("scroll",e),l||h===f||(l=[])):(l=l||[]).push(m,f))}s&&(l=l||[]).push("style",s);var m=l;(t.updateQueue=m)&&(t.flags|=4)}};b0=function(e,t,s,i){s!==i&&(t.flags|=4)};function fi(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var o=e.child;o!==null;)s|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)s|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function v_(e,t,s){var i=t.pendingProps;switch(gd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(t),null;case 1:return qt(t.type)&&Eo(),Tt(t),null;case 3:return i=t.stateNode,zr(),et(Ht),et(Rt),Sd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&($a(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,js!==null&&(Eu(js),js=null))),_u(e,t),Tt(t),null;case 5:kd(t);var o=Fn(Hi.current);if(s=t.type,e!==null&&t.stateNode!=null)y0(e,t,s,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(ce(166));return Tt(t),null}if(e=Fn(Ds.current),$a(t)){i=t.stateNode,s=t.type;var l=t.memoizedProps;switch(i[Is]=t,i[Vi]=l,e=(t.mode&1)!==0,s){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(o=0;o<_i.length;o++)Je(_i[o],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":mf(i,l),Je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Je("invalid",i);break;case"textarea":gf(i,l),Je("invalid",i)}Gc(s,l),o=null;for(var u in l)if(l.hasOwnProperty(u)){var h=l[u];u==="children"?typeof h=="string"?i.textContent!==h&&(l.suppressHydrationWarning!==!0&&Fa(i.textContent,h,e),o=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(l.suppressHydrationWarning!==!0&&Fa(i.textContent,h,e),o=["children",""+h]):Ai.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Je("scroll",i)}switch(s){case"input":Ma(i),xf(i,l,!0);break;case"textarea":Ma(i),vf(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=Po)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{u=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Gm(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=u.createElement(s,{is:i.is}):(e=u.createElement(s),s==="select"&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,s),e[Is]=t,e[Vi]=i,v0(e,t,!1,!1),t.stateNode=e;e:{switch(u=Kc(s,i),s){case"dialog":Je("cancel",e),Je("close",e),o=i;break;case"iframe":case"object":case"embed":Je("load",e),o=i;break;case"video":case"audio":for(o=0;o<_i.length;o++)Je(_i[o],e);o=i;break;case"source":Je("error",e),o=i;break;case"img":case"image":case"link":Je("error",e),Je("load",e),o=i;break;case"details":Je("toggle",e),o=i;break;case"input":mf(e,i),o=Vc(e,i),Je("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=at({},i,{value:void 0}),Je("invalid",e);break;case"textarea":gf(e,i),o=qc(e,i),Je("invalid",e);break;default:o=i}Gc(s,o),h=o;for(l in h)if(h.hasOwnProperty(l)){var f=h[l];l==="style"?Xm(e,f):l==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Km(e,f)):l==="children"?typeof f=="string"?(s!=="textarea"||f!=="")&&Ri(e,f):typeof f=="number"&&Ri(e,""+f):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ai.hasOwnProperty(l)?f!=null&&l==="onScroll"&&Je("scroll",e):f!=null&&sd(e,l,f,u))}switch(s){case"input":Ma(e),xf(e,i,!1);break;case"textarea":Ma(e),vf(e);break;case"option":i.value!=null&&e.setAttribute("value",""+wn(i.value));break;case"select":e.multiple=!!i.multiple,l=i.value,l!=null?kr(e,!!i.multiple,l,!1):i.defaultValue!=null&&kr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Po)}switch(s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Tt(t),null;case 6:if(e&&t.stateNode!=null)b0(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ce(166));if(s=Fn(Hi.current),Fn(Ds.current),$a(t)){if(i=t.stateNode,s=t.memoizedProps,i[Is]=t,(l=i.nodeValue!==s)&&(e=ts,e!==null))switch(e.tag){case 3:Fa(i.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fa(i.nodeValue,s,(e.mode&1)!==0)}l&&(t.flags|=4)}else i=(s.nodeType===9?s:s.ownerDocument).createTextNode(i),i[Is]=t,t.stateNode=i}return Tt(t),null;case 13:if(et(rt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(st&&Jt!==null&&t.mode&1&&!(t.flags&128))Dx(),Rr(),t.flags|=98560,l=!1;else if(l=$a(t),i!==null&&i.dehydrated!==null){if(e===null){if(!l)throw Error(ce(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ce(317));l[Is]=t}else Rr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Tt(t),l=!1}else js!==null&&(Eu(js),js=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||rt.current&1?yt===0&&(yt=3):Dd())),t.updateQueue!==null&&(t.flags|=4),Tt(t),null);case 4:return zr(),_u(e,t),e===null&&$i(t.stateNode.containerInfo),Tt(t),null;case 10:return _d(t.type._context),Tt(t),null;case 17:return qt(t.type)&&Eo(),Tt(t),null;case 19:if(et(rt),l=t.memoizedState,l===null)return Tt(t),null;if(i=(t.flags&128)!==0,u=l.rendering,u===null)if(i)fi(l,!1);else{if(yt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=zo(e),u!==null){for(t.flags|=128,fi(l,!1),i=u.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=s,s=t.child;s!==null;)l=s,e=i,l.flags&=14680066,u=l.alternate,u===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=u.childLanes,l.lanes=u.lanes,l.child=u.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=u.memoizedProps,l.memoizedState=u.memoizedState,l.updateQueue=u.updateQueue,l.type=u.type,e=u.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Qe(rt,rt.current&1|2),t.child}e=e.sibling}l.tail!==null&&dt()>Dr&&(t.flags|=128,i=!0,fi(l,!1),t.lanes=4194304)}else{if(!i)if(e=zo(u),e!==null){if(t.flags|=128,i=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),fi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!st)return Tt(t),null}else 2*dt()-l.renderingStartTime>Dr&&s!==1073741824&&(t.flags|=128,i=!0,fi(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(s=l.last,s!==null?s.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=dt(),t.sibling=null,s=rt.current,Qe(rt,i?s&1|2:s&1),t):(Tt(t),null);case 22:case 23:return Od(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Qt&1073741824&&(Tt(t),t.subtreeFlags&6&&(t.flags|=8192)):Tt(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function y_(e,t){switch(gd(t),t.tag){case 1:return qt(t.type)&&Eo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zr(),et(Ht),et(Rt),Sd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kd(t),null;case 13:if(et(rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));Rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(rt),null;case 4:return zr(),null;case 10:return _d(t.type._context),null;case 22:case 23:return Od(),null;case 24:return null;default:return null}}var Za=!1,Mt=!1,b_=typeof WeakSet=="function"?WeakSet:Set,ye=null;function wr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(i){lt(e,t,i)}else s.current=null}function wu(e,t,s){try{s()}catch(i){lt(e,t,i)}}var op=!1;function __(e,t){if(iu=ko,e=kx(),md(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var u=0,h=-1,f=-1,m=0,g=0,_=e,y=null;t:for(;;){for(var v;_!==s||o!==0&&_.nodeType!==3||(h=u+o),_!==l||i!==0&&_.nodeType!==3||(f=u+i),_.nodeType===3&&(u+=_.nodeValue.length),(v=_.firstChild)!==null;)y=_,_=v;for(;;){if(_===e)break t;if(y===s&&++m===o&&(h=u),y===l&&++g===i&&(f=u),(v=_.nextSibling)!==null)break;_=y,y=_.parentNode}_=v}s=h===-1||f===-1?null:{start:h,end:f}}else s=null}s=s||{start:0,end:0}}else s=null;for(au={focusedElem:e,selectionRange:s},ko=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,S=k.memoizedState,j=t.stateNode,w=j.getSnapshotBeforeUpdate(t.elementType===t.type?C:_s(t.type,C),S);j.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(O){lt(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return k=op,op=!1,k}function Pi(e,t,s){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&wu(t,s,l)}o=o.next}while(o!==i)}}function ul(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var i=s.create;s.destroy=i()}s=s.next}while(s!==t)}}function ju(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function _0(e){var t=e.alternate;t!==null&&(e.alternate=null,_0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Is],delete t[Vi],delete t[cu],delete t[n_],delete t[r_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function w0(e){return e.tag===5||e.tag===3||e.tag===4}function lp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||w0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nu(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Po));else if(i!==4&&(e=e.child,e!==null))for(Nu(e,t,s),e=e.sibling;e!==null;)Nu(e,t,s),e=e.sibling}function ku(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(ku(e,t,s),e=e.sibling;e!==null;)ku(e,t,s),e=e.sibling}var Ct=null,ws=!1;function rn(e,t,s){for(s=s.child;s!==null;)j0(e,t,s),s=s.sibling}function j0(e,t,s){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(sl,s)}catch{}switch(s.tag){case 5:Mt||wr(s,t);case 6:var i=Ct,o=ws;Ct=null,rn(e,t,s),Ct=i,ws=o,Ct!==null&&(ws?(e=Ct,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ct.removeChild(s.stateNode));break;case 18:Ct!==null&&(ws?(e=Ct,s=s.stateNode,e.nodeType===8?xc(e.parentNode,s):e.nodeType===1&&xc(e,s),Di(e)):xc(Ct,s.stateNode));break;case 4:i=Ct,o=ws,Ct=s.stateNode.containerInfo,ws=!0,rn(e,t,s),Ct=i,ws=o;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,u=l.destroy;l=l.tag,u!==void 0&&(l&2||l&4)&&wu(s,t,u),o=o.next}while(o!==i)}rn(e,t,s);break;case 1:if(!Mt&&(wr(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(h){lt(s,t,h)}rn(e,t,s);break;case 21:rn(e,t,s);break;case 22:s.mode&1?(Mt=(i=Mt)||s.memoizedState!==null,rn(e,t,s),Mt=i):rn(e,t,s);break;default:rn(e,t,s)}}function cp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new b_),t.forEach(function(i){var o=L_.bind(null,e,i);s.has(i)||(s.add(i),i.then(o,o))})}}function bs(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var o=s[i];try{var l=e,u=t,h=u;e:for(;h!==null;){switch(h.tag){case 5:Ct=h.stateNode,ws=!1;break e;case 3:Ct=h.stateNode.containerInfo,ws=!0;break e;case 4:Ct=h.stateNode.containerInfo,ws=!0;break e}h=h.return}if(Ct===null)throw Error(ce(160));j0(l,u,o),Ct=null,ws=!1;var f=o.alternate;f!==null&&(f.return=null),o.return=null}catch(m){lt(o,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)N0(t,e),t=t.sibling}function N0(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bs(t,e),Ms(e),i&4){try{Pi(3,e,e.return),ul(3,e)}catch(C){lt(e,e.return,C)}try{Pi(5,e,e.return)}catch(C){lt(e,e.return,C)}}break;case 1:bs(t,e),Ms(e),i&512&&s!==null&&wr(s,s.return);break;case 5:if(bs(t,e),Ms(e),i&512&&s!==null&&wr(s,s.return),e.flags&32){var o=e.stateNode;try{Ri(o,"")}catch(C){lt(e,e.return,C)}}if(i&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,u=s!==null?s.memoizedProps:l,h=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{h==="input"&&l.type==="radio"&&l.name!=null&&qm(o,l),Kc(h,u);var m=Kc(h,l);for(u=0;u<f.length;u+=2){var g=f[u],_=f[u+1];g==="style"?Xm(o,_):g==="dangerouslySetInnerHTML"?Km(o,_):g==="children"?Ri(o,_):sd(o,g,_,m)}switch(h){case"input":Zc(o,l);break;case"textarea":Wm(o,l);break;case"select":var y=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?kr(o,!!l.multiple,v,!1):y!==!!l.multiple&&(l.defaultValue!=null?kr(o,!!l.multiple,l.defaultValue,!0):kr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Vi]=l}catch(C){lt(e,e.return,C)}}break;case 6:if(bs(t,e),Ms(e),i&4){if(e.stateNode===null)throw Error(ce(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(C){lt(e,e.return,C)}}break;case 3:if(bs(t,e),Ms(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{Di(t.containerInfo)}catch(C){lt(e,e.return,C)}break;case 4:bs(t,e),Ms(e);break;case 13:bs(t,e),Ms(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Id=dt())),i&4&&cp(e);break;case 22:if(g=s!==null&&s.memoizedState!==null,e.mode&1?(Mt=(m=Mt)||g,bs(t,e),Mt=m):bs(t,e),Ms(e),i&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!g&&e.mode&1)for(ye=e,g=e.child;g!==null;){for(_=ye=g;ye!==null;){switch(y=ye,v=y.child,y.tag){case 0:case 11:case 14:case 15:Pi(4,y,y.return);break;case 1:wr(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){i=y,s=y.return;try{t=i,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(C){lt(i,s,C)}}break;case 5:wr(y,y.return);break;case 22:if(y.memoizedState!==null){dp(_);continue}}v!==null?(v.return=y,ye=v):dp(_)}g=g.sibling}e:for(g=null,_=e;;){if(_.tag===5){if(g===null){g=_;try{o=_.stateNode,m?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(h=_.stateNode,f=_.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=Ym("display",u))}catch(C){lt(e,e.return,C)}}}else if(_.tag===6){if(g===null)try{_.stateNode.nodeValue=m?"":_.memoizedProps}catch(C){lt(e,e.return,C)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;g===_&&(g=null),_=_.return}g===_&&(g=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:bs(t,e),Ms(e),i&4&&cp(e);break;case 21:break;default:bs(t,e),Ms(e)}}function Ms(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(w0(s)){var i=s;break e}s=s.return}throw Error(ce(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Ri(o,""),i.flags&=-33);var l=lp(e);ku(e,l,o);break;case 3:case 4:var u=i.stateNode.containerInfo,h=lp(e);Nu(e,h,u);break;default:throw Error(ce(161))}}catch(f){lt(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function w_(e,t,s){ye=e,k0(e)}function k0(e,t,s){for(var i=(e.mode&1)!==0;ye!==null;){var o=ye,l=o.child;if(o.tag===22&&i){var u=o.memoizedState!==null||Za;if(!u){var h=o.alternate,f=h!==null&&h.memoizedState!==null||Mt;h=Za;var m=Mt;if(Za=u,(Mt=f)&&!m)for(ye=o;ye!==null;)u=ye,f=u.child,u.tag===22&&u.memoizedState!==null?hp(o):f!==null?(f.return=u,ye=f):hp(o);for(;l!==null;)ye=l,k0(l),l=l.sibling;ye=o,Za=h,Mt=m}up(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,ye=l):up(e)}}function up(e){for(;ye!==null;){var t=ye;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mt||ul(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Mt)if(s===null)i.componentDidMount();else{var o=t.elementType===t.type?s.memoizedProps:_s(t.type,s.memoizedProps);i.componentDidUpdate(o,s.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Gf(t,l,i);break;case 3:var u=t.updateQueue;if(u!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Gf(t,u,s)}break;case 5:var h=t.stateNode;if(s===null&&t.flags&4){s=h;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&s.focus();break;case"img":f.src&&(s.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var _=g.dehydrated;_!==null&&Di(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Mt||t.flags&512&&ju(t)}catch(y){lt(t,t.return,y)}}if(t===e){ye=null;break}if(s=t.sibling,s!==null){s.return=t.return,ye=s;break}ye=t.return}}function dp(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ye=s;break}ye=t.return}}function hp(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{ul(4,t)}catch(f){lt(t,s,f)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(f){lt(t,o,f)}}var l=t.return;try{ju(t)}catch(f){lt(t,l,f)}break;case 5:var u=t.return;try{ju(t)}catch(f){lt(t,u,f)}}}catch(f){lt(t,t.return,f)}if(t===e){ye=null;break}var h=t.sibling;if(h!==null){h.return=t.return,ye=h;break}ye=t.return}}var j_=Math.ceil,Bo=tn.ReactCurrentDispatcher,Ad=tn.ReactCurrentOwner,fs=tn.ReactCurrentBatchConfig,qe=0,Nt=null,xt=null,Pt=0,Qt=0,jr=kn(0),yt=0,Ki=null,Gn=0,dl=0,Rd=0,Ei=null,Vt=null,Id=0,Dr=1/0,Zs=null,Fo=!1,Su=null,vn=null,Ha=!1,dn=null,$o=0,Li=0,Cu=null,fo=-1,po=0;function Ot(){return qe&6?dt():fo!==-1?fo:fo=dt()}function yn(e){return e.mode&1?qe&2&&Pt!==0?Pt&-Pt:a_.transition!==null?(po===0&&(po=cx()),po):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:xx(e.type)),e):1}function ks(e,t,s,i){if(50<Li)throw Li=0,Cu=null,Error(ce(185));ta(e,s,i),(!(qe&2)||e!==Nt)&&(e===Nt&&(!(qe&2)&&(dl|=s),yt===4&&cn(e,Pt)),Wt(e,i),s===1&&qe===0&&!(t.mode&1)&&(Dr=dt()+500,ol&&Sn()))}function Wt(e,t){var s=e.callbackNode;ab(e,t);var i=No(e,e===Nt?Pt:0);if(i===0)s!==null&&_f(s),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(s!=null&&_f(s),t===1)e.tag===0?i_(fp.bind(null,e)):Ix(fp.bind(null,e)),t_(function(){!(qe&6)&&Sn()}),s=null;else{switch(ux(i)){case 1:s=od;break;case 4:s=ox;break;case 16:s=jo;break;case 536870912:s=lx;break;default:s=jo}s=A0(s,S0.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function S0(e,t){if(fo=-1,po=0,qe&6)throw Error(ce(327));var s=e.callbackNode;if(Lr()&&e.callbackNode!==s)return null;var i=No(e,e===Nt?Pt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Uo(e,i);else{t=i;var o=qe;qe|=2;var l=P0();(Nt!==e||Pt!==t)&&(Zs=null,Dr=dt()+500,Un(e,t));do try{S_();break}catch(h){C0(e,h)}while(!0);bd(),Bo.current=l,qe=o,xt!==null?t=0:(Nt=null,Pt=0,t=yt)}if(t!==0){if(t===2&&(o=eu(e),o!==0&&(i=o,t=Pu(e,o))),t===1)throw s=Ki,Un(e,0),cn(e,i),Wt(e,dt()),s;if(t===6)cn(e,i);else{if(o=e.current.alternate,!(i&30)&&!N_(o)&&(t=Uo(e,i),t===2&&(l=eu(e),l!==0&&(i=l,t=Pu(e,l))),t===1))throw s=Ki,Un(e,0),cn(e,i),Wt(e,dt()),s;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(ce(345));case 2:On(e,Vt,Zs);break;case 3:if(cn(e,i),(i&130023424)===i&&(t=Id+500-dt(),10<t)){if(No(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){Ot(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=lu(On.bind(null,e,Vt,Zs),t);break}On(e,Vt,Zs);break;case 4:if(cn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var u=31-Ns(i);l=1<<u,u=t[u],u>o&&(o=u),i&=~l}if(i=o,i=dt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*j_(i/1960))-i,10<i){e.timeoutHandle=lu(On.bind(null,e,Vt,Zs),i);break}On(e,Vt,Zs);break;case 5:On(e,Vt,Zs);break;default:throw Error(ce(329))}}}return Wt(e,dt()),e.callbackNode===s?S0.bind(null,e):null}function Pu(e,t){var s=Ei;return e.current.memoizedState.isDehydrated&&(Un(e,t).flags|=256),e=Uo(e,t),e!==2&&(t=Vt,Vt=s,t!==null&&Eu(t)),e}function Eu(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function N_(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var i=0;i<s.length;i++){var o=s[i],l=o.getSnapshot;o=o.value;try{if(!Ss(l(),o))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cn(e,t){for(t&=~Rd,t&=~dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Ns(t),i=1<<s;e[s]=-1,t&=~i}}function fp(e){if(qe&6)throw Error(ce(327));Lr();var t=No(e,0);if(!(t&1))return Wt(e,dt()),null;var s=Uo(e,t);if(e.tag!==0&&s===2){var i=eu(e);i!==0&&(t=i,s=Pu(e,i))}if(s===1)throw s=Ki,Un(e,0),cn(e,t),Wt(e,dt()),s;if(s===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,On(e,Vt,Zs),Wt(e,dt()),null}function zd(e,t){var s=qe;qe|=1;try{return e(t)}finally{qe=s,qe===0&&(Dr=dt()+500,ol&&Sn())}}function Kn(e){dn!==null&&dn.tag===0&&!(qe&6)&&Lr();var t=qe;qe|=1;var s=fs.transition,i=Ke;try{if(fs.transition=null,Ke=1,e)return e()}finally{Ke=i,fs.transition=s,qe=t,!(qe&6)&&Sn()}}function Od(){Qt=jr.current,et(jr)}function Un(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,e_(s)),xt!==null)for(s=xt.return;s!==null;){var i=s;switch(gd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Eo();break;case 3:zr(),et(Ht),et(Rt),Sd();break;case 5:kd(i);break;case 4:zr();break;case 13:et(rt);break;case 19:et(rt);break;case 10:_d(i.type._context);break;case 22:case 23:Od()}s=s.return}if(Nt=e,xt=e=bn(e.current,null),Pt=Qt=t,yt=0,Ki=null,Rd=dl=Gn=0,Vt=Ei=null,Bn!==null){for(t=0;t<Bn.length;t++)if(s=Bn[t],i=s.interleaved,i!==null){s.interleaved=null;var o=i.next,l=s.pending;if(l!==null){var u=l.next;l.next=o,i.next=u}s.pending=i}Bn=null}return e}function C0(e,t){do{var s=xt;try{if(bd(),co.current=Do,Oo){for(var i=it.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Oo=!1}if(Wn=0,jt=vt=it=null,Ci=!1,qi=0,Ad.current=null,s===null||s.return===null){yt=1,Ki=t,xt=null;break}e:{var l=e,u=s.return,h=s,f=t;if(t=Pt,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var m=f,g=h,_=g.tag;if(!(g.mode&1)&&(_===0||_===11||_===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var v=ep(u);if(v!==null){v.flags&=-257,tp(v,u,h,l,t),v.mode&1&&Jf(l,m,t),t=v,f=m;var k=t.updateQueue;if(k===null){var C=new Set;C.add(f),t.updateQueue=C}else k.add(f);break e}else{if(!(t&1)){Jf(l,m,t),Dd();break e}f=Error(ce(426))}}else if(st&&h.mode&1){var S=ep(u);if(S!==null){!(S.flags&65536)&&(S.flags|=256),tp(S,u,h,l,t),vd(Or(f,h));break e}}l=f=Or(f,h),yt!==4&&(yt=2),Ei===null?Ei=[l]:Ei.push(l),l=u;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var j=u0(l,f,t);Wf(l,j);break e;case 1:h=f;var w=l.type,N=l.stateNode;if(!(l.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(vn===null||!vn.has(N)))){l.flags|=65536,t&=-t,l.lanes|=t;var O=d0(l,h,t);Wf(l,O);break e}}l=l.return}while(l!==null)}L0(s)}catch(A){t=A,xt===s&&s!==null&&(xt=s=s.return);continue}break}while(!0)}function P0(){var e=Bo.current;return Bo.current=Do,e===null?Do:e}function Dd(){(yt===0||yt===3||yt===2)&&(yt=4),Nt===null||!(Gn&268435455)&&!(dl&268435455)||cn(Nt,Pt)}function Uo(e,t){var s=qe;qe|=2;var i=P0();(Nt!==e||Pt!==t)&&(Zs=null,Un(e,t));do try{k_();break}catch(o){C0(e,o)}while(!0);if(bd(),qe=s,Bo.current=i,xt!==null)throw Error(ce(261));return Nt=null,Pt=0,yt}function k_(){for(;xt!==null;)E0(xt)}function S_(){for(;xt!==null&&!Xy();)E0(xt)}function E0(e){var t=M0(e.alternate,e,Qt);e.memoizedProps=e.pendingProps,t===null?L0(e):xt=t,Ad.current=null}function L0(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=y_(s,t),s!==null){s.flags&=32767,xt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yt=6,xt=null;return}}else if(s=v_(s,t,Qt),s!==null){xt=s;return}if(t=t.sibling,t!==null){xt=t;return}xt=t=e}while(t!==null);yt===0&&(yt=5)}function On(e,t,s){var i=Ke,o=fs.transition;try{fs.transition=null,Ke=1,C_(e,t,s,i)}finally{fs.transition=o,Ke=i}return null}function C_(e,t,s,i){do Lr();while(dn!==null);if(qe&6)throw Error(ce(327));s=e.finishedWork;var o=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(ob(e,l),e===Nt&&(xt=Nt=null,Pt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ha||(Ha=!0,A0(jo,function(){return Lr(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=fs.transition,fs.transition=null;var u=Ke;Ke=1;var h=qe;qe|=4,Ad.current=null,__(e,s),N0(s,e),Wb(au),ko=!!iu,au=iu=null,e.current=s,w_(s),Qy(),qe=h,Ke=u,fs.transition=l}else e.current=s;if(Ha&&(Ha=!1,dn=e,$o=o),l=e.pendingLanes,l===0&&(vn=null),tb(s.stateNode),Wt(e,dt()),t!==null)for(i=e.onRecoverableError,s=0;s<t.length;s++)o=t[s],i(o.value,{componentStack:o.stack,digest:o.digest});if(Fo)throw Fo=!1,e=Su,Su=null,e;return $o&1&&e.tag!==0&&Lr(),l=e.pendingLanes,l&1?e===Cu?Li++:(Li=0,Cu=e):Li=0,Sn(),null}function Lr(){if(dn!==null){var e=ux($o),t=fs.transition,s=Ke;try{if(fs.transition=null,Ke=16>e?16:e,dn===null)var i=!1;else{if(e=dn,dn=null,$o=0,qe&6)throw Error(ce(331));var o=qe;for(qe|=4,ye=e.current;ye!==null;){var l=ye,u=l.child;if(ye.flags&16){var h=l.deletions;if(h!==null){for(var f=0;f<h.length;f++){var m=h[f];for(ye=m;ye!==null;){var g=ye;switch(g.tag){case 0:case 11:case 15:Pi(8,g,l)}var _=g.child;if(_!==null)_.return=g,ye=_;else for(;ye!==null;){g=ye;var y=g.sibling,v=g.return;if(_0(g),g===m){ye=null;break}if(y!==null){y.return=v,ye=y;break}ye=v}}}var k=l.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var S=C.sibling;C.sibling=null,C=S}while(C!==null)}}ye=l}}if(l.subtreeFlags&2064&&u!==null)u.return=l,ye=u;else e:for(;ye!==null;){if(l=ye,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Pi(9,l,l.return)}var j=l.sibling;if(j!==null){j.return=l.return,ye=j;break e}ye=l.return}}var w=e.current;for(ye=w;ye!==null;){u=ye;var N=u.child;if(u.subtreeFlags&2064&&N!==null)N.return=u,ye=N;else e:for(u=w;ye!==null;){if(h=ye,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:ul(9,h)}}catch(A){lt(h,h.return,A)}if(h===u){ye=null;break e}var O=h.sibling;if(O!==null){O.return=h.return,ye=O;break e}ye=h.return}}if(qe=o,Sn(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(sl,e)}catch{}i=!0}return i}finally{Ke=s,fs.transition=t}}return!1}function pp(e,t,s){t=Or(s,t),t=u0(e,t,1),e=gn(e,t,1),t=Ot(),e!==null&&(ta(e,1,t),Wt(e,t))}function lt(e,t,s){if(e.tag===3)pp(e,e,s);else for(;t!==null;){if(t.tag===3){pp(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vn===null||!vn.has(i))){e=Or(s,e),e=d0(t,e,1),t=gn(t,e,1),e=Ot(),t!==null&&(ta(t,1,e),Wt(t,e));break}}t=t.return}}function P_(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&s,Nt===e&&(Pt&s)===s&&(yt===4||yt===3&&(Pt&130023424)===Pt&&500>dt()-Id?Un(e,0):Rd|=s),Wt(e,t)}function T0(e,t){t===0&&(e.mode&1?(t=Ia,Ia<<=1,!(Ia&130023424)&&(Ia=4194304)):t=1);var s=Ot();e=Js(e,t),e!==null&&(ta(e,t,s),Wt(e,s))}function E_(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),T0(e,s)}function L_(e,t){var s=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(s=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ce(314))}i!==null&&i.delete(t),T0(e,s)}var M0;M0=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Zt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Zt=!1,g_(e,t,s);Zt=!!(e.flags&131072)}else Zt=!1,st&&t.flags&1048576&&zx(t,Mo,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ho(e,t),e=t.pendingProps;var o=Ar(t,Rt.current);Er(t,s),o=Pd(null,t,i,e,o,s);var l=Ed();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(i)?(l=!0,Lo(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,jd(t),o.updater=cl,t.stateNode=o,o._reactInternals=t,mu(t,i,e,s),t=vu(null,t,i,!0,l,s)):(t.tag=0,st&&l&&xd(t),zt(null,t,o,s),t=t.child),t;case 16:i=t.elementType;e:{switch(ho(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=M_(i),e=_s(i,e),o){case 0:t=gu(null,t,i,e,s);break e;case 1:t=rp(null,t,i,e,s);break e;case 11:t=sp(null,t,i,e,s);break e;case 14:t=np(null,t,i,_s(i.type,e),s);break e}throw Error(ce(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:_s(i,o),gu(e,t,i,o,s);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:_s(i,o),rp(e,t,i,o,s);case 3:e:{if(m0(t),e===null)throw Error(ce(387));i=t.pendingProps,l=t.memoizedState,o=l.element,Ux(e,t),Io(t,i,null,s);var u=t.memoizedState;if(i=u.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Or(Error(ce(423)),t),t=ip(e,t,i,s,o);break e}else if(i!==o){o=Or(Error(ce(424)),t),t=ip(e,t,i,s,o);break e}else for(Jt=xn(t.stateNode.containerInfo.firstChild),ts=t,st=!0,js=null,s=Fx(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Rr(),i===o){t=en(e,t,s);break e}zt(e,t,i,s)}t=t.child}return t;case 5:return Vx(t),e===null&&hu(t),i=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,u=o.children,ou(i,o)?u=null:l!==null&&ou(i,l)&&(t.flags|=32),p0(e,t),zt(e,t,u,s),t.child;case 6:return e===null&&hu(t),null;case 13:return x0(e,t,s);case 4:return Nd(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ir(t,null,i,s):zt(e,t,i,s),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:_s(i,o),sp(e,t,i,o,s);case 7:return zt(e,t,t.pendingProps,s),t.child;case 8:return zt(e,t,t.pendingProps.children,s),t.child;case 12:return zt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,l=t.memoizedProps,u=o.value,Qe(Ao,i._currentValue),i._currentValue=u,l!==null)if(Ss(l.value,u)){if(l.children===o.children&&!Ht.current){t=en(e,t,s);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var h=l.dependencies;if(h!==null){u=l.child;for(var f=h.firstContext;f!==null;){if(f.context===i){if(l.tag===1){f=Gs(-1,s&-s),f.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?f.next=f:(f.next=g.next,g.next=f),m.pending=f}}l.lanes|=s,f=l.alternate,f!==null&&(f.lanes|=s),fu(l.return,s,t),h.lanes|=s;break}f=f.next}}else if(l.tag===10)u=l.type===t.type?null:l.child;else if(l.tag===18){if(u=l.return,u===null)throw Error(ce(341));u.lanes|=s,h=u.alternate,h!==null&&(h.lanes|=s),fu(u,s,t),u=l.sibling}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===t){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}zt(e,t,o.children,s),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,Er(t,s),o=ms(o),i=i(o),t.flags|=1,zt(e,t,i,s),t.child;case 14:return i=t.type,o=_s(i,t.pendingProps),o=_s(i.type,o),np(e,t,i,o,s);case 15:return h0(e,t,t.type,t.pendingProps,s);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:_s(i,o),ho(e,t),t.tag=1,qt(i)?(e=!0,Lo(t)):e=!1,Er(t,s),c0(t,i,o),mu(t,i,o,s),vu(null,t,i,!0,e,s);case 19:return g0(e,t,s);case 22:return f0(e,t,s)}throw Error(ce(156,t.tag))};function A0(e,t){return ax(e,t)}function T_(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(e,t,s,i){return new T_(e,t,s,i)}function Bd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function M_(e){if(typeof e=="function")return Bd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rd)return 11;if(e===id)return 14}return 2}function bn(e,t){var s=e.alternate;return s===null?(s=hs(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function mo(e,t,s,i,o,l){var u=2;if(i=e,typeof e=="function")Bd(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case fr:return Vn(s.children,o,l,t);case nd:u=8,o|=8;break;case Bc:return e=hs(12,s,t,o|2),e.elementType=Bc,e.lanes=l,e;case Fc:return e=hs(13,s,t,o),e.elementType=Fc,e.lanes=l,e;case $c:return e=hs(19,s,t,o),e.elementType=$c,e.lanes=l,e;case Vm:return hl(s,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $m:u=10;break e;case Um:u=9;break e;case rd:u=11;break e;case id:u=14;break e;case an:u=16,i=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=hs(u,s,t,o),t.elementType=e,t.type=i,t.lanes=l,t}function Vn(e,t,s,i){return e=hs(7,e,i,t),e.lanes=s,e}function hl(e,t,s,i){return e=hs(22,e,i,t),e.elementType=Vm,e.lanes=s,e.stateNode={isHidden:!1},e}function Nc(e,t,s){return e=hs(6,e,null,t),e.lanes=s,e}function kc(e,t,s){return t=hs(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function A_(e,t,s,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ic(0),this.expirationTimes=ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Fd(e,t,s,i,o,l,u,h,f){return e=new A_(e,t,s,h,f),t===1?(t=1,l===!0&&(t|=8)):t=0,l=hs(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},jd(l),e}function R_(e,t,s){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hr,key:i==null?null:""+i,children:e,containerInfo:t,implementation:s}}function R0(e){if(!e)return jn;e=e._reactInternals;e:{if(Jn(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var s=e.type;if(qt(s))return Rx(e,s,t)}return t}function I0(e,t,s,i,o,l,u,h,f){return e=Fd(s,i,!0,e,o,l,u,h,f),e.context=R0(null),s=e.current,i=Ot(),o=yn(s),l=Gs(i,o),l.callback=t??null,gn(s,l,o),e.current.lanes=o,ta(e,o,i),Wt(e,i),e}function fl(e,t,s,i){var o=t.current,l=Ot(),u=yn(o);return s=R0(s),t.context===null?t.context=s:t.pendingContext=s,t=Gs(l,u),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=gn(o,t,u),e!==null&&(ks(e,o,u,l),lo(e,o,u)),u}function Vo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function $d(e,t){mp(e,t),(e=e.alternate)&&mp(e,t)}function I_(){return null}var z0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ud(e){this._internalRoot=e}pl.prototype.render=Ud.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));fl(e,t,null,null)};pl.prototype.unmount=Ud.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kn(function(){fl(null,e,null,null)}),t[Qs]=null}};function pl(e){this._internalRoot=e}pl.prototype.unstable_scheduleHydration=function(e){if(e){var t=fx();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ln.length&&t!==0&&t<ln[s].priority;s++);ln.splice(s,0,e),s===0&&mx(e)}};function Vd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ml(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xp(){}function z_(e,t,s,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var m=Vo(u);l.call(m)}}var u=I0(t,i,e,0,null,!1,!1,"",xp);return e._reactRootContainer=u,e[Qs]=u.current,$i(e.nodeType===8?e.parentNode:e),Kn(),u}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var h=i;i=function(){var m=Vo(f);h.call(m)}}var f=Fd(e,0,!1,null,null,!1,!1,"",xp);return e._reactRootContainer=f,e[Qs]=f.current,$i(e.nodeType===8?e.parentNode:e),Kn(function(){fl(t,f,s,i)}),f}function xl(e,t,s,i,o){var l=s._reactRootContainer;if(l){var u=l;if(typeof o=="function"){var h=o;o=function(){var f=Vo(u);h.call(f)}}fl(t,u,e,o)}else u=z_(s,t,e,o,i);return Vo(u)}dx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=bi(t.pendingLanes);s!==0&&(ld(t,s|1),Wt(t,dt()),!(qe&6)&&(Dr=dt()+500,Sn()))}break;case 13:Kn(function(){var i=Js(e,1);if(i!==null){var o=Ot();ks(i,e,1,o)}}),$d(e,1)}};cd=function(e){if(e.tag===13){var t=Js(e,134217728);if(t!==null){var s=Ot();ks(t,e,134217728,s)}$d(e,134217728)}};hx=function(e){if(e.tag===13){var t=yn(e),s=Js(e,t);if(s!==null){var i=Ot();ks(s,e,t,i)}$d(e,t)}};fx=function(){return Ke};px=function(e,t){var s=Ke;try{return Ke=e,t()}finally{Ke=s}};Xc=function(e,t,s){switch(t){case"input":if(Zc(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var o=al(i);if(!o)throw Error(ce(90));Hm(i),Zc(i,o)}}}break;case"textarea":Wm(e,s);break;case"select":t=s.value,t!=null&&kr(e,!!s.multiple,t,!1)}};ex=zd;tx=Kn;var O_={usingClientEntryPoint:!1,Events:[na,gr,al,Qm,Jm,zd]},pi={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D_={bundleType:pi.bundleType,version:pi.version,rendererPackageName:pi.rendererPackageName,rendererConfig:pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rx(e),e===null?null:e.stateNode},findFiberByHostInstance:pi.findFiberByHostInstance||I_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qa.isDisabled&&qa.supportsFiber)try{sl=qa.inject(D_),Os=qa}catch{}}rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O_;rs.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vd(t))throw Error(ce(200));return R_(e,t,null,s)};rs.createRoot=function(e,t){if(!Vd(e))throw Error(ce(299));var s=!1,i="",o=z0;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Fd(e,1,!1,null,null,s,!1,i,o),e[Qs]=t.current,$i(e.nodeType===8?e.parentNode:e),new Ud(t)};rs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=rx(t),e=e===null?null:e.stateNode,e};rs.flushSync=function(e){return Kn(e)};rs.hydrate=function(e,t,s){if(!ml(t))throw Error(ce(200));return xl(null,e,t,!0,s)};rs.hydrateRoot=function(e,t,s){if(!Vd(e))throw Error(ce(405));var i=s!=null&&s.hydratedSources||null,o=!1,l="",u=z0;if(s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(u=s.onRecoverableError)),t=I0(t,null,e,1,s??null,o,!1,l,u),e[Qs]=t.current,$i(e),i)for(e=0;e<i.length;e++)s=i[e],o=s._getVersion,o=o(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,o]:t.mutableSourceEagerHydrationData.push(s,o);return new pl(t)};rs.render=function(e,t,s){if(!ml(t))throw Error(ce(200));return xl(null,e,t,!1,s)};rs.unmountComponentAtNode=function(e){if(!ml(e))throw Error(ce(40));return e._reactRootContainer?(Kn(function(){xl(null,null,e,!1,function(){e._reactRootContainer=null,e[Qs]=null})}),!0):!1};rs.unstable_batchedUpdates=zd;rs.unstable_renderSubtreeIntoContainer=function(e,t,s,i){if(!ml(s))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return xl(e,t,s,!1,i)};rs.version="18.3.1-next-f1338f8080-20240426";function O0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O0)}catch(e){console.error(e)}}O0(),Om.exports=rs;var B_=Om.exports,gp=B_;Oc.createRoot=gp.createRoot,Oc.hydrateRoot=gp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yi(){return Yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Yi.apply(this,arguments)}var hn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(hn||(hn={}));const vp="popstate";function F_(e){e===void 0&&(e={});function t(i,o){let{pathname:l,search:u,hash:h}=i.location;return Lu("",{pathname:l,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(i,o){return typeof o=="string"?o:Zo(o)}return U_(t,s,null,e)}function ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function D0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $_(){return Math.random().toString(36).substr(2,8)}function yp(e,t){return{usr:e.state,key:e.key,idx:t}}function Lu(e,t,s,i){return s===void 0&&(s=null),Yi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hr(t):t,{state:s,key:t&&t.key||i||$_()})}function Zo(e){let{pathname:t="/",search:s="",hash:i=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Hr(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function U_(e,t,s,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,u=o.history,h=hn.Pop,f=null,m=g();m==null&&(m=0,u.replaceState(Yi({},u.state,{idx:m}),""));function g(){return(u.state||{idx:null}).idx}function _(){h=hn.Pop;let S=g(),j=S==null?null:S-m;m=S,f&&f({action:h,location:C.location,delta:j})}function y(S,j){h=hn.Push;let w=Lu(C.location,S,j);m=g()+1;let N=yp(w,m),O=C.createHref(w);try{u.pushState(N,"",O)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;o.location.assign(O)}l&&f&&f({action:h,location:C.location,delta:1})}function v(S,j){h=hn.Replace;let w=Lu(C.location,S,j);m=g();let N=yp(w,m),O=C.createHref(w);u.replaceState(N,"",O),l&&f&&f({action:h,location:C.location,delta:0})}function k(S){let j=o.location.origin!=="null"?o.location.origin:o.location.href,w=typeof S=="string"?S:Zo(S);return w=w.replace(/ $/,"%20"),ht(j,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,j)}let C={get action(){return h},get location(){return e(o,u)},listen(S){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(vp,_),f=S,()=>{o.removeEventListener(vp,_),f=null}},createHref(S){return t(o,S)},createURL:k,encodeLocation(S){let j=k(S);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:y,replace:v,go(S){return u.go(S)}};return C}var bp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bp||(bp={}));function V_(e,t,s){return s===void 0&&(s="/"),Z_(e,t,s)}function Z_(e,t,s,i){let o=typeof t=="string"?Hr(t):t,l=Zd(o.pathname||"/",s);if(l==null)return null;let u=B0(e);H_(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=n1(l);h=e1(u[f],m)}return h}function B0(e,t,s,i){t===void 0&&(t=[]),s===void 0&&(s=[]),i===void 0&&(i="");let o=(l,u,h)=>{let f={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};f.relativePath.startsWith("/")&&(ht(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let m=_n([i,f.relativePath]),g=s.concat(f);l.children&&l.children.length>0&&(ht(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),B0(l.children,t,g,m)),!(l.path==null&&!l.index)&&t.push({path:m,score:Q_(m,l.index),routesMeta:g})};return e.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,u);else for(let f of F0(l.path))o(l,u,f)}),t}function F0(e){let t=e.split("/");if(t.length===0)return[];let[s,...i]=t,o=s.endsWith("?"),l=s.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let u=F0(i.join("/")),h=[];return h.push(...u.map(f=>f===""?l:[l,f].join("/"))),o&&h.push(...u),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function H_(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:J_(t.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}const q_=/^:[\w-]+$/,W_=3,G_=2,K_=1,Y_=10,X_=-2,_p=e=>e==="*";function Q_(e,t){let s=e.split("/"),i=s.length;return s.some(_p)&&(i+=X_),t&&(i+=G_),s.filter(o=>!_p(o)).reduce((o,l)=>o+(q_.test(l)?W_:l===""?K_:Y_),i)}function J_(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function e1(e,t,s){let{routesMeta:i}=e,o={},l="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],m=h===i.length-1,g=l==="/"?t:t.slice(l.length)||"/",_=t1({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),y=f.route;if(!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:_n([l,_.pathname]),pathnameBase:o1(_n([l,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(l=_n([l,_.pathnameBase]))}return u}function t1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,i]=s1(e.path,e.caseSensitive,e.end),o=t.match(s);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((m,g,_)=>{let{paramName:y,isOptional:v}=g;if(y==="*"){let C=h[_]||"";u=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const k=h[_];return v&&!k?m[y]=void 0:m[y]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:u,pattern:e}}function s1(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),D0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function n1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return D0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Zd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,i=e.charAt(s);return i&&i!=="/"?null:e.slice(s)||"/"}function r1(e,t){t===void 0&&(t="/");let{pathname:s,search:i="",hash:o=""}=typeof e=="string"?Hr(e):e;return{pathname:s?s.startsWith("/")?s:i1(s,t):t,search:l1(i),hash:c1(o)}}function i1(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function Sc(e,t,s,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a1(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Hd(e,t){let s=a1(e);return t?s.map((i,o)=>o===s.length-1?i.pathname:i.pathnameBase):s.map(i=>i.pathnameBase)}function qd(e,t,s,i){i===void 0&&(i=!1);let o;typeof e=="string"?o=Hr(e):(o=Yi({},e),ht(!o.pathname||!o.pathname.includes("?"),Sc("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),Sc("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),Sc("#","search","hash",o)));let l=e===""||o.pathname==="",u=l?"/":o.pathname,h;if(u==null)h=s;else{let _=t.length-1;if(!i&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),_-=1;o.pathname=y.join("/")}h=_>=0?t[_]:"/"}let f=r1(o,h),m=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&s.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}const _n=e=>e.join("/").replace(/\/\/+/g,"/"),o1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,c1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function u1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $0=["post","put","patch","delete"];new Set($0);const d1=["get",...$0];new Set(d1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Xi.apply(this,arguments)}const Wd=x.createContext(null),h1=x.createContext(null),Cn=x.createContext(null),gl=x.createContext(null),Bs=x.createContext({outlet:null,matches:[],isDataRoute:!1}),U0=x.createContext(null);function f1(e,t){let{relative:s}=t===void 0?{}:t;qr()||ht(!1);let{basename:i,navigator:o}=x.useContext(Cn),{hash:l,pathname:u,search:h}=Z0(e,{relative:s}),f=u;return i!=="/"&&(f=u==="/"?i:_n([i,u])),o.createHref({pathname:f,search:h,hash:l})}function qr(){return x.useContext(gl)!=null}function Pn(){return qr()||ht(!1),x.useContext(gl).location}function V0(e){x.useContext(Cn).static||x.useLayoutEffect(e)}function Ft(){let{isDataRoute:e}=x.useContext(Bs);return e?P1():p1()}function p1(){qr()||ht(!1);let e=x.useContext(Wd),{basename:t,future:s,navigator:i}=x.useContext(Cn),{matches:o}=x.useContext(Bs),{pathname:l}=Pn(),u=JSON.stringify(Hd(o,s.v7_relativeSplatPath)),h=x.useRef(!1);return V0(()=>{h.current=!0}),x.useCallback(function(m,g){if(g===void 0&&(g={}),!h.current)return;if(typeof m=="number"){i.go(m);return}let _=qd(m,JSON.parse(u),l,g.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:_n([t,_.pathname])),(g.replace?i.replace:i.push)(_,g.state,g)},[t,i,u,l,e])}const m1=x.createContext(null);function x1(e){let t=x.useContext(Bs).outlet;return t&&x.createElement(m1.Provider,{value:e},t)}function Gd(){let{matches:e}=x.useContext(Bs),t=e[e.length-1];return t?t.params:{}}function Z0(e,t){let{relative:s}=t===void 0?{}:t,{future:i}=x.useContext(Cn),{matches:o}=x.useContext(Bs),{pathname:l}=Pn(),u=JSON.stringify(Hd(o,i.v7_relativeSplatPath));return x.useMemo(()=>qd(e,JSON.parse(u),l,s==="path"),[e,u,l,s])}function g1(e,t){return v1(e,t)}function v1(e,t,s,i){qr()||ht(!1);let{navigator:o}=x.useContext(Cn),{matches:l}=x.useContext(Bs),u=l[l.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Pn(),g;if(t){var _;let S=typeof t=="string"?Hr(t):t;f==="/"||(_=S.pathname)!=null&&_.startsWith(f)||ht(!1),g=S}else g=m;let y=g.pathname||"/",v=y;if(f!=="/"){let S=f.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let k=V_(e,{pathname:v}),C=j1(k&&k.map(S=>Object.assign({},S,{params:Object.assign({},h,S.params),pathname:_n([f,o.encodeLocation?o.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:_n([f,o.encodeLocation?o.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,s,i);return t&&C?x.createElement(gl.Provider,{value:{location:Xi({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:hn.Pop}},C):C}function y1(){let e=C1(),t=u1(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),s?x.createElement("pre",{style:o},s):null,null)}const b1=x.createElement(y1,null);class _1 extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?x.createElement(Bs.Provider,{value:this.props.routeContext},x.createElement(U0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w1(e){let{routeContext:t,match:s,children:i}=e,o=x.useContext(Wd);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),x.createElement(Bs.Provider,{value:t},i)}function j1(e,t,s,i){var o;if(t===void 0&&(t=[]),s===void 0&&(s=null),i===void 0&&(i=null),e==null){var l;if(!s)return null;if(s.errors)e=s.matches;else if((l=i)!=null&&l.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let u=e,h=(o=s)==null?void 0:o.errors;if(h!=null){let g=u.findIndex(_=>_.route.id&&(h==null?void 0:h[_.route.id])!==void 0);g>=0||ht(!1),u=u.slice(0,Math.min(u.length,g+1))}let f=!1,m=-1;if(s&&i&&i.v7_partialHydration)for(let g=0;g<u.length;g++){let _=u[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=g),_.route.id){let{loaderData:y,errors:v}=s,k=_.route.loader&&y[_.route.id]===void 0&&(!v||v[_.route.id]===void 0);if(_.route.lazy||k){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((g,_,y)=>{let v,k=!1,C=null,S=null;s&&(v=h&&_.route.id?h[_.route.id]:void 0,C=_.route.errorElement||b1,f&&(m<0&&y===0?(E1("route-fallback"),k=!0,S=null):m===y&&(k=!0,S=_.route.hydrateFallbackElement||null)));let j=t.concat(u.slice(0,y+1)),w=()=>{let N;return v?N=C:k?N=S:_.route.Component?N=x.createElement(_.route.Component,null):_.route.element?N=_.route.element:N=g,x.createElement(w1,{match:_,routeContext:{outlet:g,matches:j,isDataRoute:s!=null},children:N})};return s&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?x.createElement(_1,{location:s.location,revalidation:s.revalidation,component:C,error:v,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):w()},null)}var H0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(H0||{}),q0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(q0||{});function N1(e){let t=x.useContext(Wd);return t||ht(!1),t}function k1(e){let t=x.useContext(h1);return t||ht(!1),t}function S1(e){let t=x.useContext(Bs);return t||ht(!1),t}function W0(e){let t=S1(),s=t.matches[t.matches.length-1];return s.route.id||ht(!1),s.route.id}function C1(){var e;let t=x.useContext(U0),s=k1(),i=W0();return t!==void 0?t:(e=s.errors)==null?void 0:e[i]}function P1(){let{router:e}=N1(H0.UseNavigateStable),t=W0(q0.UseNavigateStable),s=x.useRef(!1);return V0(()=>{s.current=!0}),x.useCallback(function(o,l){l===void 0&&(l={}),s.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Xi({fromRouteId:t},l)))},[e,t])}const wp={};function E1(e,t,s){wp[e]||(wp[e]=!0)}function L1(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ho(e){let{to:t,replace:s,state:i,relative:o}=e;qr()||ht(!1);let{future:l,static:u}=x.useContext(Cn),{matches:h}=x.useContext(Bs),{pathname:f}=Pn(),m=Ft(),g=qd(t,Hd(h,l.v7_relativeSplatPath),f,o==="path"),_=JSON.stringify(g);return x.useEffect(()=>m(JSON.parse(_),{replace:s,state:i,relative:o}),[m,_,o,s,i]),null}function T1(e){return x1(e.context)}function mt(e){ht(!1)}function M1(e){let{basename:t="/",children:s=null,location:i,navigationType:o=hn.Pop,navigator:l,static:u=!1,future:h}=e;qr()&&ht(!1);let f=t.replace(/^\/*/,"/"),m=x.useMemo(()=>({basename:f,navigator:l,static:u,future:Xi({v7_relativeSplatPath:!1},h)}),[f,h,l,u]);typeof i=="string"&&(i=Hr(i));let{pathname:g="/",search:_="",hash:y="",state:v=null,key:k="default"}=i,C=x.useMemo(()=>{let S=Zd(g,f);return S==null?null:{location:{pathname:S,search:_,hash:y,state:v,key:k},navigationType:o}},[f,g,_,y,v,k,o]);return C==null?null:x.createElement(Cn.Provider,{value:m},x.createElement(gl.Provider,{children:s,value:C}))}function A1(e){let{children:t,location:s}=e;return g1(Tu(t),s)}new Promise(()=>{});function Tu(e,t){t===void 0&&(t=[]);let s=[];return x.Children.forEach(e,(i,o)=>{if(!x.isValidElement(i))return;let l=[...t,o];if(i.type===x.Fragment){s.push.apply(s,Tu(i.props.children,l));return}i.type!==mt&&ht(!1),!i.props.index||!i.props.children||ht(!1);let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Tu(i.props.children,l)),s.push(u)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Mu.apply(this,arguments)}function R1(e,t){if(e==null)return{};var s={},i=Object.keys(e),o,l;for(l=0;l<i.length;l++)o=i[l],!(t.indexOf(o)>=0)&&(s[o]=e[o]);return s}function I1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function z1(e,t){return e.button===0&&(!t||t==="_self")&&!I1(e)}function Au(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let i=e[s];return t.concat(Array.isArray(i)?i.map(o=>[s,o]):[[s,i]])},[]))}function O1(e,t){let s=Au(e);return t&&t.forEach((i,o)=>{s.has(o)||t.getAll(o).forEach(l=>{s.append(o,l)})}),s}const D1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],B1="6";try{window.__reactRouterVersion=B1}catch{}const F1="startTransition",jp=Py[F1];function $1(e){let{basename:t,children:s,future:i,window:o}=e,l=x.useRef();l.current==null&&(l.current=F_({window:o,v5Compat:!0}));let u=l.current,[h,f]=x.useState({action:u.action,location:u.location}),{v7_startTransition:m}=i||{},g=x.useCallback(_=>{m&&jp?jp(()=>f(_)):f(_)},[f,m]);return x.useLayoutEffect(()=>u.listen(g),[u,g]),x.useEffect(()=>L1(i),[i]),x.createElement(M1,{basename:t,children:s,location:h.location,navigationType:h.action,navigator:u,future:i})}const U1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ze=x.forwardRef(function(t,s){let{onClick:i,relative:o,reloadDocument:l,replace:u,state:h,target:f,to:m,preventScrollReset:g,viewTransition:_}=t,y=R1(t,D1),{basename:v}=x.useContext(Cn),k,C=!1;if(typeof m=="string"&&V1.test(m)&&(k=m,U1))try{let N=new URL(window.location.href),O=m.startsWith("//")?new URL(N.protocol+m):new URL(m),A=Zd(O.pathname,v);O.origin===N.origin&&A!=null?m=A+O.search+O.hash:C=!0}catch{}let S=f1(m,{relative:o}),j=Z1(m,{replace:u,state:h,target:f,preventScrollReset:g,relative:o,viewTransition:_});function w(N){i&&i(N),N.defaultPrevented||j(N)}return x.createElement("a",Mu({},y,{href:k||S,onClick:C||l?i:w,ref:s,target:f}))});var Np;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Np||(Np={}));var kp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(kp||(kp={}));function Z1(e,t){let{target:s,replace:i,state:o,preventScrollReset:l,relative:u,viewTransition:h}=t===void 0?{}:t,f=Ft(),m=Pn(),g=Z0(e,{relative:u});return x.useCallback(_=>{if(z1(_,s)){_.preventDefault();let y=i!==void 0?i:Zo(m)===Zo(g);f(e,{replace:y,state:o,preventScrollReset:l,relative:u,viewTransition:h})}},[m,f,g,i,o,s,e,l,u,h])}function H1(e){let t=x.useRef(Au(e)),s=x.useRef(!1),i=Pn(),o=x.useMemo(()=>O1(i.search,s.current?null:t.current),[i.search]),l=Ft(),u=x.useCallback((h,f)=>{const m=Au(typeof h=="function"?h(o):h);s.current=!0,l("?"+m,f)},[l,o]);return[o,u]}/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G0=(...e)=>e.filter((t,s,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:u,...h},f)=>x.createElement("svg",{ref:f,...W1,width:t,height:t,stroke:e,strokeWidth:i?Number(s)*24/Number(t):s,className:G0("lucide",o),...h},[...u.map(([m,g])=>x.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(e,t)=>{const s=x.forwardRef(({className:i,...o},l)=>x.createElement(G1,{ref:l,iconNode:t,className:G0(`lucide-${q1(e)}`,i),...o}));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=_e("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=_e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=_e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=_e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=_e("CarFront",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=_e("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=_e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=_e("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=_e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=_e("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=_e("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=_e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=_e("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=_e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=_e("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=_e("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=_e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=_e("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=_e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=_e("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=_e("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=_e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=_e("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=_e("MailPlus",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M16 19h6",key:"xwg31i"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=_e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=_e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=_e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=_e("MessageSquareText",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=_e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=_e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=_e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=_e("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=_e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=_e("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=_e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=_e("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=_e("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=_e("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=_e("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=_e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=_e("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=_e("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=_e("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=_e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=_e("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=_e("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=_e("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=_e("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=_e("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ko=[{name:"Abidjan",region:"Autonome",lat:5.3599517,lng:-4.0082563},{name:"Yamoussoukro",region:"Autonome",lat:6.82055,lng:-5.27674},{name:"Bouak",region:"Gbk",alt:["Bouake"],lat:7.68949,lng:-5.02027},{name:"Daloa",region:"Haut-Sassandra",lat:6.87735,lng:-6.45022},{name:"San-Pdro",region:"San-Pdro",alt:["San Pedro","San-Pedro"],lat:4.745,lng:-6.65},{name:"Korhogo",region:"Poro",lat:9.45804,lng:-5.62961},{name:"Man",region:"Tonkpi",lat:7.41251,lng:-7.55383},{name:"Abengourou",region:"Indni-Djuablin",alt:["Abenguru"],lat:6.7292,lng:-3.4963},{name:"Divo",region:"Lh-Djiboua",lat:5.839,lng:-5.357},{name:"Gagnoa",region:"Gh",lat:6.13193,lng:-5.94736},{name:"Anyama",region:"Autonome Abidjan",lat:5.49462,lng:-4.05183},{name:"Agboville",region:"Agneby-Tiassa",lat:5.92801,lng:-4.21319},{name:"Soubr",region:"Nawa",alt:["Soubre"],lat:5.78297,lng:-6.60828},{name:"Bouafl",region:"Marahou",alt:["Bouafle"],lat:6.99041,lng:-5.7442},{name:"Sgula",region:"Worodougou",alt:["Seguela"],lat:7.96111,lng:-6.67306},{name:"Bondoukou",region:"Gontougo",lat:8.03333,lng:-2.8},{name:"Aboisso",region:"Sud-Como",lat:5.467,lng:-3.208},{name:"Odienn",region:"Kabadougou",alt:["Odienne"],lat:9.5,lng:-7.5667},{name:"Ferkessdougou",region:"Tchologo",alt:["Ferkessedougou","Ferk"],lat:9.6,lng:-5.2},{name:"Issia",region:"Haut-Sassandra",lat:6.49211,lng:-6.5856},{name:"Tiassal",region:"Agneby-Tiassa",alt:["Tiassale"],lat:5.898,lng:-4.822},{name:"Toumodi",region:"Blier",lat:6.553,lng:-5.017},{name:"Sakassou",region:"Gbk",alt:["Sakasou"],lat:7.455,lng:-5.288},{name:"Magui",region:"Nawa",alt:["Meagui"],lat:5.333,lng:-6.583},{name:"Guiglo",region:"Cavally",lat:6.55,lng:-7.5},{name:"Lakota",region:"Lh-Djiboua",lat:5.85,lng:-5.683},{name:"Bongouanou",region:"Moronou",lat:6.649,lng:-4.204},{name:"Mankono",region:"Br",lat:8.058,lng:-6.188},{name:"Katiola",region:"Hambol",lat:8.137,lng:-5.102},{name:"Sinfra",region:"Gh",lat:6.617,lng:-5.917},{name:"Tabou",region:"San-Pdro",lat:4.423,lng:-7.353},{name:"Adiak",region:"Sud-Como",alt:["Adiake"],lat:5.286,lng:-3.304},{name:"Grand-Bassam",region:"Sud-Como",alt:["Bassam","Grand Bassam"],lat:5.2118,lng:-3.73884},{name:"Jacqueville",region:"Grands-Ponts",alt:["Jacque Ville","Jacque-Ville"],lat:5.213,lng:-4.413},{name:"Assinie-Mafia",region:"Sud-Como",alt:["Assinie","Assinie Mafia"],lat:5.1307,lng:-3.2745},{name:"Grand-Lahou",region:"Grands-Ponts",alt:["Grand Lahou"],lat:5.2353,lng:-5.0024},{name:"Sassandra",region:"Gbkl",lat:4.9529,lng:-6.0857}],Ti=e=>e.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().trim();function Jd(e){const t=Ti(e);return Ko.find(s=>{var i;return Ti(s.name)===t?!0:(i=s.alt)==null?void 0:i.some(o=>Ti(o)===t)})}function zp(e){return!!Jd(e)}function kw(e,t=8){const s=Ti(e);return s?Ko.map(o=>{const l=[o.name,o.region,...o.alt??[]].filter(Boolean).map(Ti).join(" | ");let u=0;return l.startsWith(s)&&(u+=3),l.includes(` ${s}`)&&(u+=2),l.includes(s)&&(u+=1),{c:o,score:u}}).filter(o=>o.score>0).sort((o,l)=>l.score-o.score||o.c.name.localeCompare(l.c.name)).slice(0,t).map(o=>o.c):J0}const Sw=["Abidjan","Yamoussoukro","Bouak","San-Pdro","Daloa","Korhogo","Man","Grand-Bassam"],J0=Sw.map(e=>Jd(e)??{name:e,lat:0,lng:0}),Wa=e=>e*Math.PI/180;function Cw(e,t){const i=Wa(t.lat-e.lat),o=Wa(t.lng-e.lng),l=Wa(e.lat),u=Wa(t.lat),h=Math.sin(i/2)**2+Math.cos(l)*Math.cos(u)*Math.sin(o/2)**2;return 2*6371*Math.asin(Math.sqrt(h))}function Op(e,t){let s=Ko[0],i=Number.POSITIVE_INFINITY;for(const o of Ko){const l=Cw({lat:e,lng:t},{lat:o.lat,lng:o.lng});l<i&&(s=o,i=l)}return{city:s,distanceKm:i}}const Pw=void 0,Dp=!!Pw;async function Ew(e){return[]}async function Lw(e){return null}const Tw=(e,t,s=4)=>`${e.toFixed(s)}, ${t.toFixed(s)}`;function Yo({value:e,placeholder:t="Ville",label:s,onChange:i,onSelect:o,onDisplayChange:l,onMetaChange:u,className:h,autoFocus:f,allowCurrentLocation:m=!1,enablePlacesLookup:g=!1}){const[_,y]=x.useState(!1),[v,k]=x.useState(e??""),[C,S]=x.useState(0),[j,w]=x.useState(!1),[N,O]=x.useState(null),[A,F]=x.useState([]),[R,V]=x.useState(!1),[$,T]=x.useState(null),K=x.useRef(null),Y=x.useRef(null);x.useEffect(()=>k(e??""),[e]);const ue=x.useMemo(()=>{const P=(v==null?void 0:v.trim())??"";return P?kw(P,8):J0},[v]);x.useEffect(()=>{if(!g||!Dp){F([]),T(null),V(!1);return}const P=v.trim();if(P.length<3){F([]),T(null),V(!1);return}let G=!1;V(!0),T(null);const J=window.setTimeout(async()=>{try{const H=await Ew(P);G||F(H)}catch(H){G||T((H==null?void 0:H.message)||"Impossible de contacter Google Places.")}finally{G||V(!1)}},300);return()=>{G=!0,window.clearTimeout(J)}},[v,g]);const he=P=>u==null?void 0:u(P);x.useEffect(()=>{const P=G=>{K.current&&(K.current.contains(G.target)||y(!1))};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const ve=P=>{var G;k(P.label),l==null||l(P.label),i(P.city),o==null||o(P.city),he(P),y(!1),O(null),w(!1),S(0),(G=Y.current)==null||G.focus()},Z=P=>{ve({city:P.name,label:P.name,lat:P.lat,lng:P.lng,mode:"city"})},le=P=>{!_&&(P.key==="ArrowDown"||P.key==="ArrowUp")&&y(!0),ue.length&&(P.key==="ArrowDown"?(P.preventDefault(),S(G=>(G+1)%ue.length)):P.key==="ArrowUp"?(P.preventDefault(),S(G=>(G-1+ue.length)%ue.length)):P.key==="Enter"?(P.preventDefault(),Z(ue[Math.max(0,C)])):P.key==="Escape"&&y(!1))},M=()=>{if(O(null),typeof navigator>"u"||!("geolocation"in navigator)){O("La golocalisation nest pas supporte sur ce navigateur.");return}w(!0),navigator.geolocation.getCurrentPosition(P=>{const{latitude:G,longitude:J,accuracy:H}=P.coords,{city:B,distanceKm:X}=Op(G,J),ee=typeof X=="number"?`  ~${X.toFixed(1)} km`:"",pe=`Ma position actuelle  ${B.name}${ee} (${Tw(G,J)})`;ve({city:B.name,label:pe,lat:G,lng:J,accuracyMeters:H??void 0,distanceKm:X,mode:"current"})},P=>{w(!1),O((P==null?void 0:P.message)||"Impossible de rcuprer la position.")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:3e4})},D=async(P,G)=>{try{T(null),V(!0);const J=await Lw(P);if(!J){T("Lieu indisponible.");return}const{city:H,distanceKm:B}=Op(J.location.lat,J.location.lng),X=J.name||G;ve({city:H.name,label:`${X}  ${H.name}`,lat:J.location.lat,lng:J.location.lng,distanceKm:B,note:J.formattedAddress,mode:"place",placeId:J.placeId,provider:"google"})}catch(J){T((J==null?void 0:J.message)||"Impossible de charger ce lieu.")}finally{V(!1)}};return r.jsxs("div",{ref:K,className:`relative ${h??""}`,children:[s&&r.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-2",children:s}),r.jsxs("div",{className:"relative",children:[r.jsx(er,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-sky-500/80 pointer-events-none"}),r.jsx("input",{ref:Y,autoFocus:f,value:v,onChange:P=>{const G=P.currentTarget.value;k(G),i(G),l==null||l(G),he(null),O(null),_||y(!0),S(0)},onFocus:()=>y(!0),onKeyDown:le,placeholder:t,className:"input input-lg input-with-icon w-full pr-4","aria-autocomplete":"list","aria-expanded":_,"aria-controls":"city-listbox"})]}),_&&r.jsx("div",{className:"absolute left-0 right-0 mt-2 rounded-2xl border border-slate-200 bg-white shadow-2xl z-[100]",role:"listbox",id:"city-listbox",children:r.jsxs("div",{className:"max-h-80 overflow-auto",children:[m&&r.jsxs("div",{className:"border-b border-slate-100 bg-white/80",children:[r.jsxs("button",{type:"button",className:"flex w-full items-center gap-3 px-4 py-3 text-left text-sm font-medium text-slate-700 hover:bg-sky-50 transition disabled:cursor-not-allowed disabled:opacity-70",onMouseDown:P=>P.preventDefault(),onClick:M,disabled:j,children:[j?r.jsx(Ep,{size:16,className:"animate-spin text-sky-600"}):r.jsx(mw,{size:16,className:"text-sky-600"}),j?"Localisation en cours":"Utiliser ma position actuelle"]}),N&&r.jsx("div",{className:"px-4 pb-2 text-xs text-red-600",children:N})]}),g&&r.jsx("div",{className:"border-b border-slate-100 bg-slate-50/60",children:Dp?A.length===0&&v.trim().length<3?r.jsx("div",{className:"px-4 py-3 text-xs text-slate-500",children:"Tape au moins 3 caractres pour chercher un lieu prcis."}):r.jsxs("div",{className:"py-2",children:[r.jsx("div",{className:"px-4 pb-2 text-xs font-semibold uppercase text-slate-500",children:"Lieux proposs"}),$&&r.jsx("div",{className:"px-4 pb-2 text-xs text-red-600",children:$}),R&&r.jsxs("div",{className:"px-4 py-2 text-sm text-slate-500 flex items-center gap-2",children:[r.jsx(Ep,{size:14,className:"animate-spin text-slate-500"}),"Recherche"]}),A.map(P=>r.jsxs("button",{type:"button",className:"w-full px-4 py-2 text-left hover:bg-sky-50 transition",onMouseDown:G=>G.preventDefault(),onClick:()=>D(P.placeId,P.description),children:[r.jsx("div",{className:"text-sm font-semibold text-slate-800",children:P.mainText??P.description}),P.secondaryText&&r.jsx("div",{className:"text-xs text-slate-500",children:P.secondaryText})]},P.placeId)),!R&&A.length===0&&v.trim().length>=3&&r.jsx("div",{className:"px-4 py-2 text-xs text-slate-500",children:"Aucun lieu correspondant dans Google Places."})]}):r.jsxs("div",{className:"px-4 py-3 text-xs text-slate-600 flex items-start gap-2",children:[r.jsx(nw,{size:14,className:"mt-0.5 text-slate-500"}),r.jsxs("span",{children:["Ajoute ",r.jsx("code",{children:"VITE_GOOGLE_PLACES_KEY"})," pour activer la recherche de lieux (Google Places)."]})]})}),ue.length===0?r.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"Aucune ville trouve"}):ue.map((P,G)=>r.jsxs("button",{type:"button",className:`w-full text-left px-4 py-2 transition ${G===C?"bg-sky-50 text-sky-700":"hover:bg-slate-100 text-slate-700"}`,onMouseDown:J=>J.preventDefault(),onClick:()=>Z(P),role:"option","aria-selected":G===C,children:[r.jsx("div",{className:"text-sm font-semibold text-slate-800",children:P.name}),P.region&&r.jsx("div",{className:"text-xs text-slate-500",children:P.region})]},P.name))]})})]})}function Mw({from:e,fromLabel:t,fromMeta:s,to:i,toLabel:o,toMeta:l,date:u,seats:h,priceMax:f,departureAfter:m,departureBefore:g,sort:_,loading:y,onChange:v,onSubmit:k,theme:C="default",searchTheme:S}){const w=x.useMemo(()=>{const Z={panel:"border border-white/80 bg-white/98 shadow-xl shadow-sky-100/60 backdrop-blur-xl",icon:"text-sky-500/80",fieldLg:"border-slate-200 focus:border-sky-200 focus:ring-sky-100",fieldSm:"border-slate-200 focus:border-sky-200 focus:ring-sky-100",button:"bg-sky-600 hover:bg-sky-700 text-white shadow-md shadow-sky-200/60",hint:"text-slate-500"};return S?{...Z,...S,panel:`${Z.panel} ${S.panel??""}`.trim()}:Z},[S]),N=C==="night"?"text-indigo-100":"text-slate-600",O=new Date().toISOString().slice(0,10),A=x.useRef(null),[F,R]=x.useState(!1),V=()=>{var le;const Z=A.current;Z&&((le=Z.showPicker)==null||le.call(Z),Z.focus())},$=()=>{!e&&!i||v({from:i,fromLabel:o,fromMeta:l,to:e,toLabel:t,toMeta:s})},T=[["Abidjan","Yamoussoukro"],["Abidjan","Bouak"],["Bouak","Abidjan"]],K=(Z,le)=>{v({from:Z,fromLabel:Z,fromMeta:null,to:le,toLabel:le,toMeta:null})},Y=Z=>{if(!Z)return null;const[le,M]=Z.split(":").map(Number);return Number.isNaN(le)||Number.isNaN(M)?null:le*60+M},ue=Y(m),he=Y(g),ve=typeof ue=="number"&&typeof he=="number"&&ue>he;return r.jsxs("form",{className:`search-sticky relative w-full overflow-hidden rounded-[32px] px-8 md:px-16 py-10 space-y-7 transition ${w.panel}`,onSubmit:Z=>{Z.preventDefault(),k()},noValidate:!0,"aria-label":"Formulaire de recherche de trajets",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500",children:[r.jsx("span",{className:"font-semibold uppercase tracking-wide",children:"Planifier un trajet"}),r.jsxs("button",{type:"button",onClick:$,className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 font-semibold text-slate-600 transition hover:border-sky-200 hover:text-sky-700",children:[r.jsx(gw,{size:12})," Inverser"]})]}),T.length>0&&r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50/80 p-3",children:[r.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Suggestions instantanes"}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:T.map(([Z,le])=>r.jsxs("button",{type:"button",onClick:()=>K(Z,le),className:"rounded-full border border-slate-200 bg-white/80 px-3 py-1.5 font-semibold text-slate-600 transition hover:border-sky-200 hover:text-sky-700",children:[Z,"  ",le]},`${Z}-${le}`))})]}),r.jsxs("div",{className:"grid gap-3",children:[r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[r.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Dpart"}),r.jsx(Yo,{label:void 0,placeholder:"Abidjan, Bouak, San-Pdro",value:t,onChange:Z=>v({from:Z}),onSelect:Z=>v({from:Z}),onDisplayChange:Z=>v({fromLabel:Z}),onMetaChange:Z=>v({fromMeta:Z}),allowCurrentLocation:!0,enablePlacesLookup:!0,className:"mt-2 w-full text-base"})]}),r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[r.jsx("label",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Arrive"}),r.jsx(Yo,{label:void 0,placeholder:"Yamoussoukro, Korhogo",value:o,onChange:Z=>v({to:Z}),onSelect:Z=>v({to:Z}),onDisplayChange:Z=>v({toLabel:Z}),onMetaChange:Z=>v({toMeta:Z}),allowCurrentLocation:!0,enablePlacesLookup:!0,className:"mt-2 w-full text-base"})]})]}),r.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:`text-xs font-semibold ${N}`,children:"Date de dpart"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ks,{className:`absolute left-3 top-1/2 -translate-y-1/2 ${w.icon}`,size:18}),r.jsx("input",{ref:A,type:"date",className:`input input-with-icon h-14 w-full pr-12 text-base ${w.fieldLg}`,min:O,value:u??"",onChange:Z=>v({date:Z.currentTarget.value})}),r.jsx("button",{type:"button",onClick:V,className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-lg p-2 text-slate-500 hover:bg-slate-100","aria-label":"Choisir une date",children:r.jsx(Ks,{size:16})})]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Choisis une date ou laisse vide pour les prochains dparts."})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:`text-xs font-semibold ${N}`,children:"Nombre de siges"}),r.jsxs("div",{className:"relative",children:[r.jsx(Qd,{className:`absolute left-3 top-1/2 -translate-y-1/2 ${w.icon}`,size:16}),r.jsx("input",{type:"number",min:1,max:10,step:1,className:`input input-with-icon h-14 w-full text-base ${w.fieldLg}`,inputMode:"numeric",pattern:"[0-9]*",value:h,onChange:Z=>{const le=Number(Z.currentTarget.value),M=Number.isFinite(le)?Math.max(1,Math.min(10,le)):1;v({seats:M})}})]}),r.jsxs("p",{className:"text-xs text-slate-400",children:["Entre 1 et ",10," siges par rservation."]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:`text-xs font-semibold ${N}`,children:"Budget maximum (FCFA)"}),r.jsx("input",{type:"number",min:0,step:500,className:`input h-14 w-full text-base ${w.fieldLg}`,placeholder:"Plafond souhait",value:typeof f=="number"?f:"",onChange:Z=>{const le=Z.currentTarget.value,M=Number(le);if(!le){v({priceMax:void 0});return}v({priceMax:Number.isFinite(M)?Math.max(0,M):void 0})}}),r.jsx("p",{className:"text-xs text-slate-400",children:"Affiche uniquement les trajets sous ce montant."})]})]})}),r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[r.jsxs("button",{type:"button",onClick:()=>R(Z=>!Z),className:"flex w-full items-center justify-between text-sm font-semibold text-slate-700",children:[r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx(_w,{size:14})," Filtres avancs"]}),r.jsx("span",{className:"text-xs text-slate-500",children:F?"Masquer":"Afficher"})]}),F&&r.jsxs("div",{className:"mt-3 space-y-3 text-sm text-slate-600",children:[r.jsx("div",{className:"grid gap-3 lg:grid-cols-[minmax(0,1fr),minmax(0,0.6fr)]",children:r.jsxs("div",{children:[r.jsx("label",{className:`text-xs font-semibold ${N}`,children:"Trier par"}),r.jsxs("select",{className:`input mt-1 h-12 w-full text-sm ${w.fieldSm}`,value:_,onChange:Z=>v({sort:Z.currentTarget.value}),children:[r.jsx("option",{value:"soonest",children:"Dpart le plus proche"}),r.jsx("option",{value:"cheapest",children:"Moins cher"}),r.jsx("option",{value:"seats",children:"Plus de places"})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:`text-xs font-semibold ${N}`,children:"Dpart entre"}),r.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"time",className:`input h-12 w-full text-sm ${w.fieldLg}`,value:m??"",onChange:Z=>v({departureAfter:Z.currentTarget.value||void 0}),placeholder:"08:00"}),r.jsx("input",{type:"time",className:`input h-12 w-full text-sm ${w.fieldLg}`,value:g??"",onChange:Z=>v({departureBefore:Z.currentTarget.value||void 0}),placeholder:"18:00"})]}),ve?r.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Lheure de fin doit tre postrieure  lheure de dbut."}):r.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Ex. 08h  12h pour afficher uniquement les dparts du matin."})]})]})]})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("button",{type:"submit",disabled:y,className:"inline-flex w-full items-center justify-center gap-3 rounded-[24px] bg-sky-600 px-6 py-4 text-lg font-semibold text-white shadow-lg shadow-sky-200/80 transition hover:bg-sky-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-sky-200 disabled:opacity-60",children:[r.jsx(Q0,{size:22}),y?"Recherche en cours":"Trouver des trajets"]})})]})}const Aw={},Bp=e=>{let t;const s=new Set,i=(g,_)=>{const y=typeof g=="function"?g(t):g;if(!Object.is(y,t)){const v=t;t=_??(typeof y!="object"||y===null)?y:Object.assign({},t,y),s.forEach(k=>k(t,v))}},o=()=>t,f={setState:i,getState:o,getInitialState:()=>m,subscribe:g=>(s.add(g),()=>s.delete(g)),destroy:()=>{(Aw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},m=t=e(i,o,f);return f},Rw=e=>e?Bp(e):Bp;var eg={exports:{}},tg={},sg={exports:{}},ng={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Br=x;function Iw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zw=typeof Object.is=="function"?Object.is:Iw,Ow=Br.useState,Dw=Br.useEffect,Bw=Br.useLayoutEffect,Fw=Br.useDebugValue;function $w(e,t){var s=t(),i=Ow({inst:{value:s,getSnapshot:t}}),o=i[0].inst,l=i[1];return Bw(function(){o.value=s,o.getSnapshot=t,Pc(o)&&l({inst:o})},[e,s,t]),Dw(function(){return Pc(o)&&l({inst:o}),e(function(){Pc(o)&&l({inst:o})})},[e]),Fw(s),s}function Pc(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!zw(e,s)}catch{return!0}}function Uw(e,t){return t()}var Vw=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Uw:$w;ng.useSyncExternalStore=Br.useSyncExternalStore!==void 0?Br.useSyncExternalStore:Vw;sg.exports=ng;var Zw=sg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vl=x,Hw=Zw;function qw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ww=typeof Object.is=="function"?Object.is:qw,Gw=Hw.useSyncExternalStore,Kw=vl.useRef,Yw=vl.useEffect,Xw=vl.useMemo,Qw=vl.useDebugValue;tg.useSyncExternalStoreWithSelector=function(e,t,s,i,o){var l=Kw(null);if(l.current===null){var u={hasValue:!1,value:null};l.current=u}else u=l.current;l=Xw(function(){function f(v){if(!m){if(m=!0,g=v,v=i(v),o!==void 0&&u.hasValue){var k=u.value;if(o(k,v))return _=k}return _=v}if(k=_,Ww(g,v))return k;var C=i(v);return o!==void 0&&o(k,C)?(g=v,k):(g=v,_=C)}var m=!1,g,_,y=s===void 0?null:s;return[function(){return f(t())},y===null?void 0:function(){return f(y())}]},[t,s,i,o]);var h=Gw(e,l[0],l[1]);return Yw(function(){u.hasValue=!0,u.value=h},[h]),Qw(h),h};eg.exports=tg;var Jw=eg.exports;const e2=Ku(Jw),rg={},{useDebugValue:t2}=Tr,{useSyncExternalStoreWithSelector:s2}=e2;let Fp=!1;const n2=e=>e;function r2(e,t=n2,s){(rg?"production":void 0)!=="production"&&s&&!Fp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Fp=!0);const i=s2(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return t2(i),i}const $p=e=>{(rg?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Rw(e):e,s=(i,o)=>r2(t,i,o);return Object.assign(s,t),s},i2=e=>e?$p(e):$p;function ig(e,t){return function(){return e.apply(t,arguments)}}const{toString:a2}=Object.prototype,{getPrototypeOf:eh}=Object,{iterator:yl,toStringTag:ag}=Symbol,bl=(e=>t=>{const s=a2.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Cs=e=>(e=e.toLowerCase(),t=>bl(t)===e),_l=e=>t=>typeof t===e,{isArray:Wr}=Array,Fr=_l("undefined");function ia(e){return e!==null&&!Fr(e)&&e.constructor!==null&&!Fr(e.constructor)&&Gt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const og=Cs("ArrayBuffer");function o2(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&og(e.buffer),t}const l2=_l("string"),Gt=_l("function"),lg=_l("number"),aa=e=>e!==null&&typeof e=="object",c2=e=>e===!0||e===!1,xo=e=>{if(bl(e)!=="object")return!1;const t=eh(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ag in e)&&!(yl in e)},u2=e=>{if(!aa(e)||ia(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},d2=Cs("Date"),h2=Cs("File"),f2=Cs("Blob"),p2=Cs("FileList"),m2=e=>aa(e)&&Gt(e.pipe),x2=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Gt(e.append)&&((t=bl(e))==="formdata"||t==="object"&&Gt(e.toString)&&e.toString()==="[object FormData]"))},g2=Cs("URLSearchParams"),[v2,y2,b2,_2]=["ReadableStream","Request","Response","Headers"].map(Cs),w2=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function oa(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),Wr(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{if(ia(e))return;const l=s?Object.getOwnPropertyNames(e):Object.keys(e),u=l.length;let h;for(i=0;i<u;i++)h=l[i],t.call(null,e[h],h,e)}}function cg(e,t){if(ia(e))return null;t=t.toLowerCase();const s=Object.keys(e);let i=s.length,o;for(;i-- >0;)if(o=s[i],t===o.toLowerCase())return o;return null}const $n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ug=e=>!Fr(e)&&e!==$n;function Ou(){const{caseless:e,skipUndefined:t}=ug(this)&&this||{},s={},i=(o,l)=>{const u=e&&cg(s,l)||l;xo(s[u])&&xo(o)?s[u]=Ou(s[u],o):xo(o)?s[u]=Ou({},o):Wr(o)?s[u]=o.slice():(!t||!Fr(o))&&(s[u]=o)};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&oa(arguments[o],i);return s}const j2=(e,t,s,{allOwnKeys:i}={})=>(oa(t,(o,l)=>{s&&Gt(o)?e[l]=ig(o,s):e[l]=o},{allOwnKeys:i}),e),N2=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),k2=(e,t,s,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},S2=(e,t,s,i)=>{let o,l,u;const h={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),l=o.length;l-- >0;)u=o[l],(!i||i(u,e,t))&&!h[u]&&(t[u]=e[u],h[u]=!0);e=s!==!1&&eh(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},C2=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const i=e.indexOf(t,s);return i!==-1&&i===s},P2=e=>{if(!e)return null;if(Wr(e))return e;let t=e.length;if(!lg(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},E2=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&eh(Uint8Array)),L2=(e,t)=>{const i=(e&&e[yl]).call(e);let o;for(;(o=i.next())&&!o.done;){const l=o.value;t.call(e,l[0],l[1])}},T2=(e,t)=>{let s;const i=[];for(;(s=e.exec(t))!==null;)i.push(s);return i},M2=Cs("HTMLFormElement"),A2=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,i,o){return i.toUpperCase()+o}),Up=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),R2=Cs("RegExp"),dg=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),i={};oa(s,(o,l)=>{let u;(u=t(o,l,e))!==!1&&(i[l]=u||o)}),Object.defineProperties(e,i)},I2=e=>{dg(e,(t,s)=>{if(Gt(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const i=e[s];if(Gt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},z2=(e,t)=>{const s={},i=o=>{o.forEach(l=>{s[l]=!0})};return Wr(e)?i(e):i(String(e).split(t)),s},O2=()=>{},D2=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function B2(e){return!!(e&&Gt(e.append)&&e[ag]==="FormData"&&e[yl])}const F2=e=>{const t=new Array(10),s=(i,o)=>{if(aa(i)){if(t.indexOf(i)>=0)return;if(ia(i))return i;if(!("toJSON"in i)){t[o]=i;const l=Wr(i)?[]:{};return oa(i,(u,h)=>{const f=s(u,o+1);!Fr(f)&&(l[h]=f)}),t[o]=void 0,l}}return i};return s(e,0)},$2=Cs("AsyncFunction"),U2=e=>e&&(aa(e)||Gt(e))&&Gt(e.then)&&Gt(e.catch),hg=((e,t)=>e?setImmediate:t?((s,i)=>($n.addEventListener("message",({source:o,data:l})=>{o===$n&&l===s&&i.length&&i.shift()()},!1),o=>{i.push(o),$n.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Gt($n.postMessage)),V2=typeof queueMicrotask<"u"?queueMicrotask.bind($n):typeof process<"u"&&process.nextTick||hg,Z2=e=>e!=null&&Gt(e[yl]),W={isArray:Wr,isArrayBuffer:og,isBuffer:ia,isFormData:x2,isArrayBufferView:o2,isString:l2,isNumber:lg,isBoolean:c2,isObject:aa,isPlainObject:xo,isEmptyObject:u2,isReadableStream:v2,isRequest:y2,isResponse:b2,isHeaders:_2,isUndefined:Fr,isDate:d2,isFile:h2,isBlob:f2,isRegExp:R2,isFunction:Gt,isStream:m2,isURLSearchParams:g2,isTypedArray:E2,isFileList:p2,forEach:oa,merge:Ou,extend:j2,trim:w2,stripBOM:N2,inherits:k2,toFlatObject:S2,kindOf:bl,kindOfTest:Cs,endsWith:C2,toArray:P2,forEachEntry:L2,matchAll:T2,isHTMLForm:M2,hasOwnProperty:Up,hasOwnProp:Up,reduceDescriptors:dg,freezeMethods:I2,toObjectSet:z2,toCamelCase:A2,noop:O2,toFiniteNumber:D2,findKey:cg,global:$n,isContextDefined:ug,isSpecCompliantForm:B2,toJSONObject:F2,isAsyncFn:$2,isThenable:U2,setImmediate:hg,asap:V2,isIterable:Z2};function Re(e,t,s,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}W.inherits(Re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const fg=Re.prototype,pg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pg[e]={value:e}});Object.defineProperties(Re,pg);Object.defineProperty(fg,"isAxiosError",{value:!0});Re.from=(e,t,s,i,o,l)=>{const u=Object.create(fg);W.toFlatObject(e,u,function(g){return g!==Error.prototype},m=>m!=="isAxiosError");const h=e&&e.message?e.message:"Error",f=t==null&&e?e.code:t;return Re.call(u,h,f,s,i,o),e&&u.cause==null&&Object.defineProperty(u,"cause",{value:e,configurable:!0}),u.name=e&&e.name||"Error",l&&Object.assign(u,l),u};const H2=null;function Du(e){return W.isPlainObject(e)||W.isArray(e)}function mg(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function Vp(e,t,s){return e?e.concat(t).map(function(o,l){return o=mg(o),!s&&l?"["+o+"]":o}).join(s?".":""):t}function q2(e){return W.isArray(e)&&!e.some(Du)}const W2=W.toFlatObject(W,{},null,function(t){return/^is[A-Z]/.test(t)});function wl(e,t,s){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=W.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,S){return!W.isUndefined(S[C])});const i=s.metaTokens,o=s.visitor||g,l=s.dots,u=s.indexes,f=(s.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(o))throw new TypeError("visitor must be a function");function m(k){if(k===null)return"";if(W.isDate(k))return k.toISOString();if(W.isBoolean(k))return k.toString();if(!f&&W.isBlob(k))throw new Re("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(k)||W.isTypedArray(k)?f&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function g(k,C,S){let j=k;if(k&&!S&&typeof k=="object"){if(W.endsWith(C,"{}"))C=i?C:C.slice(0,-2),k=JSON.stringify(k);else if(W.isArray(k)&&q2(k)||(W.isFileList(k)||W.endsWith(C,"[]"))&&(j=W.toArray(k)))return C=mg(C),j.forEach(function(N,O){!(W.isUndefined(N)||N===null)&&t.append(u===!0?Vp([C],O,l):u===null?C:C+"[]",m(N))}),!1}return Du(k)?!0:(t.append(Vp(S,C,l),m(k)),!1)}const _=[],y=Object.assign(W2,{defaultVisitor:g,convertValue:m,isVisitable:Du});function v(k,C){if(!W.isUndefined(k)){if(_.indexOf(k)!==-1)throw Error("Circular reference detected in "+C.join("."));_.push(k),W.forEach(k,function(j,w){(!(W.isUndefined(j)||j===null)&&o.call(t,j,W.isString(w)?w.trim():w,C,y))===!0&&v(j,C?C.concat(w):[w])}),_.pop()}}if(!W.isObject(e))throw new TypeError("data must be an object");return v(e),t}function Zp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function th(e,t){this._pairs=[],e&&wl(e,this,t)}const xg=th.prototype;xg.append=function(t,s){this._pairs.push([t,s])};xg.toString=function(t){const s=t?function(i){return t.call(this,i,Zp)}:Zp;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function G2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gg(e,t,s){if(!t)return e;const i=s&&s.encode||G2;W.isFunction(s)&&(s={serialize:s});const o=s&&s.serialize;let l;if(o?l=o(t,s):l=W.isURLSearchParams(t)?t.toString():new th(t,s).toString(i),l){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Hp{constructor(){this.handlers=[]}use(t,s,i){return this.handlers.push({fulfilled:t,rejected:s,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){W.forEach(this.handlers,function(i){i!==null&&t(i)})}}const vg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},K2=typeof URLSearchParams<"u"?URLSearchParams:th,Y2=typeof FormData<"u"?FormData:null,X2=typeof Blob<"u"?Blob:null,Q2={isBrowser:!0,classes:{URLSearchParams:K2,FormData:Y2,Blob:X2},protocols:["http","https","file","blob","url","data"]},sh=typeof window<"u"&&typeof document<"u",Bu=typeof navigator=="object"&&navigator||void 0,J2=sh&&(!Bu||["ReactNative","NativeScript","NS"].indexOf(Bu.product)<0),ej=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tj=sh&&window.location.href||"http://localhost",sj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sh,hasStandardBrowserEnv:J2,hasStandardBrowserWebWorkerEnv:ej,navigator:Bu,origin:tj},Symbol.toStringTag,{value:"Module"})),At={...sj,...Q2};function nj(e,t){return wl(e,new At.classes.URLSearchParams,{visitor:function(s,i,o,l){return At.isNode&&W.isBuffer(s)?(this.append(i,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function rj(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ij(e){const t={},s=Object.keys(e);let i;const o=s.length;let l;for(i=0;i<o;i++)l=s[i],t[l]=e[l];return t}function yg(e){function t(s,i,o,l){let u=s[l++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),f=l>=s.length;return u=!u&&W.isArray(o)?o.length:u,f?(W.hasOwnProp(o,u)?o[u]=[o[u],i]:o[u]=i,!h):((!o[u]||!W.isObject(o[u]))&&(o[u]=[]),t(s,i,o[u],l)&&W.isArray(o[u])&&(o[u]=ij(o[u])),!h)}if(W.isFormData(e)&&W.isFunction(e.entries)){const s={};return W.forEachEntry(e,(i,o)=>{t(rj(i),o,s,0)}),s}return null}function aj(e,t,s){if(W.isString(e))try{return(t||JSON.parse)(e),W.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(s||JSON.stringify)(e)}const la={transitional:vg,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const i=s.getContentType()||"",o=i.indexOf("application/json")>-1,l=W.isObject(t);if(l&&W.isHTMLForm(t)&&(t=new FormData(t)),W.isFormData(t))return o?JSON.stringify(yg(t)):t;if(W.isArrayBuffer(t)||W.isBuffer(t)||W.isStream(t)||W.isFile(t)||W.isBlob(t)||W.isReadableStream(t))return t;if(W.isArrayBufferView(t))return t.buffer;if(W.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return nj(t,this.formSerializer).toString();if((h=W.isFileList(t))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return wl(h?{"files[]":t}:t,f&&new f,this.formSerializer)}}return l||o?(s.setContentType("application/json",!1),aj(t)):t}],transformResponse:[function(t){const s=this.transitional||la.transitional,i=s&&s.forcedJSONParsing,o=this.responseType==="json";if(W.isResponse(t)||W.isReadableStream(t))return t;if(t&&W.isString(t)&&(i&&!this.responseType||o)){const u=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(h){if(u)throw h.name==="SyntaxError"?Re.from(h,Re.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:At.classes.FormData,Blob:At.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],e=>{la.headers[e]={}});const oj=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lj=e=>{const t={};let s,i,o;return e&&e.split(`
`).forEach(function(u){o=u.indexOf(":"),s=u.substring(0,o).trim().toLowerCase(),i=u.substring(o+1).trim(),!(!s||t[s]&&oj[s])&&(s==="set-cookie"?t[s]?t[s].push(i):t[s]=[i]:t[s]=t[s]?t[s]+", "+i:i)}),t},qp=Symbol("internals");function mi(e){return e&&String(e).trim().toLowerCase()}function go(e){return e===!1||e==null?e:W.isArray(e)?e.map(go):String(e)}function cj(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=s.exec(e);)t[i[1]]=i[2];return t}const uj=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ec(e,t,s,i,o){if(W.isFunction(i))return i.call(this,t,s);if(o&&(t=s),!!W.isString(t)){if(W.isString(i))return t.indexOf(i)!==-1;if(W.isRegExp(i))return i.test(t)}}function dj(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,i)=>s.toUpperCase()+i)}function hj(e,t){const s=W.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+s,{value:function(o,l,u){return this[i].call(this,t,o,l,u)},configurable:!0})})}let Kt=class{constructor(t){t&&this.set(t)}set(t,s,i){const o=this;function l(h,f,m){const g=mi(f);if(!g)throw new Error("header name must be a non-empty string");const _=W.findKey(o,g);(!_||o[_]===void 0||m===!0||m===void 0&&o[_]!==!1)&&(o[_||f]=go(h))}const u=(h,f)=>W.forEach(h,(m,g)=>l(m,g,f));if(W.isPlainObject(t)||t instanceof this.constructor)u(t,s);else if(W.isString(t)&&(t=t.trim())&&!uj(t))u(lj(t),s);else if(W.isObject(t)&&W.isIterable(t)){let h={},f,m;for(const g of t){if(!W.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[m=g[0]]=(f=h[m])?W.isArray(f)?[...f,g[1]]:[f,g[1]]:g[1]}u(h,s)}else t!=null&&l(s,t,i);return this}get(t,s){if(t=mi(t),t){const i=W.findKey(this,t);if(i){const o=this[i];if(!s)return o;if(s===!0)return cj(o);if(W.isFunction(s))return s.call(this,o,i);if(W.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=mi(t),t){const i=W.findKey(this,t);return!!(i&&this[i]!==void 0&&(!s||Ec(this,this[i],i,s)))}return!1}delete(t,s){const i=this;let o=!1;function l(u){if(u=mi(u),u){const h=W.findKey(i,u);h&&(!s||Ec(i,i[h],h,s))&&(delete i[h],o=!0)}}return W.isArray(t)?t.forEach(l):l(t),o}clear(t){const s=Object.keys(this);let i=s.length,o=!1;for(;i--;){const l=s[i];(!t||Ec(this,this[l],l,t,!0))&&(delete this[l],o=!0)}return o}normalize(t){const s=this,i={};return W.forEach(this,(o,l)=>{const u=W.findKey(i,l);if(u){s[u]=go(o),delete s[l];return}const h=t?dj(l):String(l).trim();h!==l&&delete s[l],s[h]=go(o),i[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return W.forEach(this,(i,o)=>{i!=null&&i!==!1&&(s[o]=t&&W.isArray(i)?i.join(", "):i)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const i=new this(t);return s.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[qp]=this[qp]={accessors:{}}).accessors,o=this.prototype;function l(u){const h=mi(u);i[h]||(hj(o,u),i[h]=!0)}return W.isArray(t)?t.forEach(l):l(t),this}};Kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(Kt.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[s]=i}}});W.freezeMethods(Kt);function Lc(e,t){const s=this||la,i=t||s,o=Kt.from(i.headers);let l=i.data;return W.forEach(e,function(h){l=h.call(s,l,o.normalize(),t?t.status:void 0)}),o.normalize(),l}function bg(e){return!!(e&&e.__CANCEL__)}function Gr(e,t,s){Re.call(this,e??"canceled",Re.ERR_CANCELED,t,s),this.name="CanceledError"}W.inherits(Gr,Re,{__CANCEL__:!0});function _g(e,t,s){const i=s.config.validateStatus;!s.status||!i||i(s.status)?e(s):t(new Re("Request failed with status code "+s.status,[Re.ERR_BAD_REQUEST,Re.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function fj(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function pj(e,t){e=e||10;const s=new Array(e),i=new Array(e);let o=0,l=0,u;return t=t!==void 0?t:1e3,function(f){const m=Date.now(),g=i[l];u||(u=m),s[o]=f,i[o]=m;let _=l,y=0;for(;_!==o;)y+=s[_++],_=_%e;if(o=(o+1)%e,o===l&&(l=(l+1)%e),m-u<t)return;const v=g&&m-g;return v?Math.round(y*1e3/v):void 0}}function mj(e,t){let s=0,i=1e3/t,o,l;const u=(m,g=Date.now())=>{s=g,o=null,l&&(clearTimeout(l),l=null),e(...m)};return[(...m)=>{const g=Date.now(),_=g-s;_>=i?u(m,g):(o=m,l||(l=setTimeout(()=>{l=null,u(o)},i-_)))},()=>o&&u(o)]}const Xo=(e,t,s=3)=>{let i=0;const o=pj(50,250);return mj(l=>{const u=l.loaded,h=l.lengthComputable?l.total:void 0,f=u-i,m=o(f),g=u<=h;i=u;const _={loaded:u,total:h,progress:h?u/h:void 0,bytes:f,rate:m||void 0,estimated:m&&h&&g?(h-u)/m:void 0,event:l,lengthComputable:h!=null,[t?"download":"upload"]:!0};e(_)},s)},Wp=(e,t)=>{const s=e!=null;return[i=>t[0]({lengthComputable:s,total:e,loaded:i}),t[1]]},Gp=e=>(...t)=>W.asap(()=>e(...t)),xj=At.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,At.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(At.origin),At.navigator&&/(msie|trident)/i.test(At.navigator.userAgent)):()=>!0,gj=At.hasStandardBrowserEnv?{write(e,t,s,i,o,l){const u=[e+"="+encodeURIComponent(t)];W.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),W.isString(i)&&u.push("path="+i),W.isString(o)&&u.push("domain="+o),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vj(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function yj(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function wg(e,t,s){let i=!vj(t);return e&&(i||s==!1)?yj(e,t):t}const Kp=e=>e instanceof Kt?{...e}:e;function Yn(e,t){t=t||{};const s={};function i(m,g,_,y){return W.isPlainObject(m)&&W.isPlainObject(g)?W.merge.call({caseless:y},m,g):W.isPlainObject(g)?W.merge({},g):W.isArray(g)?g.slice():g}function o(m,g,_,y){if(W.isUndefined(g)){if(!W.isUndefined(m))return i(void 0,m,_,y)}else return i(m,g,_,y)}function l(m,g){if(!W.isUndefined(g))return i(void 0,g)}function u(m,g){if(W.isUndefined(g)){if(!W.isUndefined(m))return i(void 0,m)}else return i(void 0,g)}function h(m,g,_){if(_ in t)return i(m,g);if(_ in e)return i(void 0,m)}const f={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(m,g,_)=>o(Kp(m),Kp(g),_,!0)};return W.forEach(Object.keys({...e,...t}),function(g){const _=f[g]||o,y=_(e[g],t[g],g);W.isUndefined(y)&&_!==h||(s[g]=y)}),s}const jg=e=>{const t=Yn({},e);let{data:s,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:u,auth:h}=t;if(t.headers=u=Kt.from(u),t.url=gg(wg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),W.isFormData(s)){if(At.hasStandardBrowserEnv||At.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(W.isFunction(s.getHeaders)){const f=s.getHeaders(),m=["content-type","content-length"];Object.entries(f).forEach(([g,_])=>{m.includes(g.toLowerCase())&&u.set(g,_)})}}if(At.hasStandardBrowserEnv&&(i&&W.isFunction(i)&&(i=i(t)),i||i!==!1&&xj(t.url))){const f=o&&l&&gj.read(l);f&&u.set(o,f)}return t},bj=typeof XMLHttpRequest<"u",_j=bj&&function(e){return new Promise(function(s,i){const o=jg(e);let l=o.data;const u=Kt.from(o.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:m}=o,g,_,y,v,k;function C(){v&&v(),k&&k(),o.cancelToken&&o.cancelToken.unsubscribe(g),o.signal&&o.signal.removeEventListener("abort",g)}let S=new XMLHttpRequest;S.open(o.method.toUpperCase(),o.url,!0),S.timeout=o.timeout;function j(){if(!S)return;const N=Kt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),A={data:!h||h==="text"||h==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:N,config:e,request:S};_g(function(R){s(R),C()},function(R){i(R),C()},A),S=null}"onloadend"in S?S.onloadend=j:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(j)},S.onabort=function(){S&&(i(new Re("Request aborted",Re.ECONNABORTED,e,S)),S=null)},S.onerror=function(O){const A=O&&O.message?O.message:"Network Error",F=new Re(A,Re.ERR_NETWORK,e,S);F.event=O||null,i(F),S=null},S.ontimeout=function(){let O=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const A=o.transitional||vg;o.timeoutErrorMessage&&(O=o.timeoutErrorMessage),i(new Re(O,A.clarifyTimeoutError?Re.ETIMEDOUT:Re.ECONNABORTED,e,S)),S=null},l===void 0&&u.setContentType(null),"setRequestHeader"in S&&W.forEach(u.toJSON(),function(O,A){S.setRequestHeader(A,O)}),W.isUndefined(o.withCredentials)||(S.withCredentials=!!o.withCredentials),h&&h!=="json"&&(S.responseType=o.responseType),m&&([y,k]=Xo(m,!0),S.addEventListener("progress",y)),f&&S.upload&&([_,v]=Xo(f),S.upload.addEventListener("progress",_),S.upload.addEventListener("loadend",v)),(o.cancelToken||o.signal)&&(g=N=>{S&&(i(!N||N.type?new Gr(null,e,S):N),S.abort(),S=null)},o.cancelToken&&o.cancelToken.subscribe(g),o.signal&&(o.signal.aborted?g():o.signal.addEventListener("abort",g)));const w=fj(o.url);if(w&&At.protocols.indexOf(w)===-1){i(new Re("Unsupported protocol "+w+":",Re.ERR_BAD_REQUEST,e));return}S.send(l||null)})},wj=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let i=new AbortController,o;const l=function(m){if(!o){o=!0,h();const g=m instanceof Error?m:this.reason;i.abort(g instanceof Re?g:new Gr(g instanceof Error?g.message:g))}};let u=t&&setTimeout(()=>{u=null,l(new Re(`timeout ${t} of ms exceeded`,Re.ETIMEDOUT))},t);const h=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),e=null)};e.forEach(m=>m.addEventListener("abort",l));const{signal:f}=i;return f.unsubscribe=()=>W.asap(h),f}},jj=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let i=0,o;for(;i<s;)o=i+t,yield e.slice(i,o),i=o},Nj=async function*(e,t){for await(const s of kj(e))yield*jj(s,t)},kj=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:i}=await t.read();if(s)break;yield i}}finally{await t.cancel()}},Yp=(e,t,s,i)=>{const o=Nj(e,t);let l=0,u,h=f=>{u||(u=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:m,value:g}=await o.next();if(m){h(),f.close();return}let _=g.byteLength;if(s){let y=l+=_;s(y)}f.enqueue(new Uint8Array(g))}catch(m){throw h(m),m}},cancel(f){return h(f),o.return()}},{highWaterMark:2})},Xp=64*1024,{isFunction:Ga}=W,Sj=(({Request:e,Response:t})=>({Request:e,Response:t}))(W.global),{ReadableStream:Qp,TextEncoder:Jp}=W.global,em=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Cj=e=>{e=W.merge.call({skipUndefined:!0},Sj,e);const{fetch:t,Request:s,Response:i}=e,o=t?Ga(t):typeof fetch=="function",l=Ga(s),u=Ga(i);if(!o)return!1;const h=o&&Ga(Qp),f=o&&(typeof Jp=="function"?(k=>C=>k.encode(C))(new Jp):async k=>new Uint8Array(await new s(k).arrayBuffer())),m=l&&h&&em(()=>{let k=!1;const C=new s(At.origin,{body:new Qp,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!C}),g=u&&h&&em(()=>W.isReadableStream(new i("").body)),_={stream:g&&(k=>k.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!_[k]&&(_[k]=(C,S)=>{let j=C&&C[k];if(j)return j.call(C);throw new Re(`Response type '${k}' is not supported`,Re.ERR_NOT_SUPPORT,S)})});const y=async k=>{if(k==null)return 0;if(W.isBlob(k))return k.size;if(W.isSpecCompliantForm(k))return(await new s(At.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(W.isArrayBufferView(k)||W.isArrayBuffer(k))return k.byteLength;if(W.isURLSearchParams(k)&&(k=k+""),W.isString(k))return(await f(k)).byteLength},v=async(k,C)=>{const S=W.toFiniteNumber(k.getContentLength());return S??y(C)};return async k=>{let{url:C,method:S,data:j,signal:w,cancelToken:N,timeout:O,onDownloadProgress:A,onUploadProgress:F,responseType:R,headers:V,withCredentials:$="same-origin",fetchOptions:T}=jg(k),K=t||fetch;R=R?(R+"").toLowerCase():"text";let Y=wj([w,N&&N.toAbortSignal()],O),ue=null;const he=Y&&Y.unsubscribe&&(()=>{Y.unsubscribe()});let ve;try{if(F&&m&&S!=="get"&&S!=="head"&&(ve=await v(V,j))!==0){let G=new s(C,{method:"POST",body:j,duplex:"half"}),J;if(W.isFormData(j)&&(J=G.headers.get("content-type"))&&V.setContentType(J),G.body){const[H,B]=Wp(ve,Xo(Gp(F)));j=Yp(G.body,Xp,H,B)}}W.isString($)||($=$?"include":"omit");const Z=l&&"credentials"in s.prototype,le={...T,signal:Y,method:S.toUpperCase(),headers:V.normalize().toJSON(),body:j,duplex:"half",credentials:Z?$:void 0};ue=l&&new s(C,le);let M=await(l?K(ue,T):K(C,le));const D=g&&(R==="stream"||R==="response");if(g&&(A||D&&he)){const G={};["status","statusText","headers"].forEach(X=>{G[X]=M[X]});const J=W.toFiniteNumber(M.headers.get("content-length")),[H,B]=A&&Wp(J,Xo(Gp(A),!0))||[];M=new i(Yp(M.body,Xp,H,()=>{B&&B(),he&&he()}),G)}R=R||"text";let P=await _[W.findKey(_,R)||"text"](M,k);return!D&&he&&he(),await new Promise((G,J)=>{_g(G,J,{data:P,headers:Kt.from(M.headers),status:M.status,statusText:M.statusText,config:k,request:ue})})}catch(Z){throw he&&he(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new Re("Network Error",Re.ERR_NETWORK,k,ue),{cause:Z.cause||Z}):Re.from(Z,Z&&Z.code,k,ue)}}},Pj=new Map,Ng=e=>{let t=e?e.env:{};const{fetch:s,Request:i,Response:o}=t,l=[i,o,s];let u=l.length,h=u,f,m,g=Pj;for(;h--;)f=l[h],m=g.get(f),m===void 0&&g.set(f,m=h?new Map:Cj(t)),g=m;return m};Ng();const Fu={http:H2,xhr:_j,fetch:{get:Ng}};W.forEach(Fu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const tm=e=>`- ${e}`,Ej=e=>W.isFunction(e)||e===null||e===!1,kg={getAdapter:(e,t)=>{e=W.isArray(e)?e:[e];const{length:s}=e;let i,o;const l={};for(let u=0;u<s;u++){i=e[u];let h;if(o=i,!Ej(i)&&(o=Fu[(h=String(i)).toLowerCase()],o===void 0))throw new Re(`Unknown adapter '${h}'`);if(o&&(W.isFunction(o)||(o=o.get(t))))break;l[h||"#"+u]=o}if(!o){const u=Object.entries(l).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let h=s?u.length>1?`since :
`+u.map(tm).join(`
`):" "+tm(u[0]):"as no adapter specified";throw new Re("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return o},adapters:Fu};function Tc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gr(null,e)}function sm(e){return Tc(e),e.headers=Kt.from(e.headers),e.data=Lc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kg.getAdapter(e.adapter||la.adapter,e)(e).then(function(i){return Tc(e),i.data=Lc.call(e,e.transformResponse,i),i.headers=Kt.from(i.headers),i},function(i){return bg(i)||(Tc(e),i&&i.response&&(i.response.data=Lc.call(e,e.transformResponse,i.response),i.response.headers=Kt.from(i.response.headers))),Promise.reject(i)})}const Sg="1.12.2",jl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{jl[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const nm={};jl.transitional=function(t,s,i){function o(l,u){return"[Axios v"+Sg+"] Transitional option '"+l+"'"+u+(i?". "+i:"")}return(l,u,h)=>{if(t===!1)throw new Re(o(u," has been removed"+(s?" in "+s:"")),Re.ERR_DEPRECATED);return s&&!nm[u]&&(nm[u]=!0,console.warn(o(u," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(l,u,h):!0}};jl.spelling=function(t){return(s,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function Lj(e,t,s){if(typeof e!="object")throw new Re("options must be an object",Re.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const l=i[o],u=t[l];if(u){const h=e[l],f=h===void 0||u(h,l,e);if(f!==!0)throw new Re("option "+l+" must be "+f,Re.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Re("Unknown option "+l,Re.ERR_BAD_OPTION)}}const vo={assertOptions:Lj,validators:jl},As=vo.validators;let Zn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Hp,response:new Hp}}async request(t,s){try{return await this._request(t,s)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Yn(this.defaults,s);const{transitional:i,paramsSerializer:o,headers:l}=s;i!==void 0&&vo.assertOptions(i,{silentJSONParsing:As.transitional(As.boolean),forcedJSONParsing:As.transitional(As.boolean),clarifyTimeoutError:As.transitional(As.boolean)},!1),o!=null&&(W.isFunction(o)?s.paramsSerializer={serialize:o}:vo.assertOptions(o,{encode:As.function,serialize:As.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),vo.assertOptions(s,{baseUrl:As.spelling("baseURL"),withXsrfToken:As.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let u=l&&W.merge(l.common,l[s.method]);l&&W.forEach(["delete","get","head","post","put","patch","common"],k=>{delete l[k]}),s.headers=Kt.concat(u,l);const h=[];let f=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(s)===!1||(f=f&&C.synchronous,h.unshift(C.fulfilled,C.rejected))});const m=[];this.interceptors.response.forEach(function(C){m.push(C.fulfilled,C.rejected)});let g,_=0,y;if(!f){const k=[sm.bind(this),void 0];for(k.unshift(...h),k.push(...m),y=k.length,g=Promise.resolve(s);_<y;)g=g.then(k[_++],k[_++]);return g}y=h.length;let v=s;for(;_<y;){const k=h[_++],C=h[_++];try{v=k(v)}catch(S){C.call(this,S);break}}try{g=sm.call(this,v)}catch(k){return Promise.reject(k)}for(_=0,y=m.length;_<y;)g=g.then(m[_++],m[_++]);return g}getUri(t){t=Yn(this.defaults,t);const s=wg(t.baseURL,t.url,t.allowAbsoluteUrls);return gg(s,t.params,t.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(t){Zn.prototype[t]=function(s,i){return this.request(Yn(i||{},{method:t,url:s,data:(i||{}).data}))}});W.forEach(["post","put","patch"],function(t){function s(i){return function(l,u,h){return this.request(Yn(h||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}Zn.prototype[t]=s(),Zn.prototype[t+"Form"]=s(!0)});let Tj=class Cg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const u=new Promise(h=>{i.subscribe(h),l=h}).then(o);return u.cancel=function(){i.unsubscribe(l)},u},t(function(l,u,h){i.reason||(i.reason=new Gr(l,u,h),s(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=i=>{t.abort(i)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Cg(function(o){t=o}),cancel:t}}};function Mj(e){return function(s){return e.apply(null,s)}}function Aj(e){return W.isObject(e)&&e.isAxiosError===!0}const $u={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($u).forEach(([e,t])=>{$u[t]=e});function Pg(e){const t=new Zn(e),s=ig(Zn.prototype.request,t);return W.extend(s,Zn.prototype,t,{allOwnKeys:!0}),W.extend(s,t,null,{allOwnKeys:!0}),s.create=function(o){return Pg(Yn(e,o))},s}const ot=Pg(la);ot.Axios=Zn;ot.CanceledError=Gr;ot.CancelToken=Tj;ot.isCancel=bg;ot.VERSION=Sg;ot.toFormData=wl;ot.AxiosError=Re;ot.Cancel=ot.CanceledError;ot.all=function(t){return Promise.all(t)};ot.spread=Mj;ot.isAxiosError=Aj;ot.mergeConfig=Yn;ot.AxiosHeaders=Kt;ot.formToJSON=e=>yg(W.isHTMLForm(e)?new FormData(e):e);ot.getAdapter=kg.getAdapter;ot.HttpStatusCode=$u;ot.default=ot;const{Axios:Gk,AxiosError:Kk,CanceledError:Yk,isCancel:Xk,CancelToken:Qk,VERSION:Jk,all:eS,Cancel:tS,isAxiosError:sS,spread:nS,toFormData:rS,AxiosHeaders:Mc,HttpStatusCode:iS,formToJSON:aS,getAdapter:oS,mergeConfig:lS}=ot,Rj=new Set(["localhost","127.0.0.1","0.0.0.0","::1"]),Ij=new Set(["bff","identity","ride","booking","search","payment","wallet","payouts","notification","messaging","config"]);function zj(e){return e?!!(Rj.has(e)||Ij.has(e)||e.startsWith("127.")||/^172\.(1[6-9]|2[0-9]|3[0-1])\./.test(e)||/^10\./.test(e)||/^192\.168\./.test(e)):!1}function tr(e,t,s,i=!1){const o=`http://localhost${t?`:${t}`:""}`,l=typeof window<"u"&&typeof window.location<"u",u=l?window.location.hostname:void 0,h=l?`${window.location.protocol}//${window.location.host}`:void 0;if(i||!!(s&&h&&u&&!zj(u)))return`${h}${s}`;if(l&&u){const m=t&&t!==80&&t!==443?`:${t}`:"";return`${window.location.protocol}//${u}${m}`}return o}const Oj=tr(void 0,3003,"/api/search",!0);tr(void 0,3004,"/api/booking");const Eg=tr(void 0,3002,"/api/ride");tr(void 0,3e3,"/api/payment");const bt=tr(void 0,3e3,"/api/identity"),ca=tr(void 0,3012,"/api/messaging"),En=tr(void 0,3e3,"/api/bff",!0),Te=ot.create();let Mi,yo;function Uu(e){Mi=e||void 0}function Ka(){Mi=void 0}function Dj(e){yo=e}Te.interceptors.request.use(e=>{e.headers||(e.headers=new Mc);const t=e.headers,s=t.Authorization!==void 0||t.authorization!==void 0||t instanceof Mc&&t.has("Authorization");return Mi&&!s&&(t instanceof Mc?t.set("Authorization",`Bearer ${Mi}`):t.Authorization=`Bearer ${Mi}`),e});Te.interceptors.response.use(e=>e,e=>{var t;return((t=e==null?void 0:e.response)==null?void 0:t.status)===401&&(yo==null||yo()),Promise.reject(e)});async function Bj(e,t={}){const{from:s,to:i,date:o,seats:l,priceMax:u,departureAfter:h,departureBefore:f,sort:m}=e,g=new URLSearchParams({from:s,to:i});o&&g.set("date",o),typeof l=="number"&&g.set("seats",String(l)),typeof u=="number"&&u>0&&g.set("priceMax",String(Math.floor(u))),h&&g.set("departureAfter",h),f&&g.set("departureBefore",f),m&&g.set("sort",m);const _=`${Oj}/search?${g.toString()}`;let y,v;t.signal&&(y=ot.CancelToken.source(),t.signal.aborted?y.cancel("aborted"):(v=()=>y==null?void 0:y.cancel("aborted"),t.signal.addEventListener("abort",v)));try{const{data:k}=await Te.get(_,{withCredentials:!1,cancelToken:y==null?void 0:y.token});return k}finally{t.signal&&v&&t.signal.removeEventListener("abort",v)}}async function Qo(e){const{data:t}=await Te.get(`${Eg}/rides/${e}`);return t}async function Fj(e){const{data:t}=await Te.get(`${ca}/conversations`,{params:{userId:e}});return t}async function $j(e,t,s=100){const{data:i}=await Te.get(`${ca}/conversations/${e}/messages`,{params:{userId:t,limit:s}});return i}async function Uj(e,t){const{data:s}=await Te.post(`${ca}/conversations/${e}/read`,{userId:t});return s}async function Vu(e){const{data:t}=await Te.post(`${ca}/messages`,e);return t}async function Zu(e){const{data:t}=await Te.get(`${ca}/notifications`,{params:{userId:e}});return t}async function Vj(e){const{data:t}=await Te.post(`${En}/bookings`,e);return t}async function Zj(e){const{data:t}=await Te.post(`${En}/payments/capture`,e);return t}async function Hj(e){const{data:t}=await Te.get("/companies/me/vehicles",{params:e});return t}async function qj(e){const{data:t}=await Te.post("/companies/me/vehicles",e);return t}async function Wj(e,t){const{data:s}=await Te.patch(`/companies/me/vehicles/${e}`,t);return s}async function Gj(e){const{data:t}=await Te.delete(`/companies/me/vehicles/${e}`);return t}async function Kj(e,t){const{data:s}=await Te.get(`/companies/me/vehicles/${e}/schedules`,{params:t});return s}async function Yj(e,t){const{data:s}=await Te.post(`/companies/me/vehicles/${e}/schedules`,t);return s}async function Xj(e,t,s){const{data:i}=await Te.patch(`/companies/me/vehicles/${e}/schedules/${t}`,s);return i}async function Qj(e,t){const{data:s}=await Te.delete(`/companies/me/vehicles/${e}/schedules/${t}`);return s}async function rm(e,t){const{data:s}=await Te.get(`/admin/companies/${e}/vehicles`,{params:t});return s}async function Jj(e,t,s){const{data:i}=await Te.get(`/admin/companies/${e}/vehicles/${t}/schedules`,{params:s});return i}async function eN(e){const{data:t}=await Te.post(`${bt}/auth/register/individual`,e);return t}async function tN(e){const{data:t}=await Te.post(`${bt}/auth/register/company`,e);return t}async function sN(e){const{data:t}=await Te.post(`${bt}/auth/login`,e);return t}async function nN(e){const{data:t}=await Te.post(`${bt}/auth/password/forgot`,e);return t}async function rN(e){const{data:t}=await Te.post(`${bt}/auth/password/reset`,e);return t}async function iN(e,t={}){const{data:s}=await Te.get(`${bt}/admin/accounts`,{headers:{Authorization:`Bearer ${e}`},params:t});return s}async function aN(e,t,s){const{data:i}=await Te.patch(`${bt}/admin/accounts/${t}/status`,{status:s},{headers:{Authorization:`Bearer ${e}`}});return i}async function oN(e,t,s){const{data:i}=await Te.patch(`${bt}/admin/accounts/${t}/role`,{role:s},{headers:{Authorization:`Bearer ${e}`}});return i}async function lN(e,t,s){const{data:i}=await Te.patch(`${bt}/admin/accounts/${t}/profile`,s,{headers:{Authorization:`Bearer ${e}`}});return i}async function cN(e,t){const{data:s}=await Te.get(`${bt}/admin/accounts/${t}/activity`,{headers:{Authorization:`Bearer ${e}`}});return s}async function im(e,t,s){const{data:i}=await Te.patch(`${bt}/admin/rides/${t}`,s,{headers:{Authorization:`Bearer ${e}`}});return i}async function am(e,t){const{data:s}=await Te.post(`${bt}/admin/rides/${t}/close`,{},{headers:{Authorization:`Bearer ${e}`}});return s}async function uN(e,t){const{data:s}=await Te.post(`${bt}/admin/rides/share`,t,{headers:{Authorization:`Bearer ${e}`}});return s}async function om(e,t){const{data:s}=await Te.get("/admin/rides",{headers:{Authorization:`Bearer ${e}`},params:t});return s}async function Lg(e,t={}){const{data:s}=await Te.get(`${En}/me/bookings`,{headers:{Authorization:`Bearer ${e}`},params:t});return s}async function dN(e,t={}){const{data:s}=await Te.get(`${En}/me/rides`,{headers:{Authorization:`Bearer ${e}`},params:t});return s}async function hN(e){const{data:t}=await Te.get(`${En}/me/payment-methods`,{headers:{Authorization:`Bearer ${e}`}});return t}async function lm(e,t){const{data:s}=await Te.post(`${En}/me/payment-methods`,t,{headers:{Authorization:`Bearer ${e}`}});return s}async function fN(e,t){const{data:s}=await Te.delete(`${En}/me/payment-methods/${t}`,{headers:{Authorization:`Bearer ${e}`}});return s}async function Tg(e){const{data:t}=await Te.post(`${bt}/auth/gmail/request`,e);return t}async function Mg(e){const{data:t}=await Te.post(`${bt}/auth/gmail/verify`,e);return t}async function pN(e){const{data:t}=await Te.get(`${En}/me/profile`,{headers:{Authorization:`Bearer ${e}`}});return t}async function nh(e,t){const{data:s}=await Te.get(`${bt}/profiles/${e}/public`,{headers:{Authorization:`Bearer ${t}`}});return s}async function mN(e,t){const s={};t&&(s.Authorization=`Bearer ${t}`);const{data:i}=await Te.get(`${bt}/profiles/lookup`,{params:{email:e},headers:s});return i}async function Ag(e,t){const{data:s}=await Te.patch(`${bt}/profiles/me/individual`,t,{headers:{Authorization:`Bearer ${e}`}});return s}async function xN(e,t){const{data:s}=await Te.patch(`${bt}/profiles/me/company`,t,{headers:{Authorization:`Bearer ${e}`}});return s}async function gN(e){const t={...e,seatsAvailable:e.seatsAvailable??e.seatsTotal},{data:s}=await Te.post(`${Eg}/rides`,t);return s}const Hu="kari_token",vN=()=>typeof window<"u"?window.localStorage.getItem(Hu)??void 0:void 0,Ya=e=>{typeof window>"u"||(e?window.localStorage.setItem(Hu,e):window.localStorage.removeItem(Hu))},Jo=vN(),Rg="kari_saved_rides",yN=()=>{if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Rg);if(!e)return{};const t=JSON.parse(e);return!t||typeof t!="object"?{}:t}catch{return{}}},cm=e=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Rg,JSON.stringify(e))}catch{}},ge=i2((e,t)=>({results:[],loading:!1,passengerId:"usr-demo",token:Jo,authLoading:!1,authReady:!Jo,messageBadge:0,savedRides:yN(),rideAvailability:{},setPassenger:s=>e({passengerId:s}),setSearch:s=>e({lastSearch:s}),setResults:s=>e({results:s}),setLoading:s=>e({loading:s}),setError:s=>e({error:s}),setSession:(s,i)=>{Ya(s),Uu(s),e({token:s,account:i,authLoading:!1,authReady:!0,authError:void 0,passengerId:i.id||"usr-demo"}),t().refreshMessageBadge()},clearSession:()=>{Ya(void 0),Ka(),e({token:void 0,account:void 0,authReady:!0,authLoading:!1,authError:void 0,lastSearch:void 0,results:[],passengerId:"usr-demo",messageBadge:0})},initializeAuth:async()=>{const{authReady:s,authLoading:i}=t();if(s||i)return;const o=t().token;if(!o){Ka(),e({authReady:!0,authLoading:!1,authError:void 0});return}try{e({authLoading:!0,authError:void 0});const l=await pN(o);if(Uu(o),l.status&&l.status!=="ACTIVE"){Ya(void 0),Ka(),e({token:void 0,account:void 0,authReady:!0,authLoading:!1,authError:"Compte suspendu. Contacte le support.",passengerId:"usr-demo"});return}e({account:l,authReady:!0,authLoading:!1,authError:void 0,passengerId:l.id||"usr-demo"}),await t().refreshMessageBadge()}catch(l){Ya(void 0),Ka(),e({token:void 0,account:void 0,authReady:!0,authLoading:!1,authError:(l==null?void 0:l.message)||"Session invalide"})}},refreshMessageBadge:async()=>{const s=t().account;if(!(s!=null&&s.id)){e({messageBadge:0});return}try{const i=await Zu(s.id);e({messageBadge:i.unreadConversations})}catch{}},toggleSavedRide:s=>{e(i=>{const o={...i.savedRides};return o[s.rideId]?delete o[s.rideId]:o[s.rideId]=s,cm(o),{savedRides:o}})},removeSavedRide:s=>{e(i=>{if(!i.savedRides[s])return i;const o={...i.savedRides};return delete o[s],cm(o),{savedRides:o}})},setRideAvailability:(s,i,o)=>e(l=>{if(!s)return l;const u=l.rideAvailability[s];return u&&u.seatsAvailable===i&&(o??u.seatsTotal)===u.seatsTotal?l:{rideAvailability:{...l.rideAvailability,[s]:{seatsAvailable:i,seatsTotal:o??(u==null?void 0:u.seatsTotal),updatedAt:Date.now()}}}})}));Jo&&Uu(Jo);Dj(()=>{const e=ge.getState();e.token&&e.clearSession()});const bN=3e4;function _N(e,t,s){const i=ge(l=>e?l.rideAvailability[e]:void 0),o=ge(l=>l.setRideAvailability);return x.useEffect(()=>{!e||t===void 0||o(e,t,s)},[e,t,s,o]),x.useEffect(()=>{if(!e)return;let l=!1,u;const h=async()=>{try{const f=await Qo(e);if(!f||f!=null&&f.error||l)return;o(e,f.seatsAvailable,typeof f.seatsTotal=="number"?f.seatsTotal:s)}catch{}};return h(),typeof window<"u"&&(u=window.setInterval(h,bN)),()=>{l=!0,u&&window.clearInterval(u)}},[e,s,o]),{seatsAvailable:(i==null?void 0:i.seatsAvailable)??t??0,seatsTotal:(i==null?void 0:i.seatsTotal)??s,updatedAt:i==null?void 0:i.updatedAt}}var qu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(s,i){i(t)})(hy,function(s){var i="1.9.4";function o(n){var a,c,d,p;for(c=1,d=arguments.length;c<d;c++){p=arguments[c];for(a in p)n[a]=p[a]}return n}var l=Object.create||function(){function n(){}return function(a){return n.prototype=a,new n}}();function u(n,a){var c=Array.prototype.slice;if(n.bind)return n.bind.apply(n,c.call(arguments,1));var d=c.call(arguments,2);return function(){return n.apply(a,d.length?d.concat(c.call(arguments)):arguments)}}var h=0;function f(n){return"_leaflet_id"in n||(n._leaflet_id=++h),n._leaflet_id}function m(n,a,c){var d,p,b,E;return E=function(){d=!1,p&&(b.apply(c,p),p=!1)},b=function(){d?p=arguments:(n.apply(c,arguments),setTimeout(E,a),d=!0)},b}function g(n,a,c){var d=a[1],p=a[0],b=d-p;return n===d&&c?n:((n-p)%b+b)%b+p}function _(){return!1}function y(n,a){if(a===!1)return n;var c=Math.pow(10,a===void 0?6:a);return Math.round(n*c)/c}function v(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function k(n){return v(n).split(/\s+/)}function C(n,a){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?l(n.options):{});for(var c in a)n.options[c]=a[c];return n.options}function S(n,a,c){var d=[];for(var p in n)d.push(encodeURIComponent(c?p.toUpperCase():p)+"="+encodeURIComponent(n[p]));return(!a||a.indexOf("?")===-1?"?":"&")+d.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function w(n,a){return n.replace(j,function(c,d){var p=a[d];if(p===void 0)throw new Error("No value provided for variable "+c);return typeof p=="function"&&(p=p(a)),p})}var N=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function O(n,a){for(var c=0;c<n.length;c++)if(n[c]===a)return c;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var R=0;function V(n){var a=+new Date,c=Math.max(0,16-(a-R));return R=a+c,window.setTimeout(n,c)}var $=window.requestAnimationFrame||F("RequestAnimationFrame")||V,T=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function K(n,a,c){if(c&&$===V)n.call(a);else return $.call(window,u(n,a))}function Y(n){n&&T.call(window,n)}var ue={__proto__:null,extend:o,create:l,bind:u,get lastId(){return h},stamp:f,throttle:m,wrapNum:g,falseFn:_,formatNum:y,trim:v,splitWords:k,setOptions:C,getParamString:S,template:w,isArray:N,indexOf:O,emptyImageUrl:A,requestFn:$,cancelFn:T,requestAnimFrame:K,cancelAnimFrame:Y};function he(){}he.extend=function(n){var a=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,d=l(c);d.constructor=a,a.prototype=d;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(a[p]=this[p]);return n.statics&&o(a,n.statics),n.includes&&(ve(n.includes),o.apply(null,[d].concat(n.includes))),o(d,n),delete d.statics,delete d.includes,d.options&&(d.options=c.options?l(c.options):{},o(d.options,n.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,E=d._initHooks.length;b<E;b++)d._initHooks[b].call(this)}},a},he.include=function(n){var a=this.prototype.options;return o(this.prototype,n),n.options&&(this.prototype.options=a,this.mergeOptions(n.options)),this},he.mergeOptions=function(n){return o(this.prototype.options,n),this},he.addInitHook=function(n){var a=Array.prototype.slice.call(arguments,1),c=typeof n=="function"?n:function(){this[n].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ve(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=N(n)?n:[n];for(var a=0;a<n.length;a++)n[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(n,a,c){if(typeof n=="object")for(var d in n)this._on(d,n[d],a);else{n=k(n);for(var p=0,b=n.length;p<b;p++)this._on(n[p],a,c)}return this},off:function(n,a,c){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var d in n)this._off(d,n[d],a);else{n=k(n);for(var p=arguments.length===1,b=0,E=n.length;b<E;b++)p?this._off(n[b]):this._off(n[b],a,c)}return this},_on:function(n,a,c,d){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(n,a,c)===!1){c===this&&(c=void 0);var p={fn:a,ctx:c};d&&(p.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(p)}},_off:function(n,a,c){var d,p,b;if(this._events&&(d=this._events[n],!!d)){if(arguments.length===1){if(this._firingCount)for(p=0,b=d.length;p<b;p++)d[p].fn=_;delete this._events[n];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var E=this._listens(n,a,c);if(E!==!1){var U=d[E];this._firingCount&&(U.fn=_,this._events[n]=d=d.slice()),d.splice(E,1)}}},fire:function(n,a,c){if(!this.listens(n,c))return this;var d=o({},a,{type:n,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var p=this._events[n];if(p){this._firingCount=this._firingCount+1||1;for(var b=0,E=p.length;b<E;b++){var U=p[b],q=U.fn;U.once&&this.off(n,q,U.ctx),q.call(U.ctx||this,d)}this._firingCount--}}return c&&this._propagateEvent(d),this},listens:function(n,a,c,d){typeof n!="string"&&console.warn('"string" type argument expected');var p=a;typeof a!="function"&&(d=!!a,p=void 0,c=void 0);var b=this._events&&this._events[n];if(b&&b.length&&this._listens(n,p,c)!==!1)return!0;if(d){for(var E in this._eventParents)if(this._eventParents[E].listens(n,a,c,d))return!0}return!1},_listens:function(n,a,c){if(!this._events)return!1;var d=this._events[n]||[];if(!a)return!!d.length;c===this&&(c=void 0);for(var p=0,b=d.length;p<b;p++)if(d[p].fn===a&&d[p].ctx===c)return p;return!1},once:function(n,a,c){if(typeof n=="object")for(var d in n)this._on(d,n[d],a,!0);else{n=k(n);for(var p=0,b=n.length;p<b;p++)this._on(n[p],a,c,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[f(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[f(n)],this},_propagateEvent:function(n){for(var a in this._eventParents)this._eventParents[a].fire(n.type,o({layer:n.target,propagatedFrom:n.target},n),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var le=he.extend(Z);function M(n,a,c){this.x=c?Math.round(n):n,this.y=c?Math.round(a):a}var D=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};M.prototype={clone:function(){return new M(this.x,this.y)},add:function(n){return this.clone()._add(P(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(P(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new M(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new M(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(n){n=P(n);var a=n.x-this.x,c=n.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(n){return n=P(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=P(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function P(n,a,c){return n instanceof M?n:N(n)?new M(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new M(n.x,n.y):new M(n,a,c)}function G(n,a){if(n)for(var c=a?[n,a]:n,d=0,p=c.length;d<p;d++)this.extend(c[d])}G.prototype={extend:function(n){var a,c;if(!n)return this;if(n instanceof M||typeof n[0]=="number"||"x"in n)a=c=P(n);else if(n=J(n),a=n.min,c=n.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(n){return P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return P(this.min.x,this.max.y)},getTopRight:function(){return P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var a,c;return typeof n[0]=="number"||n instanceof M?n=P(n):n=J(n),n instanceof G?(a=n.min,c=n.max):a=c=n,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(n){n=J(n);var a=this.min,c=this.max,d=n.min,p=n.max,b=p.x>=a.x&&d.x<=c.x,E=p.y>=a.y&&d.y<=c.y;return b&&E},overlaps:function(n){n=J(n);var a=this.min,c=this.max,d=n.min,p=n.max,b=p.x>a.x&&d.x<c.x,E=p.y>a.y&&d.y<c.y;return b&&E},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var a=this.min,c=this.max,d=Math.abs(a.x-c.x)*n,p=Math.abs(a.y-c.y)*n;return J(P(a.x-d,a.y-p),P(c.x+d,c.y+p))},equals:function(n){return n?(n=J(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function J(n,a){return!n||n instanceof G?n:new G(n,a)}function H(n,a){if(n)for(var c=a?[n,a]:n,d=0,p=c.length;d<p;d++)this.extend(c[d])}H.prototype={extend:function(n){var a=this._southWest,c=this._northEast,d,p;if(n instanceof X)d=n,p=n;else if(n instanceof H){if(d=n._southWest,p=n._northEast,!d||!p)return this}else return n?this.extend(ee(n)||B(n)):this;return!a&&!c?(this._southWest=new X(d.lat,d.lng),this._northEast=new X(p.lat,p.lng)):(a.lat=Math.min(d.lat,a.lat),a.lng=Math.min(d.lng,a.lng),c.lat=Math.max(p.lat,c.lat),c.lng=Math.max(p.lng,c.lng)),this},pad:function(n){var a=this._southWest,c=this._northEast,d=Math.abs(a.lat-c.lat)*n,p=Math.abs(a.lng-c.lng)*n;return new H(new X(a.lat-d,a.lng-p),new X(c.lat+d,c.lng+p))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof X||"lat"in n?n=ee(n):n=B(n);var a=this._southWest,c=this._northEast,d,p;return n instanceof H?(d=n.getSouthWest(),p=n.getNorthEast()):d=p=n,d.lat>=a.lat&&p.lat<=c.lat&&d.lng>=a.lng&&p.lng<=c.lng},intersects:function(n){n=B(n);var a=this._southWest,c=this._northEast,d=n.getSouthWest(),p=n.getNorthEast(),b=p.lat>=a.lat&&d.lat<=c.lat,E=p.lng>=a.lng&&d.lng<=c.lng;return b&&E},overlaps:function(n){n=B(n);var a=this._southWest,c=this._northEast,d=n.getSouthWest(),p=n.getNorthEast(),b=p.lat>a.lat&&d.lat<c.lat,E=p.lng>a.lng&&d.lng<c.lng;return b&&E},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,a){return n?(n=B(n),this._southWest.equals(n.getSouthWest(),a)&&this._northEast.equals(n.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function B(n,a){return n instanceof H?n:new H(n,a)}function X(n,a,c){if(isNaN(n)||isNaN(a))throw new Error("Invalid LatLng object: ("+n+", "+a+")");this.lat=+n,this.lng=+a,c!==void 0&&(this.alt=+c)}X.prototype={equals:function(n,a){if(!n)return!1;n=ee(n);var c=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return c<=(a===void 0?1e-9:a)},toString:function(n){return"LatLng("+y(this.lat,n)+", "+y(this.lng,n)+")"},distanceTo:function(n){return je.distance(this,ee(n))},wrap:function(){return je.wrapLatLng(this)},toBounds:function(n){var a=180*n/40075017,c=a/Math.cos(Math.PI/180*this.lat);return B([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function ee(n,a,c){return n instanceof X?n:N(n)&&typeof n[0]!="object"?n.length===3?new X(n[0],n[1],n[2]):n.length===2?new X(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new X(n.lat,"lng"in n?n.lng:n.lon,n.alt):a===void 0?null:new X(n,a,c)}var pe={latLngToPoint:function(n,a){var c=this.projection.project(n),d=this.scale(a);return this.transformation._transform(c,d)},pointToLatLng:function(n,a){var c=this.scale(a),d=this.transformation.untransform(n,c);return this.projection.unproject(d)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(n),d=this.transformation.transform(a.min,c),p=this.transformation.transform(a.max,c);return new G(d,p)},infinite:!1,wrapLatLng:function(n){var a=this.wrapLng?g(n.lng,this.wrapLng,!0):n.lng,c=this.wrapLat?g(n.lat,this.wrapLat,!0):n.lat,d=n.alt;return new X(c,a,d)},wrapLatLngBounds:function(n){var a=n.getCenter(),c=this.wrapLatLng(a),d=a.lat-c.lat,p=a.lng-c.lng;if(d===0&&p===0)return n;var b=n.getSouthWest(),E=n.getNorthEast(),U=new X(b.lat-d,b.lng-p),q=new X(E.lat-d,E.lng-p);return new H(U,q)}},je=o({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(n,a){var c=Math.PI/180,d=n.lat*c,p=a.lat*c,b=Math.sin((a.lat-n.lat)*c/2),E=Math.sin((a.lng-n.lng)*c/2),U=b*b+Math.cos(d)*Math.cos(p)*E*E,q=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*q}}),ie=6378137,I={R:ie,MAX_LATITUDE:85.0511287798,project:function(n){var a=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,n.lat),-c),p=Math.sin(d*a);return new M(this.R*n.lng*a,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(n){var a=180/Math.PI;return new X((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*a,n.x*a/this.R)},bounds:function(){var n=ie*Math.PI;return new G([-n,-n],[n,n])}()};function de(n,a,c,d){if(N(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=a,this._c=c,this._d=d}de.prototype={transform:function(n,a){return this._transform(n.clone(),a)},_transform:function(n,a){return a=a||1,n.x=a*(this._a*n.x+this._b),n.y=a*(this._c*n.y+this._d),n},untransform:function(n,a){return a=a||1,new M((n.x/a-this._b)/this._a,(n.y/a-this._d)/this._c)}};function se(n,a,c,d){return new de(n,a,c,d)}var z=o({},je,{code:"EPSG:3857",projection:I,transformation:function(){var n=.5/(Math.PI*I.R);return se(n,.5,-n,.5)}()}),fe=o({},z,{code:"EPSG:900913"});function ke(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ne(n,a){var c="",d,p,b,E,U,q;for(d=0,b=n.length;d<b;d++){for(U=n[d],p=0,E=U.length;p<E;p++)q=U[p],c+=(p?"L":"M")+q.x+" "+q.y;c+=a?Se.svg?"z":"x":""}return c||"M0 0"}var Ve=document.documentElement.style,Oe="ActiveXObject"in window,Yt=Oe&&!document.addEventListener,be="msLaunchUri"in navigator&&!("documentMode"in document),ne=Ps("webkit"),De=Ps("android"),we=Ps("android 2")||Ps("android 3"),Ee=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),We=De&&Ps("Google")&&Ee<537&&!("AudioNode"in window),gt=!!window.opera,re=!be&&Ps("chrome"),Be=Ps("gecko")&&!ne&&!gt&&!Oe,Ye=!re&&Ps("safari"),tt=Ps("phantom"),_t="OTransition"in Ve,as=navigator.platform.indexOf("Win")===0,kt=Oe&&"transition"in Ve,Xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!we,gs="MozPerspective"in Ve,te=!window.L_DISABLE_3D&&(kt||Xt||gs)&&!_t&&!tt,me=typeof orientation<"u"||Ps("mobile"),Q=me&&ne,oe=me&&Xt,Ce=!window.PointerEvent&&window.MSPointerEvent,Pe=!!(window.PointerEvent||Ce),Me="ontouchstart"in window||!!window.TouchEvent,Fe=!window.L_NO_TOUCH&&(Me||Pe),Ze=me&&gt,ct=me&&Be,$t=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ln=function(){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",_,a),window.removeEventListener("testPassiveEventSupport",_,a)}catch{}return n}(),tv=function(){return!!document.createElement("canvas").getContext}(),Cl=!!(document.createElementNS&&ke("svg").createSVGRect),sv=!!Cl&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),nv=!Cl&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var a=n.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),rv=navigator.platform.indexOf("Mac")===0,iv=navigator.platform.indexOf("Linux")===0;function Ps(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var Se={ie:Oe,ielt9:Yt,edge:be,webkit:ne,android:De,android23:we,androidStock:We,opera:gt,chrome:re,gecko:Be,safari:Ye,phantom:tt,opera12:_t,win:as,ie3d:kt,webkit3d:Xt,gecko3d:gs,any3d:te,mobile:me,mobileWebkit:Q,mobileWebkit3d:oe,msPointer:Ce,pointer:Pe,touch:Fe,touchNative:Me,mobileOpera:Ze,mobileGecko:ct,retina:$t,passiveEvents:Ln,canvas:tv,svg:Cl,vml:nv,inlineSvg:sv,mac:rv,linux:iv},fh=Se.msPointer?"MSPointerDown":"pointerdown",ph=Se.msPointer?"MSPointerMove":"pointermove",mh=Se.msPointer?"MSPointerUp":"pointerup",xh=Se.msPointer?"MSPointerCancel":"pointercancel",Pl={touchstart:fh,touchmove:ph,touchend:mh,touchcancel:xh},gh={touchstart:dv,touchmove:ha,touchend:ha,touchcancel:ha},sr={},vh=!1;function av(n,a,c){return a==="touchstart"&&uv(),gh[a]?(c=gh[a].bind(this,c),n.addEventListener(Pl[a],c,!1),c):(console.warn("wrong event specified:",a),_)}function ov(n,a,c){if(!Pl[a]){console.warn("wrong event specified:",a);return}n.removeEventListener(Pl[a],c,!1)}function lv(n){sr[n.pointerId]=n}function cv(n){sr[n.pointerId]&&(sr[n.pointerId]=n)}function yh(n){delete sr[n.pointerId]}function uv(){vh||(document.addEventListener(fh,lv,!0),document.addEventListener(ph,cv,!0),document.addEventListener(mh,yh,!0),document.addEventListener(xh,yh,!0),vh=!0)}function ha(n,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in sr)a.touches.push(sr[c]);a.changedTouches=[a],n(a)}}function dv(n,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&St(a),ha(n,a)}function hv(n){var a={},c,d;for(d in n)c=n[d],a[d]=c&&c.bind?c.bind(n):c;return n=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var fv=200;function pv(n,a){n.addEventListener("dblclick",a);var c=0,d;function p(b){if(b.detail!==1){d=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var E=Nh(b);if(!(E.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!E.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var U=Date.now();U-c<=fv?(d++,d===2&&a(hv(b))):d=1,c=U}}}return n.addEventListener("click",p),{dblclick:a,simDblclick:p}}function mv(n,a){n.removeEventListener("dblclick",a.dblclick),n.removeEventListener("click",a.simDblclick)}var El=ma(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Kr=ma(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bh=Kr==="webkitTransition"||Kr==="OTransition"?Kr+"End":"transitionend";function _h(n){return typeof n=="string"?document.getElementById(n):n}function Yr(n,a){var c=n.style[a]||n.currentStyle&&n.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(n,null);c=d?d[a]:null}return c==="auto"?null:c}function Ge(n,a,c){var d=document.createElement(n);return d.className=a||"",c&&c.appendChild(d),d}function nt(n){var a=n.parentNode;a&&a.removeChild(n)}function fa(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function nr(n){var a=n.parentNode;a&&a.lastChild!==n&&a.appendChild(n)}function rr(n){var a=n.parentNode;a&&a.firstChild!==n&&a.insertBefore(n,a.firstChild)}function Ll(n,a){if(n.classList!==void 0)return n.classList.contains(a);var c=pa(n);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function Ie(n,a){if(n.classList!==void 0)for(var c=k(a),d=0,p=c.length;d<p;d++)n.classList.add(c[d]);else if(!Ll(n,a)){var b=pa(n);Tl(n,(b?b+" ":"")+a)}}function ut(n,a){n.classList!==void 0?n.classList.remove(a):Tl(n,v((" "+pa(n)+" ").replace(" "+a+" "," ")))}function Tl(n,a){n.className.baseVal===void 0?n.className=a:n.className.baseVal=a}function pa(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function os(n,a){"opacity"in n.style?n.style.opacity=a:"filter"in n.style&&xv(n,a)}function xv(n,a){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=n.filters.item(d)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):n.style.filter+=" progid:"+d+"(opacity="+a+")"}function ma(n){for(var a=document.documentElement.style,c=0;c<n.length;c++)if(n[c]in a)return n[c];return!1}function Tn(n,a,c){var d=a||new M(0,0);n.style[El]=(Se.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")}function ft(n,a){n._leaflet_pos=a,Se.any3d?Tn(n,a):(n.style.left=a.x+"px",n.style.top=a.y+"px")}function Mn(n){return n._leaflet_pos||new M(0,0)}var Xr,Qr,Ml;if("onselectstart"in document)Xr=function(){Ae(window,"selectstart",St)},Qr=function(){Xe(window,"selectstart",St)};else{var Jr=ma(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xr=function(){if(Jr){var n=document.documentElement.style;Ml=n[Jr],n[Jr]="none"}},Qr=function(){Jr&&(document.documentElement.style[Jr]=Ml,Ml=void 0)}}function Al(){Ae(window,"dragstart",St)}function Rl(){Xe(window,"dragstart",St)}var xa,Il;function zl(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(ga(),xa=n,Il=n.style.outlineStyle,n.style.outlineStyle="none",Ae(window,"keydown",ga))}function ga(){xa&&(xa.style.outlineStyle=Il,xa=void 0,Il=void 0,Xe(window,"keydown",ga))}function wh(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Ol(n){var a=n.getBoundingClientRect();return{x:a.width/n.offsetWidth||1,y:a.height/n.offsetHeight||1,boundingClientRect:a}}var gv={__proto__:null,TRANSFORM:El,TRANSITION:Kr,TRANSITION_END:bh,get:_h,getStyle:Yr,create:Ge,remove:nt,empty:fa,toFront:nr,toBack:rr,hasClass:Ll,addClass:Ie,removeClass:ut,setClass:Tl,getClass:pa,setOpacity:os,testProp:ma,setTransform:Tn,setPosition:ft,getPosition:Mn,get disableTextSelection(){return Xr},get enableTextSelection(){return Qr},disableImageDrag:Al,enableImageDrag:Rl,preventOutline:zl,restoreOutline:ga,getSizedParentNode:wh,getScale:Ol};function Ae(n,a,c,d){if(a&&typeof a=="object")for(var p in a)Bl(n,p,a[p],c);else{a=k(a);for(var b=0,E=a.length;b<E;b++)Bl(n,a[b],c,d)}return this}var Es="_leaflet_events";function Xe(n,a,c,d){if(arguments.length===1)jh(n),delete n[Es];else if(a&&typeof a=="object")for(var p in a)Fl(n,p,a[p],c);else if(a=k(a),arguments.length===2)jh(n,function(U){return O(a,U)!==-1});else for(var b=0,E=a.length;b<E;b++)Fl(n,a[b],c,d);return this}function jh(n,a){for(var c in n[Es]){var d=c.split(/\d/)[0];(!a||a(d))&&Fl(n,d,null,null,c)}}var Dl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bl(n,a,c,d){var p=a+f(c)+(d?"_"+f(d):"");if(n[Es]&&n[Es][p])return this;var b=function(U){return c.call(d||n,U||window.event)},E=b;!Se.touchNative&&Se.pointer&&a.indexOf("touch")===0?b=av(n,a,b):Se.touch&&a==="dblclick"?b=pv(n,b):"addEventListener"in n?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?n.addEventListener(Dl[a]||a,b,Se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(b=function(U){U=U||window.event,Ul(n,U)&&E(U)},n.addEventListener(Dl[a],b,!1)):n.addEventListener(a,E,!1):n.attachEvent("on"+a,b),n[Es]=n[Es]||{},n[Es][p]=b}function Fl(n,a,c,d,p){p=p||a+f(c)+(d?"_"+f(d):"");var b=n[Es]&&n[Es][p];if(!b)return this;!Se.touchNative&&Se.pointer&&a.indexOf("touch")===0?ov(n,a,b):Se.touch&&a==="dblclick"?mv(n,b):"removeEventListener"in n?n.removeEventListener(Dl[a]||a,b,!1):n.detachEvent("on"+a,b),n[Es][p]=null}function An(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function $l(n){return Bl(n,"wheel",An),this}function ei(n){return Ae(n,"mousedown touchstart dblclick contextmenu",An),n._leaflet_disable_click=!0,this}function St(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Rn(n){return St(n),An(n),this}function Nh(n){if(n.composedPath)return n.composedPath();for(var a=[],c=n.target;c;)a.push(c),c=c.parentNode;return a}function kh(n,a){if(!a)return new M(n.clientX,n.clientY);var c=Ol(a),d=c.boundingClientRect;return new M((n.clientX-d.left)/c.x-a.clientLeft,(n.clientY-d.top)/c.y-a.clientTop)}var vv=Se.linux&&Se.chrome?window.devicePixelRatio:Se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Sh(n){return Se.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/vv:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Ul(n,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==n;)c=c.parentNode}catch{return!1}return c!==n}var yv={__proto__:null,on:Ae,off:Xe,stopPropagation:An,disableScrollPropagation:$l,disableClickPropagation:ei,preventDefault:St,stop:Rn,getPropagationPath:Nh,getMousePosition:kh,getWheelDelta:Sh,isExternalTarget:Ul,addListener:Ae,removeListener:Xe},Ch=le.extend({run:function(n,a,c,d){this.stop(),this._el=n,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=Mn(n),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(n){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),n):(this._runFrame(1),this._complete())},_runFrame:function(n,a){var c=this._startPos.add(this._offset.multiplyBy(n));a&&c._round(),ft(this._el,c),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),He=le.extend({options:{crs:z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,a){a=C(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ee(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Kr&&Se.any3d&&!Se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ae(this._proxy,bh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),n=this._limitCenter(ee(n),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=o({animate:c.animate},c.zoom),c.pan=o({animate:c.animate,duration:c.duration},c.pan));var d=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,a,c.zoom):this._tryAnimatedPan(n,c.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(n,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(n,a){return this._loaded?this.setView(this.getCenter(),n,{zoom:a}):(this._zoom=n,this)},zoomIn:function(n,a){return n=n||(Se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,a)},zoomOut:function(n,a){return n=n||(Se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,a)},setZoomAround:function(n,a,c){var d=this.getZoomScale(a),p=this.getSize().divideBy(2),b=n instanceof M?n:this.latLngToContainerPoint(n),E=b.subtract(p).multiplyBy(1-1/d),U=this.containerPointToLatLng(p.add(E));return this.setView(U,a,{zoom:c})},_getBoundsCenterZoom:function(n,a){a=a||{},n=n.getBounds?n.getBounds():B(n);var c=P(a.paddingTopLeft||a.padding||[0,0]),d=P(a.paddingBottomRight||a.padding||[0,0]),p=this.getBoundsZoom(n,!1,c.add(d));if(p=typeof a.maxZoom=="number"?Math.min(a.maxZoom,p):p,p===1/0)return{center:n.getCenter(),zoom:p};var b=d.subtract(c).divideBy(2),E=this.project(n.getSouthWest(),p),U=this.project(n.getNorthEast(),p),q=this.unproject(E.add(U).divideBy(2).add(b),p);return{center:q,zoom:p}},fitBounds:function(n,a){if(n=B(n),!n.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(n,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,a){return this.setView(n,this._zoom,{pan:a})},panBy:function(n,a){if(n=P(n).round(),a=a||{},!n.x&&!n.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ch,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,a,c){if(c=c||{},c.animate===!1||!Se.any3d)return this.setView(n,a,c);this._stop();var d=this.project(this.getCenter()),p=this.project(n),b=this.getSize(),E=this._zoom;n=ee(n),a=a===void 0?E:a;var U=Math.max(b.x,b.y),q=U*this.getZoomScale(E,a),ae=p.distanceTo(d)||1,xe=1.42,Le=xe*xe;function $e(pt){var Ea=pt?-1:1,oy=pt?q:U,ly=q*q-U*U+Ea*Le*Le*ae*ae,cy=2*oy*Le*ae,Jl=ly/cy,lf=Math.sqrt(Jl*Jl+1)-Jl,uy=lf<1e-9?-18:Math.log(lf);return uy}function It(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function wt(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function cs(pt){return It(pt)/wt(pt)}var Ut=$e(0);function ur(pt){return U*(wt(Ut)/wt(Ut+xe*pt))}function ny(pt){return U*(wt(Ut)*cs(Ut+xe*pt)-It(Ut))/Le}function ry(pt){return 1-Math.pow(1-pt,1.5)}var iy=Date.now(),af=($e(1)-Ut)/xe,ay=c.duration?1e3*c.duration:1e3*af*.8;function of(){var pt=(Date.now()-iy)/ay,Ea=ry(pt)*af;pt<=1?(this._flyToFrame=K(of,this),this._move(this.unproject(d.add(p.subtract(d).multiplyBy(ny(Ea)/ae)),E),this.getScaleZoom(U/ur(Ea),E),{flyTo:!0})):this._move(n,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),of.call(this),this},flyToBounds:function(n,a){var c=this._getBoundsCenterZoom(n,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(n){return n=B(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var a=this.options.minZoom;return this.options.minZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var a=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,a){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,B(n));return c.equals(d)||this.panTo(d,a),this._enforcingBounds=!1,this},panInside:function(n,a){a=a||{};var c=P(a.paddingTopLeft||a.padding||[0,0]),d=P(a.paddingBottomRight||a.padding||[0,0]),p=this.project(this.getCenter()),b=this.project(n),E=this.getPixelBounds(),U=J([E.min.add(c),E.max.subtract(d)]),q=U.getSize();if(!U.contains(b)){this._enforcingBounds=!0;var ae=b.subtract(U.getCenter()),xe=U.extend(b).getSize().subtract(q);p.x+=ae.x<0?-xe.x:xe.x,p.y+=ae.y<0?-xe.y:xe.y,this.panTo(this.unproject(p),a),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=o({animate:!1,pan:!0},n===!0?{animate:!0}:n);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=a.divideBy(2).round(),p=c.divideBy(2).round(),b=d.subtract(p);return!b.x&&!b.y?this:(n.animate&&n.pan?this.panBy(b):(n.pan&&this._rawPanBy(b),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=o({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=u(this._handleGeolocationResponse,this),c=u(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,n):navigator.geolocation.getCurrentPosition(a,c,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var a=n.code,c=n.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var a=n.coords.latitude,c=n.coords.longitude,d=new X(a,c),p=d.toBounds(n.coords.accuracy*2),b=this._locateOptions;if(b.setView){var E=this.getBoundsZoom(p);this.setView(d,b.maxZoom?Math.min(E,b.maxZoom):E)}var U={latlng:d,bounds:p,timestamp:n.timestamp};for(var q in n.coords)typeof n.coords[q]=="number"&&(U[q]=n.coords[q]);this.fire("locationfound",U)}},addHandler:function(n,a){if(!a)return this;var c=this[n]=new a(this);return this._handlers.push(c),this.options[n]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),nt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)nt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,a){var c="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),d=Ge("div",c,a||this._mapPane);return n&&(this._panes[n]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),a=this.unproject(n.getBottomLeft()),c=this.unproject(n.getTopRight());return new H(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,a,c){n=B(n),c=P(c||[0,0]);var d=this.getZoom()||0,p=this.getMinZoom(),b=this.getMaxZoom(),E=n.getNorthWest(),U=n.getSouthEast(),q=this.getSize().subtract(c),ae=J(this.project(U,d),this.project(E,d)).getSize(),xe=Se.any3d?this.options.zoomSnap:1,Le=q.x/ae.x,$e=q.y/ae.y,It=a?Math.max(Le,$e):Math.min(Le,$e);return d=this.getScaleZoom(It,d),xe&&(d=Math.round(d/(xe/100))*(xe/100),d=a?Math.ceil(d/xe)*xe:Math.floor(d/xe)*xe),Math.max(p,Math.min(b,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,a){var c=this._getTopLeftPoint(n,a);return new G(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(n)/c.scale(a)},getScaleZoom:function(n,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var d=c.zoom(n*c.scale(a));return isNaN(d)?1/0:d},project:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ee(n),a)},unproject:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(P(n),a)},layerPointToLatLng:function(n){var a=P(n).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(n){var a=this.project(ee(n))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(ee(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(B(n))},distance:function(n,a){return this.options.crs.distance(ee(n),ee(a))},containerPointToLayerPoint:function(n){return P(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return P(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var a=this.containerPointToLayerPoint(P(n));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ee(n)))},mouseEventToContainerPoint:function(n){return kh(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var a=this._container=_h(n);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ae(a,"scroll",this._onScroll,this),this._containerId=f(a)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&Se.any3d,Ie(n,"leaflet-container"+(Se.touch?" leaflet-touch":"")+(Se.retina?" leaflet-retina":"")+(Se.ielt9?" leaflet-oldie":"")+(Se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Yr(n,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ft(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(n.markerPane,"leaflet-zoom-hide"),Ie(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,a,c){ft(this._mapPane,new M(0,0));var d=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var p=this._zoom!==a;this._moveStart(p,c)._move(n,a)._moveEnd(p),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(n,a){return n&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(n,a,c,d){a===void 0&&(a=this._zoom);var p=this._zoom!==a;return this._zoom=a,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),d?c&&c.pinch&&this.fire("zoom",c):((p||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){ft(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[f(this._container)]=this;var a=n?Xe:Ae;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),Se.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,a){for(var c=[],d,p=a==="mouseout"||a==="mouseover",b=n.target||n.srcElement,E=!1;b;){if(d=this._targets[f(b)],d&&(a==="click"||a==="preclick")&&this._draggableMoved(d)){E=!0;break}if(d&&d.listens(a,!0)&&(p&&!Ul(b,n)||(c.push(d),p))||b===this._container)break;b=b.parentNode}return!c.length&&!E&&!p&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var a=n.target||n.srcElement;if(!(!this._loaded||a._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(a))){var c=n.type;c==="mousedown"&&zl(a),this._fireDOMEvent(n,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,a,c){if(n.type==="click"){var d=o({},n);d.type="preclick",this._fireDOMEvent(d,d.type,c)}var p=this._findEventTargets(n,a);if(c){for(var b=[],E=0;E<c.length;E++)c[E].listens(a,!0)&&b.push(c[E]);p=b.concat(p)}if(p.length){a==="contextmenu"&&St(n);var U=p[0],q={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var ae=U.getLatLng&&(!U._radius||U._radius<=10);q.containerPoint=ae?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(n),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=ae?U.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(E=0;E<p.length;E++)if(p[E].fire(a,q,!0),q.originalEvent._stopped||p[E].options.bubblingMouseEvents===!1&&O(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,a=this._handlers.length;n<a;n++)this._handlers[n].disable()},whenReady:function(n,a){return this._loaded?n.call(a||this,{target:this}):this.on("load",n,a),this},_getMapPanePos:function(){return Mn(this._mapPane)||new M(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,a){var c=n&&a!==void 0?this._getNewPixelOrigin(n,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,a){var c=this.getSize()._divideBy(2);return this.project(n,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,a,c){var d=this._getNewPixelOrigin(c,a);return this.project(n,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(n,a,c){var d=this._getNewPixelOrigin(c,a);return J([this.project(n.getSouthWest(),a)._subtract(d),this.project(n.getNorthWest(),a)._subtract(d),this.project(n.getSouthEast(),a)._subtract(d),this.project(n.getNorthEast(),a)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,a,c){if(!c)return n;var d=this.project(n,a),p=this.getSize().divideBy(2),b=new G(d.subtract(p),d.add(p)),E=this._getBoundsOffset(b,c,a);return Math.abs(E.x)<=1&&Math.abs(E.y)<=1?n:this.unproject(d.add(E),a)},_limitOffset:function(n,a){if(!a)return n;var c=this.getPixelBounds(),d=new G(c.min.add(n),c.max.add(n));return n.add(this._getBoundsOffset(d,a))},_getBoundsOffset:function(n,a,c){var d=J(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),p=d.min.subtract(n.min),b=d.max.subtract(n.max),E=this._rebound(p.x,-b.x),U=this._rebound(p.y,-b.y);return new M(E,U)},_rebound:function(n,a){return n+a>0?Math.round(n-a)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(a))},_limitZoom:function(n){var a=this.getMinZoom(),c=this.getMaxZoom(),d=Se.any3d?this.options.zoomSnap:1;return d&&(n=Math.round(n/d)*d),Math.max(a,Math.min(c,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ut(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,a){var c=this._getCenterOffset(n)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var n=this._proxy=Ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(a){var c=El,d=this._proxy.style[c];Tn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),d===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){nt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),a=this.getZoom();Tn(this._proxy,this.project(n,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(a),p=this._getCenterOffset(n)._divideBy(1-1/d);return c.animate!==!0&&!this.getSize().contains(p)?!1:(K(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(n,a,!0)},this),!0)},_animateZoom:function(n,a,c,d){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=a,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:a,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ut(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bv(n,a){return new He(n,a)}var vs=he.extend({options:{position:"topright"},initialize:function(n){C(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var a=this._map;return a&&a.removeControl(this),this.options.position=n,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var a=this._container=this.onAdd(n),c=this.getPosition(),d=n._controlCorners[c];return Ie(a,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(nt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),ti=function(n){return new vs(n)};He.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ge("div",a+"control-container",this._container);function d(p,b){var E=a+p+" "+a+b;n[p+b]=Ge("div",E,c)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)nt(this._controlCorners[n]);nt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ph=vs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,a,c,d){return c<d?-1:d<c?1:0}},initialize:function(n,a,c){C(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in n)this._addLayer(n[d],d);for(d in a)this._addLayer(a[d],d,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return vs.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,a){return this._addLayer(n,a),this._map?this._update():this},addOverlay:function(n,a){return this._addLayer(n,a,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var a=this._getLayer(f(n));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):ut(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ut(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",a=this._container=Ge("div",n),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),ei(a),$l(a);var d=this._section=Ge("section",n+"-list");c&&(this._map.on("click",this.collapse,this),Ae(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=Ge("a",n+"-toggle",a);p.href="#",p.title="Layers",p.setAttribute("role","button"),Ae(p,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){St(b),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ge("div",n+"-base",d),this._separator=Ge("div",n+"-separator",d),this._overlaysList=Ge("div",n+"-overlays",d),a.appendChild(d)},_getLayer:function(n){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&f(this._layers[a].layer)===n)return this._layers[a]},_addLayer:function(n,a,c){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(u(function(d,p){return this.options.sortFunction(d.layer,p.layer,d.name,p.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fa(this._baseLayersList),fa(this._overlaysList),this._layerControlInputs=[];var n,a,c,d,p=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),a=a||d.overlay,n=n||!d.overlay,p+=d.overlay?0:1;return this.options.hideSingleBase&&(n=n&&p>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=a&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var a=this._getLayer(f(n.target)),c=a.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(n,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(a?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(n){var a=document.createElement("label"),c=this._map.hasLayer(n.layer),d;n.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=c):d=this._createRadioElement("leaflet-base-layers_"+f(this),c),this._layerControlInputs.push(d),d.layerId=f(n.layer),Ae(d,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+n.name;var b=document.createElement("span");a.appendChild(b),b.appendChild(d),b.appendChild(p);var E=n.overlay?this._overlaysList:this._baseLayersList;return E.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,a,c,d=[],p=[];this._handlingClick=!0;for(var b=n.length-1;b>=0;b--)a=n[b],c=this._getLayer(a.layerId).layer,a.checked?d.push(c):a.checked||p.push(c);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])&&this._map.removeLayer(p[b]);for(b=0;b<d.length;b++)this._map.hasLayer(d[b])||this._map.addLayer(d[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,a,c,d=this._map.getZoom(),p=n.length-1;p>=0;p--)a=n[p],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&d<c.options.minZoom||c.options.maxZoom!==void 0&&d>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,Ae(n,"click",St),this.expand();var a=this;setTimeout(function(){Xe(n,"click",St),a._preventClick=!1})}}),_v=function(n,a,c){return new Ph(n,a,c)},Vl=vs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var a="leaflet-control-zoom",c=Ge("div",a+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,a,c,d,p){var b=Ge("a",c,d);return b.innerHTML=n,b.href="#",b.title=a,b.setAttribute("role","button"),b.setAttribute("aria-label",a),ei(b),Ae(b,"click",Rn),Ae(b,"click",p,this),Ae(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var n=this._map,a="leaflet-disabled";ut(this._zoomInButton,a),ut(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(Ie(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(Ie(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Vl,this.addControl(this.zoomControl))});var wv=function(n){return new Vl(n)},Eh=vs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var a="leaflet-control-scale",c=Ge("div",a),d=this.options;return this._addScales(d,a+"-line",c),n.on(d.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),c},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,a,c){n.metric&&(this._mScale=Ge("div",a,c)),n.imperial&&(this._iScale=Ge("div",a,c))},_update:function(){var n=this._map,a=n.getSize().y/2,c=n.distance(n.containerPointToLatLng([0,a]),n.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var a=this._getRoundNum(n),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/n)},_updateImperial:function(n){var a=n*3.2808399,c,d,p;a>5280?(c=a/5280,d=this._getRoundNum(c),this._updateScale(this._iScale,d+" mi",d/c)):(p=this._getRoundNum(a),this._updateScale(this._iScale,p+" ft",p/a))},_updateScale:function(n,a,c){n.style.width=Math.round(this.options.maxWidth*c)+"px",n.innerHTML=a},_getRoundNum:function(n){var a=Math.pow(10,(Math.floor(n)+"").length-1),c=n/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),jv=function(n){return new Eh(n)},Nv='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Zl=vs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Se.inlineSvg?Nv+" ":"")+"Leaflet</a>"},initialize:function(n){C(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Ge("div","leaflet-control-attribution"),ei(this._container);for(var a in n._layers)n._layers[a].getAttribution&&this.addAttribution(n._layers[a].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var a in this._attributions)this._attributions[a]&&n.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),n.length&&c.push(n.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&new Zl().addTo(this)});var kv=function(n){return new Zl(n)};vs.Layers=Ph,vs.Zoom=Vl,vs.Scale=Eh,vs.Attribution=Zl,ti.layers=_v,ti.zoom=wv,ti.scale=jv,ti.attribution=kv;var Ls=he.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ls.addTo=function(n,a){return n.addHandler(a,this),this};var Sv={Events:Z},Lh=Se.touch?"touchstart mousedown":"mousedown",sn=le.extend({options:{clickTolerance:3},initialize:function(n,a,c,d){C(this,d),this._element=n,this._dragStartTarget=a||n,this._preventOutline=c},enable:function(){this._enabled||(Ae(this._dragStartTarget,Lh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sn._dragging===this&&this.finishDrag(!0),Xe(this._dragStartTarget,Lh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!Ll(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){sn._dragging===this&&this.finishDrag();return}if(!(sn._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(sn._dragging=this,this._preventOutline&&zl(this._element),Al(),Xr(),!this._moving)){this.fire("down");var a=n.touches?n.touches[0]:n,c=wh(this._element);this._startPoint=new M(a.clientX,a.clientY),this._startPos=Mn(this._element),this._parentScale=Ol(c);var d=n.type==="mousedown";Ae(document,d?"mousemove":"touchmove",this._onMove,this),Ae(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var a=n.touches&&n.touches.length===1?n.touches[0]:n,c=new M(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,St(n),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),ft(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){ut(document.body,"leaflet-dragging"),this._lastTarget&&(ut(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xe(document,"mousemove touchmove",this._onMove,this),Xe(document,"mouseup touchend touchcancel",this._onUp,this),Rl(),Qr();var a=this._moved&&this._moving;this._moving=!1,sn._dragging=!1,a&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function Th(n,a,c){var d,p=[1,4,2,8],b,E,U,q,ae,xe,Le,$e;for(b=0,xe=n.length;b<xe;b++)n[b]._code=In(n[b],a);for(U=0;U<4;U++){for(Le=p[U],d=[],b=0,xe=n.length,E=xe-1;b<xe;E=b++)q=n[b],ae=n[E],q._code&Le?ae._code&Le||($e=va(ae,q,Le,a,c),$e._code=In($e,a),d.push($e)):(ae._code&Le&&($e=va(ae,q,Le,a,c),$e._code=In($e,a),d.push($e)),d.push(q));n=d}return n}function Mh(n,a){var c,d,p,b,E,U,q,ae,xe;if(!n||n.length===0)throw new Error("latlngs not passed");ls(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Le=ee([0,0]),$e=B(n),It=$e.getNorthWest().distanceTo($e.getSouthWest())*$e.getNorthEast().distanceTo($e.getNorthWest());It<1700&&(Le=Hl(n));var wt=n.length,cs=[];for(c=0;c<wt;c++){var Ut=ee(n[c]);cs.push(a.project(ee([Ut.lat-Le.lat,Ut.lng-Le.lng])))}for(U=q=ae=0,c=0,d=wt-1;c<wt;d=c++)p=cs[c],b=cs[d],E=p.y*b.x-b.y*p.x,q+=(p.x+b.x)*E,ae+=(p.y+b.y)*E,U+=E*3;U===0?xe=cs[0]:xe=[q/U,ae/U];var ur=a.unproject(P(xe));return ee([ur.lat+Le.lat,ur.lng+Le.lng])}function Hl(n){for(var a=0,c=0,d=0,p=0;p<n.length;p++){var b=ee(n[p]);a+=b.lat,c+=b.lng,d++}return ee([a/d,c/d])}var Cv={__proto__:null,clipPolygon:Th,polygonCenter:Mh,centroid:Hl};function Ah(n,a){if(!a||!n.length)return n.slice();var c=a*a;return n=Lv(n,c),n=Ev(n,c),n}function Rh(n,a,c){return Math.sqrt(si(n,a,c,!0))}function Pv(n,a,c){return si(n,a,c)}function Ev(n,a){var c=n.length,d=typeof Uint8Array<"u"?Uint8Array:Array,p=new d(c);p[0]=p[c-1]=1,ql(n,p,a,0,c-1);var b,E=[];for(b=0;b<c;b++)p[b]&&E.push(n[b]);return E}function ql(n,a,c,d,p){var b=0,E,U,q;for(U=d+1;U<=p-1;U++)q=si(n[U],n[d],n[p],!0),q>b&&(E=U,b=q);b>c&&(a[E]=1,ql(n,a,c,d,E),ql(n,a,c,E,p))}function Lv(n,a){for(var c=[n[0]],d=1,p=0,b=n.length;d<b;d++)Tv(n[d],n[p])>a&&(c.push(n[d]),p=d);return p<b-1&&c.push(n[b-1]),c}var Ih;function zh(n,a,c,d,p){var b=d?Ih:In(n,c),E=In(a,c),U,q,ae;for(Ih=E;;){if(!(b|E))return[n,a];if(b&E)return!1;U=b||E,q=va(n,a,U,c,p),ae=In(q,c),U===b?(n=q,b=ae):(a=q,E=ae)}}function va(n,a,c,d,p){var b=a.x-n.x,E=a.y-n.y,U=d.min,q=d.max,ae,xe;return c&8?(ae=n.x+b*(q.y-n.y)/E,xe=q.y):c&4?(ae=n.x+b*(U.y-n.y)/E,xe=U.y):c&2?(ae=q.x,xe=n.y+E*(q.x-n.x)/b):c&1&&(ae=U.x,xe=n.y+E*(U.x-n.x)/b),new M(ae,xe,p)}function In(n,a){var c=0;return n.x<a.min.x?c|=1:n.x>a.max.x&&(c|=2),n.y<a.min.y?c|=4:n.y>a.max.y&&(c|=8),c}function Tv(n,a){var c=a.x-n.x,d=a.y-n.y;return c*c+d*d}function si(n,a,c,d){var p=a.x,b=a.y,E=c.x-p,U=c.y-b,q=E*E+U*U,ae;return q>0&&(ae=((n.x-p)*E+(n.y-b)*U)/q,ae>1?(p=c.x,b=c.y):ae>0&&(p+=E*ae,b+=U*ae)),E=n.x-p,U=n.y-b,d?E*E+U*U:new M(p,b)}function ls(n){return!N(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Oh(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ls(n)}function Dh(n,a){var c,d,p,b,E,U,q,ae;if(!n||n.length===0)throw new Error("latlngs not passed");ls(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var xe=ee([0,0]),Le=B(n),$e=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());$e<1700&&(xe=Hl(n));var It=n.length,wt=[];for(c=0;c<It;c++){var cs=ee(n[c]);wt.push(a.project(ee([cs.lat-xe.lat,cs.lng-xe.lng])))}for(c=0,d=0;c<It-1;c++)d+=wt[c].distanceTo(wt[c+1])/2;if(d===0)ae=wt[0];else for(c=0,b=0;c<It-1;c++)if(E=wt[c],U=wt[c+1],p=E.distanceTo(U),b+=p,b>d){q=(b-d)/p,ae=[U.x-q*(U.x-E.x),U.y-q*(U.y-E.y)];break}var Ut=a.unproject(P(ae));return ee([Ut.lat+xe.lat,Ut.lng+xe.lng])}var Mv={__proto__:null,simplify:Ah,pointToSegmentDistance:Rh,closestPointOnSegment:Pv,clipSegment:zh,_getEdgeIntersection:va,_getBitCode:In,_sqClosestPointOnSegment:si,isFlat:ls,_flat:Oh,polylineCenter:Dh},Wl={project:function(n){return new M(n.lng,n.lat)},unproject:function(n){return new X(n.y,n.x)},bounds:new G([-180,-90],[180,90])},Gl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var a=Math.PI/180,c=this.R,d=n.lat*a,p=this.R_MINOR/c,b=Math.sqrt(1-p*p),E=b*Math.sin(d),U=Math.tan(Math.PI/4-d/2)/Math.pow((1-E)/(1+E),b/2);return d=-c*Math.log(Math.max(U,1e-10)),new M(n.lng*a*c,d)},unproject:function(n){for(var a=180/Math.PI,c=this.R,d=this.R_MINOR/c,p=Math.sqrt(1-d*d),b=Math.exp(-n.y/c),E=Math.PI/2-2*Math.atan(b),U=0,q=.1,ae;U<15&&Math.abs(q)>1e-7;U++)ae=p*Math.sin(E),ae=Math.pow((1-ae)/(1+ae),p/2),q=Math.PI/2-2*Math.atan(b*ae)-E,E+=q;return new X(E*a,n.x*a/c)}},Av={__proto__:null,LonLat:Wl,Mercator:Gl,SphericalMercator:I},Rv=o({},je,{code:"EPSG:3395",projection:Gl,transformation:function(){var n=.5/(Math.PI*Gl.R);return se(n,.5,-n,.5)}()}),Bh=o({},je,{code:"EPSG:4326",projection:Wl,transformation:se(1/180,1,-1/180,.5)}),Iv=o({},pe,{projection:Wl,transformation:se(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,a){var c=a.lng-n.lng,d=a.lat-n.lat;return Math.sqrt(c*c+d*d)},infinite:!0});pe.Earth=je,pe.EPSG3395=Rv,pe.EPSG3857=z,pe.EPSG900913=fe,pe.EPSG4326=Bh,pe.Simple=Iv;var ys=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[f(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[f(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var a=n.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});He.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var a=f(n);return this._layers[a]?this:(this._layers[a]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var a=f(n);return this._layers[a]?(this._loaded&&n.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return f(n)in this._layers},eachLayer:function(n,a){for(var c in this._layers)n.call(a,this._layers[c]);return this},_addLayers:function(n){n=n?N(n)?n:[n]:[];for(var a=0,c=n.length;a<c;a++)this.addLayer(n[a])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[f(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var a=f(n);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,a=-1/0,c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var p=this._zoomBoundLayers[d].options;n=p.minZoom===void 0?n:Math.min(n,p.minZoom),a=p.maxZoom===void 0?a:Math.max(a,p.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=n===1/0?void 0:n,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ir=ys.extend({initialize:function(n,a){C(this,a),this._layers={};var c,d;if(n)for(c=0,d=n.length;c<d;c++)this.addLayer(n[c])},addLayer:function(n){var a=this.getLayerId(n);return this._layers[a]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var a=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(n){var a=typeof n=="number"?n:this.getLayerId(n);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var a=Array.prototype.slice.call(arguments,1),c,d;for(c in this._layers)d=this._layers[c],d[n]&&d[n].apply(d,a);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,a){for(var c in this._layers)n.call(a,this._layers[c]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return f(n)}}),zv=function(n,a){return new ir(n,a)},Fs=ir.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),ir.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),ir.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new H;for(var a in this._layers){var c=this._layers[a];n.extend(c.getBounds?c.getBounds():c.getLatLng())}return n}}),Ov=function(n,a){return new Fs(n,a)},ar=he.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){C(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,a){var c=this._getIconUrl(n);if(!c){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(d,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(n,a){var c=this.options,d=c[a+"Size"];typeof d=="number"&&(d=[d,d]);var p=P(d),b=P(a==="shadow"&&c.shadowAnchor||c.iconAnchor||p&&p.divideBy(2,!0));n.className="leaflet-marker-"+a+" "+(c.className||""),b&&(n.style.marginLeft=-b.x+"px",n.style.marginTop=-b.y+"px"),p&&(n.style.width=p.x+"px",n.style.height=p.y+"px")},_createImg:function(n,a){return a=a||document.createElement("img"),a.src=n,a},_getIconUrl:function(n){return Se.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Dv(n){return new ar(n)}var ni=ar.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof ni.imagePath!="string"&&(ni.imagePath=this._detectIconPath()),(this.options.imagePath||ni.imagePath)+ar.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var a=function(c,d,p){var b=d.exec(c);return b&&b[p]};return n=a(n,/^url\((['"])?(.+)\1\)$/,2),n&&a(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Ge("div","leaflet-default-icon-path",document.body),a=Yr(n,"background-image")||Yr(n,"backgroundImage");if(document.body.removeChild(n),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Fh=Ls.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new sn(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ut(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var a=this._marker,c=a._map,d=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,b=Mn(a._icon),E=c.getPixelBounds(),U=c.getPixelOrigin(),q=J(E.min._subtract(U).add(p),E.max._subtract(U).subtract(p));if(!q.contains(b)){var ae=P((Math.max(q.max.x,b.x)-q.max.x)/(E.max.x-q.max.x)-(Math.min(q.min.x,b.x)-q.min.x)/(E.min.x-q.min.x),(Math.max(q.max.y,b.y)-q.max.y)/(E.max.y-q.max.y)-(Math.min(q.min.y,b.y)-q.min.y)/(E.min.y-q.min.y)).multiplyBy(d);c.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),ft(a._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=K(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,n)))},_onDrag:function(n){var a=this._marker,c=a._shadow,d=Mn(a._icon),p=a._map.layerPointToLatLng(d);c&&ft(c,d),a._latlng=p,n.latlng=p,n.oldLatLng=this._oldLatLng,a.fire("move",n).fire("drag",n)},_onDragEnd:function(n){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),ya=ys.extend({options:{icon:new ni,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,a){C(this,a),this._latlng=ee(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var a=this._latlng;return this._latlng=ee(n),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=n.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,n.title&&(c.title=n.title),c.tagName==="IMG"&&(c.alt=n.alt||"")),Ie(c,a),n.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ae(c,"focus",this._panOnFocus,this);var p=n.icon.createShadow(this._shadow),b=!1;p!==this._shadow&&(this._removeShadow(),b=!0),p&&(Ie(p,a),p.alt=""),this._shadow=p,n.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&b&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(this._icon,"focus",this._panOnFocus,this),nt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&nt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&ft(this._icon,n),this._shadow&&ft(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Fh)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Fh(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&os(this._icon,n),this._shadow&&os(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var a=this.options.icon.options,c=a.iconSize?P(a.iconSize):P(0,0),d=a.iconAnchor?P(a.iconAnchor):P(0,0);n.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:c.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Bv(n,a){return new ya(n,a)}var nn=ys.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return C(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ba=nn.extend({options:{fill:!0,radius:10},initialize:function(n,a){C(this,a),this._latlng=ee(n),this._radius=this.options.radius},setLatLng:function(n){var a=this._latlng;return this._latlng=ee(n),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var a=n&&n.radius||this._radius;return nn.prototype.setStyle.call(this,n),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,a=this._radiusY||n,c=this._clickTolerance(),d=[n+c,a+c];this._pxBounds=new G(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Fv(n,a){return new ba(n,a)}var Kl=ba.extend({initialize:function(n,a,c){if(typeof a=="number"&&(a=o({},c,{radius:a})),C(this,a),this._latlng=ee(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:nn.prototype.setStyle,_project:function(){var n=this._latlng.lng,a=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===je.distance){var p=Math.PI/180,b=this._mRadius/je.R/p,E=c.project([a+b,n]),U=c.project([a-b,n]),q=E.add(U).divideBy(2),ae=c.unproject(q).lat,xe=Math.acos((Math.cos(b*p)-Math.sin(a*p)*Math.sin(ae*p))/(Math.cos(a*p)*Math.cos(ae*p)))/p;(isNaN(xe)||xe===0)&&(xe=b/Math.cos(Math.PI/180*a)),this._point=q.subtract(c.getPixelOrigin()),this._radius=isNaN(xe)?0:q.x-c.project([ae,n-xe]).x,this._radiusY=q.y-E.y}else{var Le=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Le).x}this._updateBounds()}});function $v(n,a,c){return new Kl(n,a,c)}var $s=nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,a){C(this,a),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var a=1/0,c=null,d=si,p,b,E=0,U=this._parts.length;E<U;E++)for(var q=this._parts[E],ae=1,xe=q.length;ae<xe;ae++){p=q[ae-1],b=q[ae];var Le=d(n,p,b,!0);Le<a&&(a=Le,c=d(n,p,b))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,a){return a=a||this._defaultShape(),n=ee(n),a.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new H,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return ls(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var a=[],c=ls(n),d=0,p=n.length;d<p;d++)c?(a[d]=ee(n[d]),this._bounds.extend(a[d])):a[d]=this._convertLatLngs(n[d]);return a},_project:function(){var n=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),a=new M(n,n);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(n,a,c){var d=n[0]instanceof X,p=n.length,b,E;if(d){for(E=[],b=0;b<p;b++)E[b]=this._map.latLngToLayerPoint(n[b]),c.extend(E[b]);a.push(E)}else for(b=0;b<p;b++)this._projectLatlngs(n[b],a,c)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,d,p,b,E,U,q;for(c=0,p=0,b=this._rings.length;c<b;c++)for(q=this._rings[c],d=0,E=q.length;d<E-1;d++)U=zh(q[d],q[d+1],n,d,!0),U&&(a[p]=a[p]||[],a[p].push(U[0]),(U[1]!==q[d+1]||d===E-2)&&(a[p].push(U[1]),p++))}},_simplifyPoints:function(){for(var n=this._parts,a=this.options.smoothFactor,c=0,d=n.length;c<d;c++)n[c]=Ah(n[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,a){var c,d,p,b,E,U,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(c=0,b=this._parts.length;c<b;c++)for(U=this._parts[c],d=0,E=U.length,p=E-1;d<E;p=d++)if(!(!a&&d===0)&&Rh(n,U[p],U[d])<=q)return!0;return!1}});function Uv(n,a){return new $s(n,a)}$s._flat=Oh;var or=$s.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var a=$s.prototype._convertLatLngs.call(this,n),c=a.length;return c>=2&&a[0]instanceof X&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(n){$s.prototype._setLatLngs.call(this,n),ls(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ls(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,a=this.options.weight,c=new M(a,a);if(n=new G(n.min.subtract(c),n.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,p=this._rings.length,b;d<p;d++)b=Th(this._rings[d],n,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var a=!1,c,d,p,b,E,U,q,ae;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(b=0,q=this._parts.length;b<q;b++)for(c=this._parts[b],E=0,ae=c.length,U=ae-1;E<ae;U=E++)d=c[E],p=c[U],d.y>n.y!=p.y>n.y&&n.x<(p.x-d.x)*(n.y-d.y)/(p.y-d.y)+d.x&&(a=!a);return a||$s.prototype._containsPoint.call(this,n,!0)}});function Vv(n,a){return new or(n,a)}var Us=Fs.extend({initialize:function(n,a){C(this,a),this._layers={},n&&this.addData(n)},addData:function(n){var a=N(n)?n:n.features,c,d,p;if(a){for(c=0,d=a.length;c<d;c++)p=a[c],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var b=this.options;if(b.filter&&!b.filter(n))return this;var E=_a(n,b);return E?(E.feature=Na(n),E.defaultOptions=E.options,this.resetStyle(E),b.onEachFeature&&b.onEachFeature(n,E),this.addLayer(E)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=o({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(a){this._setLayerStyle(a,n)},this)},_setLayerStyle:function(n,a){n.setStyle&&(typeof a=="function"&&(a=a(n.feature)),n.setStyle(a))}});function _a(n,a){var c=n.type==="Feature"?n.geometry:n,d=c?c.coordinates:null,p=[],b=a&&a.pointToLayer,E=a&&a.coordsToLatLng||Yl,U,q,ae,xe;if(!d&&!c)return null;switch(c.type){case"Point":return U=E(d),$h(b,n,U,a);case"MultiPoint":for(ae=0,xe=d.length;ae<xe;ae++)U=E(d[ae]),p.push($h(b,n,U,a));return new Fs(p);case"LineString":case"MultiLineString":return q=wa(d,c.type==="LineString"?0:1,E),new $s(q,a);case"Polygon":case"MultiPolygon":return q=wa(d,c.type==="Polygon"?1:2,E),new or(q,a);case"GeometryCollection":for(ae=0,xe=c.geometries.length;ae<xe;ae++){var Le=_a({geometry:c.geometries[ae],type:"Feature",properties:n.properties},a);Le&&p.push(Le)}return new Fs(p);case"FeatureCollection":for(ae=0,xe=c.features.length;ae<xe;ae++){var $e=_a(c.features[ae],a);$e&&p.push($e)}return new Fs(p);default:throw new Error("Invalid GeoJSON object.")}}function $h(n,a,c,d){return n?n(a,c):new ya(c,d&&d.markersInheritOptions&&d)}function Yl(n){return new X(n[1],n[0],n[2])}function wa(n,a,c){for(var d=[],p=0,b=n.length,E;p<b;p++)E=a?wa(n[p],a-1,c):(c||Yl)(n[p]),d.push(E);return d}function Xl(n,a){return n=ee(n),n.alt!==void 0?[y(n.lng,a),y(n.lat,a),y(n.alt,a)]:[y(n.lng,a),y(n.lat,a)]}function ja(n,a,c,d){for(var p=[],b=0,E=n.length;b<E;b++)p.push(a?ja(n[b],ls(n[b])?0:a-1,c,d):Xl(n[b],d));return!a&&c&&p.length>0&&p.push(p[0].slice()),p}function lr(n,a){return n.feature?o({},n.feature,{geometry:a}):Na(a)}function Na(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Ql={toGeoJSON:function(n){return lr(this,{type:"Point",coordinates:Xl(this.getLatLng(),n)})}};ya.include(Ql),Kl.include(Ql),ba.include(Ql),$s.include({toGeoJSON:function(n){var a=!ls(this._latlngs),c=ja(this._latlngs,a?1:0,!1,n);return lr(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),or.include({toGeoJSON:function(n){var a=!ls(this._latlngs),c=a&&!ls(this._latlngs[0]),d=ja(this._latlngs,c?2:a?1:0,!0,n);return a||(d=[d]),lr(this,{type:(c?"Multi":"")+"Polygon",coordinates:d})}}),ir.include({toMultiPoint:function(n){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(n).geometry.coordinates)}),lr(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(n){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(n);var c=a==="GeometryCollection",d=[];return this.eachLayer(function(p){if(p.toGeoJSON){var b=p.toGeoJSON(n);if(c)d.push(b.geometry);else{var E=Na(b);E.type==="FeatureCollection"?d.push.apply(d,E.features):d.push(E)}}}),c?lr(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Uh(n,a){return new Us(n,a)}var Zv=Uh,ka=ys.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,a,c){this._url=n,this._bounds=B(a),C(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){nt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&nr(this._image),this},bringToBack:function(){return this._map&&rr(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=B(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",a=this._image=n?this._url:Ge("img");if(Ie(a,"leaflet-image-layer"),this._zoomAnimated&&Ie(a,"leaflet-zoom-animated"),this.options.className&&Ie(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onload=u(this.fire,this,"load"),a.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(n){var a=this._map.getZoomScale(n.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Tn(this._image,c,a)},_reset:function(){var n=this._image,a=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();ft(n,a.min),n.style.width=c.x+"px",n.style.height=c.y+"px"},_updateOpacity:function(){os(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Hv=function(n,a,c){return new ka(n,a,c)},Vh=ka.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",a=this._image=n?this._url:Ge("video");if(Ie(a,"leaflet-image-layer"),this._zoomAnimated&&Ie(a,"leaflet-zoom-animated"),this.options.className&&Ie(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onloadeddata=u(this.fire,this,"load"),n){for(var c=a.getElementsByTagName("source"),d=[],p=0;p<c.length;p++)d.push(c[p].src);this._url=c.length>0?d:[a.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var E=Ge("source");E.src=this._url[b],a.appendChild(E)}}});function qv(n,a,c){return new Vh(n,a,c)}var Zh=ka.extend({_initImage:function(){var n=this._image=this._url;Ie(n,"leaflet-image-layer"),this._zoomAnimated&&Ie(n,"leaflet-zoom-animated"),this.options.className&&Ie(n,this.options.className),n.onselectstart=_,n.onmousemove=_}});function Wv(n,a,c){return new Zh(n,a,c)}var Ts=ys.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,a){n&&(n instanceof X||N(n))?(this._latlng=ee(n),C(this,a)):(C(this,n),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&os(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&os(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(os(this._container,0),this._removeTimeout=setTimeout(u(nt,void 0,this._container),200)):nt(this._container),this.options.interactive&&(ut(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=ee(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&nr(this._container),this},bringToBack:function(){return this._map&&rr(this._container),this},_prepareOpen:function(n){var a=this._source;if(!a._map)return!1;if(a instanceof Fs){a=null;var c=this._source._layers;for(var d in c)if(c[d]._map){a=c[d];break}if(!a)return!1;this._source=a}if(!n)if(a.getCenter)n=a.getCenter();else if(a.getLatLng)n=a.getLatLng();else if(a.getBounds)n=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")n.innerHTML=a;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),a=P(this.options.offset),c=this._getAnchor();this._zoomAnimated?ft(this._container,n.add(c)):a=a.add(n).add(c);var d=this._containerBottom=-a.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=d+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});He.include({_initOverlay:function(n,a,c,d){var p=a;return p instanceof n||(p=new n(d).setContent(a)),c&&p.setLatLng(c),p}}),ys.include({_initOverlay:function(n,a,c,d){var p=c;return p instanceof n?(C(p,d),p._source=this):(p=a&&!d?a:new n(d,this),p.setContent(c)),p}});var Sa=Ts.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,Ts.prototype.openOn.call(this,n)},onAdd:function(n){Ts.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof nn||this._source.on("preclick",An))},onRemove:function(n){Ts.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof nn||this._source.off("preclick",An))},getEvents:function(){var n=Ts.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",a=this._container=Ge("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ge("div",n+"-content-wrapper",a);if(this._contentNode=Ge("div",n+"-content",c),ei(a),$l(this._contentNode),Ae(a,"contextmenu",An),this._tipContainer=Ge("div",n+"-tip-container",a),this._tip=Ge("div",n+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=Ge("a",n+"-close-button",a);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',Ae(d,"click",function(p){St(p),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,a=n.style;a.width="",a.whiteSpace="nowrap";var c=n.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var d=n.offsetHeight,p=this.options.maxHeight,b="leaflet-popup-scrolled";p&&d>p?(a.height=p+"px",Ie(n,b)):ut(n,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),c=this._getAnchor();ft(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,a=parseInt(Yr(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,d=this._containerWidth,p=new M(this._containerLeft,-c-this._containerBottom);p._add(Mn(this._container));var b=n.layerPointToContainerPoint(p),E=P(this.options.autoPanPadding),U=P(this.options.autoPanPaddingTopLeft||E),q=P(this.options.autoPanPaddingBottomRight||E),ae=n.getSize(),xe=0,Le=0;b.x+d+q.x>ae.x&&(xe=b.x+d-ae.x+q.x),b.x-xe-U.x<0&&(xe=b.x-U.x),b.y+c+q.y>ae.y&&(Le=b.y+c-ae.y+q.y),b.y-Le-U.y<0&&(Le=b.y-U.y),(xe||Le)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([xe,Le]))}},_getAnchor:function(){return P(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gv=function(n,a){return new Sa(n,a)};He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(n,a,c){return this._initOverlay(Sa,n,a,c).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),ys.include({bindPopup:function(n,a){return this._popup=this._initOverlay(Sa,this._popup,n,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof Fs||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Rn(n);var a=n.layer||n.target;if(this._popup._source===a&&!(a instanceof nn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=a,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ca=Ts.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){Ts.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){Ts.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=Ts.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",a=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ge("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var a,c,d=this._map,p=this._container,b=d.latLngToContainerPoint(d.getCenter()),E=d.layerPointToContainerPoint(n),U=this.options.direction,q=p.offsetWidth,ae=p.offsetHeight,xe=P(this.options.offset),Le=this._getAnchor();U==="top"?(a=q/2,c=ae):U==="bottom"?(a=q/2,c=0):U==="center"?(a=q/2,c=ae/2):U==="right"?(a=0,c=ae/2):U==="left"?(a=q,c=ae/2):E.x<b.x?(U="right",a=0,c=ae/2):(U="left",a=q+(xe.x+Le.x)*2,c=ae/2),n=n.subtract(P(a,c,!0)).add(xe).add(Le),ut(p,"leaflet-tooltip-right"),ut(p,"leaflet-tooltip-left"),ut(p,"leaflet-tooltip-top"),ut(p,"leaflet-tooltip-bottom"),Ie(p,"leaflet-tooltip-"+U),ft(p,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&os(this._container,n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(a)},_getAnchor:function(){return P(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Kv=function(n,a){return new Ca(n,a)};He.include({openTooltip:function(n,a,c){return this._initOverlay(Ca,n,a,c).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),ys.include({bindTooltip:function(n,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ca,this._tooltip,n,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var a=n?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof Fs||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&(Ae(a,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),Ae(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var a=n.latlng,c,d;this._tooltip.options.sticky&&n.originalEvent&&(c=this._map.mouseEventToContainerPoint(n.originalEvent),d=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(a)}});var Hh=ar.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var a=n&&n.tagName==="DIV"?n:document.createElement("div"),c=this.options;if(c.html instanceof Element?(fa(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var d=P(c.bgPos);a.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function Yv(n){return new Hh(n)}ar.Default=ni;var ri=ys.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){C(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),nt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(nr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(rr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof M?n:new M(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var a=this.getPane().children,c=-n(-1/0,1/0),d=0,p=a.length,b;d<p;d++)b=a[d].style.zIndex,a[d]!==this._container&&b&&(c=n(c,+b));isFinite(c)&&(this.options.zIndex=c+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Se.ielt9){os(this._container,this.options.opacity);var n=+new Date,a=!1,c=!1;for(var d in this._tiles){var p=this._tiles[d];if(!(!p.current||!p.loaded)){var b=Math.min(1,(n-p.loaded)/200);os(p.el,b),b<1?a=!0:(p.active?c=!0:this._onOpaqueTile(p),p.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(Y(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,a=this.options.maxZoom;if(n!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===n?(this._levels[c].el.style.zIndex=a-Math.abs(n-c),this._onUpdateLevel(c)):(nt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var d=this._levels[n],p=this._map;return d||(d=this._levels[n]={},d.el=Ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=a,d.origin=p.project(p.unproject(p.getPixelOrigin()),n).round(),d.zoom=n,this._setZoomTransform(d,p.getCenter(),p.getZoom()),_(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var n,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)a=this._tiles[n],a.retain=a.current;for(n in this._tiles)if(a=this._tiles[n],a.current&&!a.active){var d=a.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var a in this._tiles)this._tiles[a].coords.z===n&&this._removeTile(a)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)nt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,a,c,d){var p=Math.floor(n/2),b=Math.floor(a/2),E=c-1,U=new M(+p,+b);U.z=+E;var q=this._tileCoordsToKey(U),ae=this._tiles[q];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),E>d?this._retainParent(p,b,E,d):!1)},_retainChildren:function(n,a,c,d){for(var p=2*n;p<2*n+2;p++)for(var b=2*a;b<2*a+2;b++){var E=new M(p,b);E.z=c+1;var U=this._tileCoordsToKey(E),q=this._tiles[U];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);c+1<d&&this._retainChildren(p,b,c+1,d)}},_resetView:function(n){var a=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var a=this.options;return a.minNativeZoom!==void 0&&n<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<n?a.maxNativeZoom:n},_setView:function(n,a,c,d){var p=Math.round(a);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var b=this.options.updateWhenZooming&&p!==this._tileZoom;(!d||b)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(n),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(n,a)},_setZoomTransforms:function(n,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],n,a)},_setZoomTransform:function(n,a,c){var d=this._map.getZoomScale(c,n.zoom),p=n.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(a,c)).round();Se.any3d?Tn(n.el,p,d):ft(n.el,p)},_resetGrid:function(){var n=this._map,a=n.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,a.wrapLng[0]],d).x/c.x),Math.ceil(n.project([0,a.wrapLng[1]],d).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([a.wrapLat[0],0],d).y/c.x),Math.ceil(n.project([a.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),d=a.getZoomScale(c,this._tileZoom),p=a.project(n,this._tileZoom).floor(),b=a.getSize().divideBy(d*2);return new G(p.subtract(b),p.add(b))},_update:function(n){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(n===void 0&&(n=a.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(n),p=this._pxBoundsToTileRange(d),b=p.getCenter(),E=[],U=this.options.keepBuffer,q=new G(p.getBottomLeft().subtract([U,-U]),p.getTopRight().add([U,-U]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var xe=this._tiles[ae].coords;(xe.z!==this._tileZoom||!q.contains(new M(xe.x,xe.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(n,c);return}for(var Le=p.min.y;Le<=p.max.y;Le++)for(var $e=p.min.x;$e<=p.max.x;$e++){var It=new M($e,Le);if(It.z=this._tileZoom,!!this._isValidTile(It)){var wt=this._tiles[this._tileCoordsToKey(It)];wt?wt.current=!0:E.push(It)}}if(E.sort(function(Ut,ur){return Ut.distanceTo(b)-ur.distanceTo(b)}),E.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var cs=document.createDocumentFragment();for($e=0;$e<E.length;$e++)this._addTile(E[$e],cs);this._level.el.appendChild(cs)}}}},_isValidTile:function(n){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(n.x<c.min.x||n.x>c.max.x)||!a.wrapLat&&(n.y<c.min.y||n.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(n);return B(this.options.bounds).overlaps(d)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var a=this._map,c=this.getTileSize(),d=n.scaleBy(c),p=d.add(c),b=a.unproject(d,n.z),E=a.unproject(p,n.z);return[b,E]},_tileCoordsToBounds:function(n){var a=this._tileCoordsToNwSe(n),c=new H(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var a=n.split(":"),c=new M(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(n){var a=this._tiles[n];a&&(nt(a.el),delete this._tiles[n],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){Ie(n,"leaflet-tile");var a=this.getTileSize();n.style.width=a.x+"px",n.style.height=a.y+"px",n.onselectstart=_,n.onmousemove=_,Se.ielt9&&this.options.opacity<1&&os(n,this.options.opacity)},_addTile:function(n,a){var c=this._getTilePos(n),d=this._tileCoordsToKey(n),p=this.createTile(this._wrapCoords(n),u(this._tileReady,this,n));this._initTile(p),this.createTile.length<2&&K(u(this._tileReady,this,n,null,p)),ft(p,c),this._tiles[d]={el:p,coords:n,current:!0},a.appendChild(p),this.fire("tileloadstart",{tile:p,coords:n})},_tileReady:function(n,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:n});var d=this._tileCoordsToKey(n);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(os(c.el,0),Y(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(Ie(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Se.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var a=new M(this._wrapX?g(n.x,this._wrapX):n.x,this._wrapY?g(n.y,this._wrapY):n.y);return a.z=n.z,a},_pxBoundsToTileRange:function(n){var a=this.getTileSize();return new G(n.min.unscaleBy(a).floor(),n.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function Xv(n){return new ri(n)}var cr=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,a){this._url=n,a=C(this,a),a.detectRetina&&Se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,a){return this._url===n&&a===void 0&&(a=!0),this._url=n,a||this.redraw(),this},createTile:function(n,a){var c=document.createElement("img");return Ae(c,"load",u(this._tileOnLoad,this,a,c)),Ae(c,"error",u(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(n),c},getTileUrl:function(n){var a={r:Se.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-n.y;this.options.tms&&(a.y=c),a["-y"]=c}return w(this._url,o(a,this.options))},_tileOnLoad:function(n,a){Se.ielt9?setTimeout(u(n,this,null,a),0):n(null,a)},_tileOnError:function(n,a,c){var d=this.options.errorTileUrl;d&&a.getAttribute("src")!==d&&(a.src=d),n(c,a)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset;return c&&(n=a-n),n+d},_getSubdomain:function(n){var a=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var n,a;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(a=this._tiles[n].el,a.onload=_,a.onerror=_,!a.complete)){a.src=A;var c=this._tiles[n].coords;nt(a),delete this._tiles[n],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(n){var a=this._tiles[n];if(a)return a.el.setAttribute("src",A),ri.prototype._removeTile.call(this,n)},_tileReady:function(n,a,c){if(!(!this._map||c&&c.getAttribute("src")===A))return ri.prototype._tileReady.call(this,n,a,c)}});function qh(n,a){return new cr(n,a)}var Wh=cr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,a){this._url=n;var c=o({},this.defaultWmsParams);for(var d in a)d in this.options||(c[d]=a[d]);a=C(this,a);var p=a.detectRetina&&Se.retina?2:1,b=this.getTileSize();c.width=b.x*p,c.height=b.y*p,this.wmsParams=c},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,cr.prototype.onAdd.call(this,n)},getTileUrl:function(n){var a=this._tileCoordsToNwSe(n),c=this._crs,d=J(c.project(a[0]),c.project(a[1])),p=d.min,b=d.max,E=(this._wmsVersion>=1.3&&this._crs===Bh?[p.y,p.x,b.y,b.x]:[p.x,p.y,b.x,b.y]).join(","),U=cr.prototype.getTileUrl.call(this,n);return U+S(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+E},setParams:function(n,a){return o(this.wmsParams,n),a||this.redraw(),this}});function Qv(n,a){return new Wh(n,a)}cr.WMS=Wh,qh.wms=Qv;var Vs=ys.extend({options:{padding:.1},initialize:function(n){C(this,n),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,a){var c=this._map.getZoomScale(a,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,a),b=d.multiplyBy(-c).add(p).subtract(this._map._getNewPixelOrigin(n,a));Se.any3d?Tn(this._container,b,c):ft(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-n)).round();this._bounds=new G(c,c.add(a.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gh=Vs.extend({options:{tolerance:0},getEvents:function(){var n=Vs.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vs.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");Ae(n,"mousemove",this._onMouseMove,this),Ae(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ae(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,nt(this._container),Xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var a in this._layers)n=this._layers[a],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vs.prototype._update.call(this);var n=this._bounds,a=this._container,c=n.getSize(),d=Se.retina?2:1;ft(a,n.min),a.width=d*c.x,a.height=d*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",Se.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){Vs.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[f(n)]=n;var a=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var a=n._order,c=a.next,d=a.prev;c?c.prev=d:this._drawLast=d,d?d.next=c:this._drawFirst=c,delete n._order,delete this._layers[f(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var a=n.options.dashArray.split(/[, ]+/),c=[],d,p;for(p=0;p<a.length;p++){if(d=Number(a[p]),isNaN(d))return;c.push(d)}n.options._dashArray=c}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var a=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(n._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(n._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var a=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)n=d.layer,(!a||n._pxBounds&&n._pxBounds.intersects(a))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,a){if(this._drawing){var c,d,p,b,E=n._parts,U=E.length,q=this._ctx;if(U){for(q.beginPath(),c=0;c<U;c++){for(d=0,p=E[c].length;d<p;d++)b=E[c][d],q[d?"lineTo":"moveTo"](b.x,b.y);a&&q.closePath()}this._fillStroke(q,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var a=n._point,c=this._ctx,d=Math.max(Math.round(n._radius),1),p=(Math.max(Math.round(n._radiusY),1)||d)/d;p!==1&&(c.save(),c.scale(1,p)),c.beginPath(),c.arc(a.x,a.y/p,d,0,Math.PI*2,!1),p!==1&&c.restore(),this._fillStroke(c,n)}},_fillStroke:function(n,a){var c=a.options;c.fill&&(n.globalAlpha=c.fillOpacity,n.fillStyle=c.fillColor||c.color,n.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(n.setLineDash&&n.setLineDash(a.options&&a.options._dashArray||[]),n.globalAlpha=c.opacity,n.lineWidth=c.weight,n.strokeStyle=c.color,n.lineCap=c.lineCap,n.lineJoin=c.lineJoin,n.stroke())},_onClick:function(n){for(var a=this._map.mouseEventToLayerPoint(n),c,d,p=this._drawFirst;p;p=p.next)c=p.layer,c.options.interactive&&c._containsPoint(a)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(c))&&(d=c);this._fireEvent(d?[d]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,a)}},_handleMouseOut:function(n){var a=this._hoveredLayer;a&&(ut(this._container,"leaflet-interactive"),this._fireEvent([a],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,a){if(!this._mouseHoverThrottled){for(var c,d,p=this._drawFirst;p;p=p.next)c=p.layer,c.options.interactive&&c._containsPoint(a)&&(d=c);d!==this._hoveredLayer&&(this._handleMouseOut(n),d&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([d],n,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,a,c){this._map._fireDOMEvent(a,c||a.type,n)},_bringToFront:function(n){var a=n._order;if(a){var c=a.next,d=a.prev;if(c)c.prev=d;else return;d?d.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(n)}},_bringToBack:function(n){var a=n._order;if(a){var c=a.next,d=a.prev;if(d)d.next=c;else return;c?c.prev=d:d&&(this._drawLast=d),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(n)}}});function Kh(n){return Se.canvas?new Gh(n):null}var ii=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Jv={_initContainer:function(){this._container=Ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vs.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var a=n._container=ii("shape");Ie(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",n._path=ii("path"),a.appendChild(n._path),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){var a=n._container;this._container.appendChild(a),n.options.interactive&&n.addInteractiveTarget(a)},_removePath:function(n){var a=n._container;nt(a),n.removeInteractiveTarget(a),delete this._layers[f(n)]},_updateStyle:function(n){var a=n._stroke,c=n._fill,d=n.options,p=n._container;p.stroked=!!d.stroke,p.filled=!!d.fill,d.stroke?(a||(a=n._stroke=ii("stroke")),p.appendChild(a),a.weight=d.weight+"px",a.color=d.color,a.opacity=d.opacity,d.dashArray?a.dashStyle=N(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=d.lineCap.replace("butt","flat"),a.joinstyle=d.lineJoin):a&&(p.removeChild(a),n._stroke=null),d.fill?(c||(c=n._fill=ii("fill")),p.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(p.removeChild(c),n._fill=null)},_updateCircle:function(n){var a=n._point.round(),c=Math.round(n._radius),d=Math.round(n._radiusY||c);this._setPath(n,n._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+d+" 0,"+65535*360)},_setPath:function(n,a){n._path.v=a},_bringToFront:function(n){nr(n._container)},_bringToBack:function(n){rr(n._container)}},Pa=Se.vml?ii:ke,ai=Vs.extend({_initContainer:function(){this._container=Pa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){nt(this._container),Xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vs.prototype._update.call(this);var n=this._bounds,a=n.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),ft(c,n.min),c.setAttribute("viewBox",[n.min.x,n.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(n){var a=n._path=Pa("path");n.options.className&&Ie(a,n.options.className),n.options.interactive&&Ie(a,"leaflet-interactive"),this._updateStyle(n),this._layers[f(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){nt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[f(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var a=n._path,c=n.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(n,a){this._setPath(n,Ne(n._parts,a))},_updateCircle:function(n){var a=n._point,c=Math.max(Math.round(n._radius),1),d=Math.max(Math.round(n._radiusY),1)||c,p="a"+c+","+d+" 0 1,0 ",b=n._empty()?"M0 0":"M"+(a.x-c)+","+a.y+p+c*2+",0 "+p+-c*2+",0 ";this._setPath(n,b)},_setPath:function(n,a){n._path.setAttribute("d",a)},_bringToFront:function(n){nr(n._path)},_bringToBack:function(n){rr(n._path)}});Se.vml&&ai.include(Jv);function Yh(n){return Se.svg||Se.vml?new ai(n):null}He.include({getRenderer:function(n){var a=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var a=this._paneRenderers[n];return a===void 0&&(a=this._createRenderer({pane:n}),this._paneRenderers[n]=a),a},_createRenderer:function(n){return this.options.preferCanvas&&Kh(n)||Yh(n)}});var Xh=or.extend({initialize:function(n,a){or.prototype.initialize.call(this,this._boundsToLatLngs(n),a)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=B(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function ey(n,a){return new Xh(n,a)}ai.create=Pa,ai.pointsToPath=Ne,Us.geometryToLayer=_a,Us.coordsToLatLng=Yl,Us.coordsToLatLngs=wa,Us.latLngToCoords=Xl,Us.latLngsToCoords=ja,Us.getFeature=lr,Us.asFeature=Na,He.mergeOptions({boxZoom:!0});var Qh=Ls.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){nt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xr(),Al(),this._startPoint=this._map.mouseEventToContainerPoint(n),Ae(document,{contextmenu:Rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Ge("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var a=new G(this._point,this._startPoint),c=a.getSize();ft(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(nt(this._box),ut(this._container,"leaflet-crosshair")),Qr(),Rl(),Xe(document,{contextmenu:Rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var a=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});He.addInitHook("addHandler","boxZoom",Qh),He.mergeOptions({doubleClickZoom:!0});var Jh=Ls.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var a=this._map,c=a.getZoom(),d=a.options.zoomDelta,p=n.originalEvent.shiftKey?c-d:c+d;a.options.doubleClickZoom==="center"?a.setZoom(p):a.setZoomAround(n.containerPoint,p)}});He.addInitHook("addHandler","doubleClickZoom",Jh),He.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ef=Ls.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new sn(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ut(this._map._container,"leaflet-grab"),ut(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=B(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,a){return n-(n-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;n.x<a.min.x&&(n.x=this._viscousLimit(n.x,a.min.x)),n.y<a.min.y&&(n.y=this._viscousLimit(n.y,a.min.y)),n.x>a.max.x&&(n.x=this._viscousLimit(n.x,a.max.x)),n.y>a.max.y&&(n.y=this._viscousLimit(n.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,a=Math.round(n/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,p=(d-a+c)%n+a-c,b=(d+a+c)%n-a-c,E=Math.abs(p+c)<Math.abs(b+c)?p:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=E},_onDragEnd:function(n){var a=this._map,c=a.options,d=!c.inertia||n.noInertia||this._times.length<2;if(a.fire("dragend",n),d)a.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,E=c.easeLinearity,U=p.multiplyBy(E/b),q=U.distanceTo([0,0]),ae=Math.min(c.inertiaMaxSpeed,q),xe=U.multiplyBy(ae/q),Le=ae/(c.inertiaDeceleration*E),$e=xe.multiplyBy(-Le/2).round();!$e.x&&!$e.y?a.fire("moveend"):($e=a._limitOffset($e,a.options.maxBounds),K(function(){a.panBy($e,{duration:Le,easeLinearity:E,noMoveStart:!0,animate:!0})}))}}});He.addInitHook("addHandler","dragging",ef),He.mergeOptions({keyboard:!0,keyboardPanDelta:80});var tf=Ls.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),Ae(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,a=document.documentElement,c=n.scrollTop||a.scrollTop,d=n.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(d,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var a=this._panKeys={},c=this.keyCodes,d,p;for(d=0,p=c.left.length;d<p;d++)a[c.left[d]]=[-1*n,0];for(d=0,p=c.right.length;d<p;d++)a[c.right[d]]=[n,0];for(d=0,p=c.down.length;d<p;d++)a[c.down[d]]=[0,n];for(d=0,p=c.up.length;d<p;d++)a[c.up[d]]=[0,-1*n]},_setZoomDelta:function(n){var a=this._zoomKeys={},c=this.keyCodes,d,p;for(d=0,p=c.zoomIn.length;d<p;d++)a[c.zoomIn[d]]=n;for(d=0,p=c.zoomOut.length;d<p;d++)a[c.zoomOut[d]]=-n},_addHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=n.keyCode,c=this._map,d;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(d=this._panKeys[a],n.shiftKey&&(d=P(d).multiplyBy(3)),c.options.maxBounds&&(d=c._limitOffset(P(d),c.options.maxBounds)),c.options.worldCopyJump){var p=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(d)));c.panTo(p)}else c.panBy(d)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Rn(n)}}});He.addInitHook("addHandler","keyboard",tf),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var sf=Ls.extend({addHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var a=Sh(n),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),d),Rn(n)},_performZoom:function(){var n=this._map,a=n.getZoom(),c=this._map.options.zoomSnap||0;n._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,b=c?Math.ceil(p/c)*c:p,E=n._limitZoom(a+(this._delta>0?b:-b))-a;this._delta=0,this._startTime=null,E&&(n.options.scrollWheelZoom==="center"?n.setZoom(a+E):n.setZoomAround(this._lastMousePos,a+E))}});He.addInitHook("addHandler","scrollWheelZoom",sf);var ty=600;He.mergeOptions({tapHold:Se.touchNative&&Se.safari&&Se.mobile,tapTolerance:15});var nf=Ls.extend({addHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var a=n.touches[0];this._startPos=this._newPos=new M(a.clientX,a.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ae(document,"touchend",St),Ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),ty),Ae(document,"touchend touchcancel contextmenu",this._cancel,this),Ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Xe(document,"touchend",St),Xe(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)},_onMove:function(n){var a=n.touches[0];this._newPos=new M(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,a){var c=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});He.addInitHook("addHandler","tapHold",nf),He.mergeOptions({touchZoom:Se.touch,bounceAtZoomLimits:!0});var rf=Ls.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ut(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var a=this._map;if(!(!n.touches||n.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(n.touches[0]),d=a.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(d)._divideBy(2))),this._startDist=c.distanceTo(d),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend touchcancel",this._onTouchEnd,this),St(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(n.touches[0]),d=a.mouseEventToContainerPoint(n.touches[1]),p=c.distanceTo(d)/this._startDist;if(this._zoom=a.getScaleZoom(p,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&p<1||this._zoom>a.getMaxZoom()&&p>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var b=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(p===1&&b.x===0&&b.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var E=u(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(E,this,!0),St(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});He.addInitHook("addHandler","touchZoom",rf),He.BoxZoom=Qh,He.DoubleClickZoom=Jh,He.Drag=ef,He.Keyboard=tf,He.ScrollWheelZoom=sf,He.TapHold=nf,He.TouchZoom=rf,s.Bounds=G,s.Browser=Se,s.CRS=pe,s.Canvas=Gh,s.Circle=Kl,s.CircleMarker=ba,s.Class=he,s.Control=vs,s.DivIcon=Hh,s.DivOverlay=Ts,s.DomEvent=yv,s.DomUtil=gv,s.Draggable=sn,s.Evented=le,s.FeatureGroup=Fs,s.GeoJSON=Us,s.GridLayer=ri,s.Handler=Ls,s.Icon=ar,s.ImageOverlay=ka,s.LatLng=X,s.LatLngBounds=H,s.Layer=ys,s.LayerGroup=ir,s.LineUtil=Mv,s.Map=He,s.Marker=ya,s.Mixin=Sv,s.Path=nn,s.Point=M,s.PolyUtil=Cv,s.Polygon=or,s.Polyline=$s,s.Popup=Sa,s.PosAnimation=Ch,s.Projection=Av,s.Rectangle=Xh,s.Renderer=Vs,s.SVG=ai,s.SVGOverlay=Zh,s.TileLayer=cr,s.Tooltip=Ca,s.Transformation=de,s.Util=ue,s.VideoOverlay=Vh,s.bind=u,s.bounds=J,s.canvas=Kh,s.circle=$v,s.circleMarker=Fv,s.control=ti,s.divIcon=Yv,s.extend=o,s.featureGroup=Ov,s.geoJSON=Uh,s.geoJson=Zv,s.gridLayer=Xv,s.icon=Dv,s.imageOverlay=Hv,s.latLng=ee,s.latLngBounds=B,s.layerGroup=zv,s.map=bv,s.marker=Bv,s.point=P,s.polygon=Vv,s.polyline=Uv,s.popup=Gv,s.rectangle=ey,s.setOptions=C,s.stamp=f,s.svg=Yh,s.svgOverlay=Wv,s.tileLayer=qh,s.tooltip=Kv,s.transformation=se,s.version=i,s.videoOverlay=qv;var sy=window.L;s.noConflict=function(){return window.L=sy,this},window.L=s})})(qu,qu.exports);var ua=qu.exports;const wN=Ku(ua);function Ig(e){var t,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(s=Ig(e[t]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function zs(){for(var e,t,s=0,i="",o=arguments.length;s<o;s++)(e=arguments[s])&&(t=Ig(e))&&(i&&(i+=" "),i+=t);return i}const jN={abidjan:"building","abidjan, cote d'ivoire":"building","abidjan, cte d'ivoire":"building",yamoussoukro:"monument",bouake:"tower",bouak:"tower","san pedro":"port","san-pedro":"port",korhogo:"mountain",daloa:"leaf",man:"mountain"},um={building:`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <rect x="12" y="6" width="40" height="52" rx="10" fill="#0ea5e9"/>
  <rect x="20" y="16" width="8" height="10" fill="#e0f2fe"/>
  <rect x="36" y="16" width="8" height="10" fill="#e0f2fe"/>
  <rect x="20" y="32" width="8" height="10" fill="#e0f2fe"/>
  <rect x="36" y="32" width="8" height="10" fill="#e0f2fe"/>
  <rect x="26" y="44" width="12" height="14" rx="2" fill="#0b4f8a"/>
  </svg>`,monument:`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <path d="M8 54h48v4H8z" fill="#0b4f8a"/>
  <path d="M18 50h28l-6-16H24z" fill="#0ea5e9"/>
  <path d="M28 34h8l-2-18h-4z" fill="#0b4f8a"/>
  <circle cx="32" cy="10" r="6" fill="#0ea5e9"/>
  </svg>`,tower:`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <rect x="24" y="6" width="16" height="10" rx="3" fill="#0b4f8a"/>
  <rect x="20" y="16" width="24" height="38" rx="6" fill="#0ea5e9"/>
  <rect x="26" y="24" width="12" height="8" fill="#e0f2fe"/>
  <rect x="26" y="36" width="12" height="8" fill="#e0f2fe"/>
  <rect x="24" y="46" width="16" height="12" rx="2" fill="#0b4f8a"/>
  </svg>`,port:`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <path d="M10 48h44v10H10z" fill="#0b4f8a"/>
  <path d="M20 18h8v24h-8z" fill="#0ea5e9"/>
  <path d="M36 10h8v32h-8z" fill="#0ea5e9"/>
  <path d="M12 42c4 4 12 10 20 10s16-6 20-10" stroke="#0ea5e9" stroke-width="4" fill="none"/>
  <circle cx="24" cy="26" r="3" fill="#e0f2fe"/>
  <circle cx="40" cy="18" r="3" fill="#e0f2fe"/>
  </svg>`,mountain:`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <path d="M6 54l16-28 10 18 8-14 18 24H6z" fill="#0ea5e9"/>
  <path d="M22 26l-4 6h10z" fill="#e0f2fe"/>
  <path d="M40 26l-4 6h10z" fill="#e0f2fe"/>
  </svg>`,leaf:`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <path d="M12 36c0-14 10-24 26-24 8 0 14 3 14 3s-4 36-32 36c-6 0-8-4-8-15z" fill="#0ea5e9"/>
  <path d="M16 40c6 0 14-4 18-12" stroke="#0b4f8a" stroke-width="4" fill="none" stroke-linecap="round"/>
  </svg>`,default:`<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <path d="M32 4c-9.4 0-17 7.6-17 17 0 12.8 17 35 17 35s17-22.2 17-35c0-9.4-7.6-17-17-17z" fill="#2563eb"/>
  <circle cx="32" cy="21" r="7" fill="#e0f2fe"/>
  </svg>`},dm=new Map,NN=e=>e==null?void 0:e.trim().toLowerCase(),zg=e=>{const t=NN(e);return t?jN[t]??"default":"default"},kN=e=>{const t=zg(e);return um[t]??um.default},Og=e=>`data:image/svg+xml;utf8,${encodeURIComponent(kN(e))}`,hm=(e,t=[44,44])=>{const i=`${zg(e)}_${t.join("x")}`,o=dm.get(i);if(o)return o;const l=wN.icon({iconUrl:Og(e),iconSize:t,iconAnchor:[t[0]/2,t[1]],popupAnchor:[0,-t[1]],className:"shadow-none"});return dm.set(i,l),l},Ji=x.memo(function({city:t,size:s=18,className:i}){const o=Og(t);return r.jsx("img",{src:o,alt:"",width:s,height:s,className:zs("inline-block align-middle select-none",i),loading:"lazy"})});function el({name:e,muted:t=!1,className:s}){return r.jsxs("span",{className:zs("inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm font-semibold",t?"bg-slate-50 text-slate-600":"bg-sky-50 text-slate-900",s),children:[r.jsx(Ji,{city:e,size:18}),r.jsx("span",{className:"truncate",children:e})]})}function Dg({rideId:e,originCity:t,destinationCity:s,departureAt:i,pricePerSeat:o,seatsAvailable:l,seatsTotal:u,driverId:h,driverLabel:f,driverPhotoUrl:m,onBook:g,onDetails:_,onContact:y,contactBusy:v,variant:k="light",showPublisher:C=!0,saved:S=!1,onToggleSaved:j}){const w=ge(X=>X.account),{seatsAvailable:N,seatsTotal:O}=_N(e,l,u),A=N<=0,F=X=>{if(!X)return;const ee=X.trim();if(ee)return ee.split(/\s+/)[0]},R=new Date(i),V=R.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"}),$=R.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),T=typeof O=="number"?`${N}/${O}`:`${N}`,[K,Y]=x.useState("idle"),[ue,he]=x.useState(!1),ve=e?typeof window<"u"?`${window.location.origin}/ride/${e}`:`/ride/${e}`:void 0,Z="inline-flex items-center gap-2 rounded-2xl border px-4 py-2 text-sm font-semibold transition",le=async()=>{var X;if(ve)try{if(typeof navigator<"u"&&((X=navigator.clipboard)!=null&&X.writeText))await navigator.clipboard.writeText(ve),Y("copied");else if(typeof document<"u"){const ee=document.createElement("textarea");ee.value=ve,ee.style.position="fixed",ee.style.left="-1000px",document.body.appendChild(ee),ee.focus(),ee.select(),document.execCommand("copy"),document.body.removeChild(ee),Y("copied")}}catch{Y("error")}finally{setTimeout(()=>Y("idle"),2e3)}},M=k==="dark"?{container:"relative rounded-2xl border border-white/10 bg-slate-900/80 p-5 shadow-lg",price:"text-emerald-300",info:"text-slate-200",actionsBorder:"border-white/15 text-slate-100 hover:bg-white/10",contact:"border-emerald-400/30 bg-emerald-500/10 text-emerald-200 hover:bg-emerald-500/20",button:"bg-emerald-500 hover:bg-emerald-400 text-slate-900"}:{container:"relative rounded-2xl border border-slate-200 bg-white p-5 shadow-md shadow-slate-200/70",price:"text-slate-900",info:"text-slate-700",actionsBorder:"border-slate-200 text-slate-700 hover:bg-slate-50",contact:"border-sky-200 bg-sky-50 text-sky-600 hover:bg-sky-100",button:"bg-slate-900 text-white hover:bg-slate-800 inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-semibold"},D=f==null?void 0:f.trim(),P=h&&(w==null?void 0:w.id)===h&&(w.fullName||w.companyName||w.email)||void 0,G=D||P,J=F(G)||(G&&G.length>0?G:void 0)||"Conducteur KariGo",H=J.charAt(0).toUpperCase(),B=!!(m&&!ue);return r.jsxs("article",{className:`${M.container} ${A?"grayscale opacity-80 transition-none hover:shadow-none":""}`,children:[A&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[inherit] border border-slate-300/60 bg-slate-200/60"}),r.jsx("span",{className:"pointer-events-none absolute right-5 top-5 inline-flex items-center rounded-full bg-slate-900/80 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white mix-blend-multiply",children:"Complet"})]}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{className:"text-sm text-slate-500",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Dpart"}),r.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:[V,"  ",$]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-right",children:[r.jsxs("div",{className:"text-sm",children:[r.jsxs("p",{className:`text-2xl font-bold ${M.price}`,children:[o.toLocaleString()," XOF"]}),r.jsx("p",{className:`text-xs font-semibold ${M.info}`,children:A?"Complet":`${N} pl. (${T})`})]}),j&&r.jsx("button",{type:"button",onClick:j,className:`rounded-full border p-2 transition ${S?"border-rose-300 bg-rose-50 text-rose-600":k==="dark"?"border-white/20 text-slate-300 hover:border-rose-300 hover:text-rose-400":"border-slate-200 text-slate-500 hover:border-rose-200 hover:text-rose-500"}`,"aria-label":S?"Retirer de ma liste":"Sauvegarder ce trajet",children:r.jsx(ow,{size:16,fill:S?"currentColor":"none"})})]})]}),r.jsx("div",{className:"rounded-xl border border-slate-200 bg-white px-3 py-3 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-gradient-to-r from-sky-50 to-white px-3 py-1.5 text-sm font-semibold text-slate-900 ring-1 ring-slate-200",children:[r.jsx(Ji,{city:t}),r.jsx("span",{children:t})]}),r.jsxs("div",{className:"relative flex-1",children:[r.jsxs("svg",{viewBox:"0 0 200 30",preserveAspectRatio:"none",className:"w-full h-10",children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"waveGrad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[r.jsx("stop",{offset:"0%",stopColor:"#7dd3fc"}),r.jsx("stop",{offset:"50%",stopColor:"#38bdf8"}),r.jsx("stop",{offset:"100%",stopColor:"#0ea5e9"})]})}),r.jsx("path",{d:"M0 20 C40 10, 60 30, 100 15 S160 25, 200 12",fill:"none",stroke:"url(#waveGrad)",strokeWidth:"4",strokeLinecap:"round",className:"drop-shadow"})]}),r.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-4",children:[r.jsx("div",{className:"h-3 w-3 rounded-full bg-white ring-2 ring-sky-400 shadow-sm"}),r.jsx("div",{className:"h-3 w-3 rounded-full bg-white ring-2 ring-sky-600 shadow-sm"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-gradient-to-r from-white to-sky-50 px-3 py-1.5 text-sm font-semibold text-slate-900 ring-1 ring-slate-200",children:[r.jsx(Ji,{city:s}),r.jsx("span",{children:s})]})]})}),C&&r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[r.jsx("div",{className:"h-9 w-9 overflow-hidden rounded-full border border-slate-200 bg-white shadow-inner",children:B?r.jsx("img",{src:m||"",alt:`Photo de ${J}`,className:"h-full w-full object-cover",onError:()=>he(!0)}):r.jsx("span",{className:"flex h-full w-full items-center justify-center text-sm font-semibold",children:H})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:J}),r.jsx("p",{className:"text-[11px] text-slate-500 truncate",children:D?"Conducteur vrifi":"Trajet KariGo"})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[ve&&r.jsxs("button",{type:"button",onClick:le,className:`${Z} ${M.actionsBorder}`,children:[r.jsx(uw,{size:14}),K==="copied"?"Lien copi":K==="error"?"Impossible de copier":"Partager"]}),_&&r.jsxs("button",{type:"button",className:`${Z} ${M.actionsBorder}`,onClick:_,children:[r.jsx(cw,{size:14})," Dtails"]}),y&&r.jsx("button",{type:"button",onClick:y,disabled:v,className:`${Z} ${M.contact} disabled:opacity-50`,children:v?"Ouverture":"Contacter"}),g&&r.jsx("button",{type:"button",className:`${M.button} ${A?"cursor-not-allowed opacity-60":""}`,onClick:g,disabled:A,children:A?"Complet":"Rserver"})]})]})]})}const rh=[{id:"create_ride",label:"Publier un trajet",description:"Accder rapidement au formulaire de publication.",to:"/create"},{id:"view_messages",label:"Messages",description:"Consulter les conversations et notifications.",to:"/messages"},{id:"view_bookings",label:"Mes trajets rservs",description:"Retrouver lhistorique des rservations.",to:"/results"},{id:"explore_offers",label:"Explorer les offres",description:"Revenir  la recherche de trajets populaires.",to:"/"},{id:"profile_settings",label:"Prfrences",description:"Personnaliser ton exprience depuis la page profil.",to:"/profile"},{id:"manage_fleet",label:"Gestion de flotte",description:"Accder  la planification des vhicules (comptes entreprise).",to:"/company/fleet"}],Bg=[{id:"default",label:"Classique",gradient:"from-[#f6fbff] via-white to-[#eef5ff]",accent:"text-sky-600"},{id:"sunset",label:"Coucher de soleil",gradient:"from-[#fff4ec] via-[#ffe5dc] to-[#fff8f3]",accent:"text-amber-600"},{id:"night",label:"Nuit sereine",gradient:"from-[#030712] via-[#0f172a] to-[#020617]",accent:"text-indigo-200"}],$r={default:{gradient:"from-[#f6fbff] via-white to-[#eef5ff]",pattern:"bg-[radial-gradient(circle_at_20%_20%,rgba(14,165,233,0.12),transparent_60%)]",glow:"bg-sky-200/40",accent:"text-sky-600",hero:{badge:"bg-white/90 border border-sky-100/70 text-sky-600 shadow-sm shadow-sky-100/40",badgeIcon:"text-sky-500",title:"text-slate-900",text:"text-slate-600",card:"border border-white/60 bg-white/85 backdrop-blur-sm shadow-lg shadow-sky-100/40",cardText:"text-slate-600",iconWrap:"bg-sky-500/12 text-sky-600",iconColor:"text-sky-500",sectionTitle:"text-slate-900"},search:{panel:"border border-white/80 bg-white/95 shadow-2xl shadow-sky-100/70 backdrop-blur-xl",icon:"text-sky-500/80",fieldLg:"border-slate-200 focus:border-sky-200 focus:ring-sky-100",fieldSm:"border-slate-200 focus:border-sky-200 focus:ring-sky-100",button:"bg-sky-600 hover:bg-sky-700 text-white shadow-md shadow-sky-200/60",hint:"text-slate-500"},chips:{accent:"border-sky-200 bg-sky-50 text-sky-700",neutral:"border-slate-200 bg-white text-slate-500"},quickActions:{active:"border-sky-200 bg-sky-50 text-sky-700 shadow-sm",inactive:"border-slate-200 bg-white text-slate-600 hover:border-sky-200 hover:text-sky-600"},surface:"border border-slate-200 bg-white/85 backdrop-blur shadow-sm",surfaceMuted:"border border-slate-200 bg-slate-50/80"},sunset:{gradient:"from-[#fff4ec] via-[#ffe0d1] to-[#fff7f1]",pattern:"bg-[radial-gradient(circle_at_80%_10%,rgba(249,115,22,0.14),transparent_60%)]",glow:"bg-rose-200/40",accent:"text-amber-600",hero:{badge:"bg-white/90 border border-amber-200/70 text-amber-600 shadow-md shadow-amber-100/50",badgeIcon:"text-amber-500",title:"text-[#5b1f00]",text:"text-[#7c3a10]",card:"border border-white/60 bg-white/80 backdrop-blur-sm shadow-xl shadow-amber-100/60",cardText:"text-[#7c3a10]",iconWrap:"bg-amber-500/12 text-amber-600",iconColor:"text-amber-500",sectionTitle:"text-[#5b1f00]"},search:{panel:"border border-white/70 bg-white/95 shadow-2xl shadow-amber-100/70 backdrop-blur-xl",icon:"text-amber-500/80",fieldLg:"border-amber-100 focus:border-amber-300 focus:ring-amber-100",fieldSm:"border-amber-100 focus:border-amber-300 focus:ring-amber-100",button:"bg-amber-500 hover:bg-amber-600 text-white shadow-md shadow-amber-200/50",hint:"text-[#9f5f26]"},chips:{accent:"border-amber-200 bg-amber-50 text-amber-700",neutral:"border-[#f3d8bf] bg-white/85 text-[#9f5f26]"},quickActions:{active:"border-amber-200 bg-amber-50 text-amber-700 shadow-sm",inactive:"border-amber-100 bg-white/85 text-[#9f5f26] hover:border-amber-200 hover:text-amber-700"},surface:"border border-amber-100 bg-white/90 backdrop-blur shadow-sm",surfaceMuted:"border border-amber-100 bg-amber-50/80"},night:{gradient:"from-[#020617] via-[#0f172a] to-[#020617]",pattern:"bg-[radial-gradient(circle_at_10%_10%,rgba(129,140,248,0.18),transparent_65%)]",glow:"bg-indigo-500/20",accent:"text-indigo-200",hero:{badge:"bg-slate-900/80 border border-indigo-500/40 text-indigo-200 shadow-indigo-900/40",badgeIcon:"text-indigo-200",title:"text-white",text:"text-slate-300",card:"border border-indigo-500/30 bg-slate-900/75 backdrop-blur-xl shadow-2xl shadow-indigo-950/60",cardText:"text-slate-300",iconWrap:"bg-indigo-500/20 text-indigo-200",iconColor:"text-indigo-200",sectionTitle:"text-indigo-100"},search:{panel:"border border-indigo-500/40 bg-slate-900/80 shadow-2xl shadow-indigo-950/70 backdrop-blur-2xl",icon:"text-indigo-300/90",fieldLg:"border-slate-700 bg-slate-900/70 text-white placeholder:text-slate-400 focus:border-indigo-400 focus:ring-indigo-300/40",fieldSm:"border-slate-700 bg-slate-900/70 text-white placeholder:text-slate-400 focus:border-indigo-400 focus:ring-indigo-300/40",button:"bg-indigo-500 hover:bg-indigo-400 text-white shadow-lg shadow-indigo-900/60",hint:"text-indigo-200/70"},chips:{accent:"border-indigo-500/50 bg-indigo-500/15 text-indigo-100",neutral:"border-slate-700 bg-slate-900/70 text-slate-200"},quickActions:{active:"border-indigo-500/50 bg-indigo-500/20 text-indigo-100 shadow shadow-indigo-900/40",inactive:"border-slate-700 bg-slate-900/70 text-slate-200 hover:border-indigo-500/60 hover:text-indigo-100"},surface:"border border-indigo-500/40 bg-slate-900/75 backdrop-blur-xl shadow-lg",surfaceMuted:"border border-slate-800 bg-slate-900/70"}};function Fg(){const e=ge(m=>m.token),t=ge(m=>m.account),s=Ft(),[i,o]=x.useState(null),[l,u]=x.useState(null),h=x.useCallback(async m=>{var g,_,y;if(m!=null&&m.rideId){if(!e){u("Connecte-toi pour envoyer un message au conducteur.");return}if(!m.driverId){u("Impossible de contacter ce conducteur (identifiant absent).");return}if((t==null?void 0:t.id)===m.driverId){u("Tu es dj lauteur de ce trajet.");return}u(null),o(m.rideId);try{let v=null;try{v=await nh(m.driverId,e)}catch(S){const j=(g=S==null?void 0:S.response)==null?void 0:g.status;if(j&&j!==404)throw S}const k=(v==null?void 0:v.fullName)||(v==null?void 0:v.companyName)||(v==null?void 0:v.email)||m.driverLabel||"Conducteur KariGo",C={id:m.driverId,type:(v==null?void 0:v.type)??"INDIVIDUAL",label:k,email:v==null?void 0:v.email};s("/messages",{state:{contact:C,rideContext:{rideId:m.rideId,originCity:m.originCity,destinationCity:m.destinationCity,departureAt:m.departureAt}}})}catch(v){u(((y=(_=v==null?void 0:v.response)==null?void 0:_.data)==null?void 0:y.message)||(v==null?void 0:v.message)||"Contact impossible pour ce trajet.")}finally{o(null)}}},[t==null?void 0:t.id,e,s]),f=x.useCallback(()=>u(null),[]);return{contactDriver:h,contactingRideId:i,contactError:l,clearContactError:f}}const $g=new Map;function SN(e){return JSON.stringify({from:e.from,to:e.to,date:e.date??null,seats:e.seats??null,priceMax:e.priceMax??null,departureAfter:e.departureAfter??null,departureBefore:e.departureBefore??null,sort:e.sort??"soonest"})}function CN(e){return $g.get(e)}function PN(e,t){$g.set(e,t)}function Ug(){const e=x.useRef(null),[t,s]=x.useTransition();return x.useEffect(()=>()=>{var o;return(o=e.current)==null?void 0:o.abort()},[]),{execute:x.useCallback(async(o,l)=>{var m,g,_;const u=SN(o),h=CN(u);if(h)return s(()=>l.onSuccess(h,{fromCache:!0})),{fromCache:!0,aborted:!1};(m=e.current)==null||m.abort();const f=new AbortController;e.current=f;try{const y=await Bj(o,{signal:f.signal});return s(()=>{PN(u,y),l.onSuccess(y,{fromCache:!1})}),{fromCache:!1,aborted:!1}}catch(y){if(f.signal.aborted||ot.isCancel(y))return{fromCache:!1,aborted:!0};const v=((_=(g=y==null?void 0:y.response)==null?void 0:g.data)==null?void 0:_.message)||(y==null?void 0:y.message)||"Erreur de recherche.";return l.onError(v),{fromCache:!1,aborted:!1}}},[s]),isPending:t}}const EN=[{from:"Abidjan",to:"Yamoussoukro"},{from:"Abidjan",to:"Bouak"},{from:"Bouak",to:"Abidjan"},{from:"Yamoussoukro",to:"Daloa"}];function LN(){var Ne,Ve,Oe,Yt,be;const e=Ft(),{lastSearch:t,setSearch:s,setResults:i,setLoading:o,setError:l,loading:u,results:h,error:f}=ge(),m=ge(ne=>ne.account),g=ge(ne=>ne.savedRides),_=ge(ne=>ne.toggleSavedRide),{contactDriver:y,contactingRideId:v,contactError:k,clearContactError:C}=Fg(),{execute:S,isPending:j}=Ug(),w=x.useDeferredValue(h),N=m==null?void 0:m.homePreferences,O=(N==null?void 0:N.theme)??"default",A=$r[O]??$r.default,F=A.hero;A.chips;const R=A.quickActions,V=O==="night",$=A.surface,T=V?"text-slate-300":"text-slate-600",K=V?"text-white":"text-slate-900",Y=V?"rounded-xl border border-slate-800 bg-slate-900/70 backdrop-blur px-4 py-4 text-slate-200":"rounded-xl border border-slate-200 bg-white px-4 py-4 text-slate-600 shadow-sm",ue=V?"rounded-xl border border-slate-800 bg-slate-900/60 backdrop-blur px-4 py-4 text-slate-300":"rounded-xl border border-slate-200 bg-slate-50 px-4 py-4 text-slate-600",he=V?"rounded-xl border border-red-500/40 bg-red-500/15 px-4 py-3 text-red-200 shadow-lg shadow-red-900/30":"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-red-700",ve=((Ne=N==null?void 0:N.heroMessage)==null?void 0:Ne.trim())||"Voyage sereinement entre les villes de Cte dIvoire",Z=(N==null?void 0:N.showTips)??!0,le=(N==null?void 0:N.quickActions)??[],M=(N==null?void 0:N.favoriteRoutes)??[],D=rh.filter(ne=>le.includes(ne.id)&&(ne.id!=="manage_fleet"||(m==null?void 0:m.type)==="COMPANY")),[P,G]=x.useState({from:(t==null?void 0:t.from)??"",fromLabel:((Ve=t==null?void 0:t.fromMeta)==null?void 0:Ve.label)??(t==null?void 0:t.from)??"",fromMeta:(t==null?void 0:t.fromMeta)??null,to:(t==null?void 0:t.to)??"",toLabel:((Oe=t==null?void 0:t.toMeta)==null?void 0:Oe.label)??(t==null?void 0:t.to)??"",toMeta:(t==null?void 0:t.toMeta)??null,date:(t==null?void 0:t.date)??"",seats:(t==null?void 0:t.seats)??1,priceMax:t==null?void 0:t.priceMax,departureAfter:t==null?void 0:t.departureAfter,departureBefore:t==null?void 0:t.departureBefore,sort:(t==null?void 0:t.sort)??"soonest"});function J(ne){G(De=>({...De,...ne}))}const H=(ne,De)=>{var We,gt;const we=De.trim();if(ne&&ne.city.toLowerCase()===we.toLowerCase())return ne;const Ee=Jd(we);return Ee?{city:Ee.name,label:((We=ne==null?void 0:ne.label)==null?void 0:We.trim())||Ee.name,lat:Ee.lat,lng:Ee.lng,mode:"city"}:{city:we,label:((gt=ne==null?void 0:ne.label)==null?void 0:gt.trim())||we,lat:ne==null?void 0:ne.lat,lng:ne==null?void 0:ne.lng,distanceKm:ne==null?void 0:ne.distanceKm,accuracyMeters:ne==null?void 0:ne.accuracyMeters,note:ne==null?void 0:ne.note,mode:(ne==null?void 0:ne.mode)??"manual"}},B=ne=>ne.split(",")[0].trim();async function X(){var Ye,tt;const ne=P.from.trim(),De=P.to.trim(),we=B(ne),Ee=B(De);if(!we||!Ee){l("Renseigne dpart et arrive");return}const We=zp(we),gt=zp(Ee);if(!We&&!((Ye=P.fromMeta)!=null&&Ye.lat)){l("Slectionne un point de dpart valide.");return}if(!gt&&!((tt=P.toMeta)!=null&&tt.lat)){l("Slectionne une arrive valide.");return}if(!P.seats||P.seats<=0){l("Nombre de siges invalide");return}if(P.departureAfter&&P.departureBefore&&P.departureAfter>P.departureBefore){l("Plage horaire incohrente. Aprs doit prcder avant.");return}const re={from:we,to:Ee,date:P.date||void 0,seats:P.seats,priceMax:typeof P.priceMax=="number"&&P.priceMax>0?P.priceMax:void 0,departureAfter:P.departureAfter||void 0,departureBefore:P.departureBefore||void 0,sort:P.sort||"soonest",fromMeta:H(P.fromMeta,we),toMeta:H(P.toMeta,Ee)};s(re),o(!0),l(void 0),(await S({from:re.from,to:re.to,date:re.date,seats:re.seats,priceMax:re.priceMax,departureAfter:re.departureAfter,departureBefore:re.departureBefore,sort:re.sort},{onSuccess:_t=>i(_t),onError:_t=>l(_t)})).aborted||o(!1)}const ee=((Yt=t==null?void 0:t.fromMeta)==null?void 0:Yt.label)??(t==null?void 0:t.from)??"",pe=((be=t==null?void 0:t.toMeta)==null?void 0:be.label)??(t==null?void 0:t.to)??"",je=w.length,ie=u||j;t!=null&&t.date&&new Date(t.date).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"});const I=x.useRef(null),de=()=>{I.current&&I.current.scrollIntoView({behavior:"smooth",block:"start"})},se=(ne,De=!1)=>{G(we=>({...we,from:ne.from,fromLabel:ne.from,fromMeta:H(we.fromMeta,ne.from),to:ne.to,toLabel:ne.to,toMeta:H(we.toMeta,ne.to)})),l(void 0),De&&de()},z=()=>{t&&(G(ne=>{var De,we;return{...ne,from:t.from,fromLabel:((De=t.fromMeta)==null?void 0:De.label)??t.from,fromMeta:H(ne.fromMeta,t.from),to:t.to,toLabel:((we=t.toMeta)==null?void 0:we.label)??t.to,toMeta:H(ne.toMeta,t.to),date:t.date??ne.date,seats:t.seats??ne.seats,priceMax:t.priceMax,departureAfter:t.departureAfter,departureBefore:t.departureBefore,sort:t.sort??ne.sort}}),l(void 0),de())},fe=(M.length?M:EN).slice(0,4),ke=!!(t!=null&&t.from&&(t!=null&&t.to));return r.jsxs("div",{className:"min-h-[calc(100vh-56px)] bg-gradient-to-b from-slate-950/5 via-white to-white",children:[r.jsxs("section",{className:"relative isolate overflow-hidden section-block pb-6",children:[r.jsx("div",{className:`absolute inset-0 -z-20 bg-gradient-to-br ${A.gradient}`}),A.pattern&&r.jsx("div",{className:`absolute inset-0 -z-10 opacity-80 ${A.pattern}`}),r.jsx("div",{className:"absolute inset-y-0 right-0 -z-10 hidden lg:block",children:r.jsx("div",{className:`h-full w-72 translate-x-24 rounded-full blur-3xl ${A.glow}`})}),r.jsx("div",{className:"container-wide",children:r.jsxs("div",{className:"grid gap-10 lg:grid-cols-[minmax(0,0.45fr),minmax(0,1.65fr)] items-start",children:[r.jsxs("div",{className:"space-y-3 md:space-y-4 max-w-md",children:[r.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-4 py-1 text-xs font-semibold uppercase tracking-wide ${F.badge}`,children:[r.jsx(Yd,{size:14,className:F.badgeIcon}),"Trouve ton trajet en quelques secondes"]}),r.jsx("h1",{className:`text-2xl md:text-3xl font-bold leading-tight ${F.title}`,children:ve}),r.jsx("p",{className:`text-sm md:text-base text-slate-500 ${F.text}`,children:"Slectionne un dpart, une arrive et compare instantanment les trajets disponibles sur KariGo."}),Z&&r.jsx("div",{className:"h-2"}),r.jsx("div",{className:"h-4"})]}),r.jsxs("div",{className:"relative lg:pl-10 xl:pl-12 w-full max-w-[820px]",children:[r.jsxs("div",{ref:I,className:"rounded-3xl border-2 border-sky-200 bg-white shadow-lg shadow-sky-200/40 backdrop-blur-lg p-5 sm:p-7",children:[r.jsxs("div",{className:"mb-4 flex items-center justify-between text-slate-600 text-sm font-medium",children:[r.jsx("span",{children:"Planifie ton prochain trajet"}),r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-sky-100 px-3 py-1 text-xs font-semibold text-sky-600",children:[r.jsx(Ip,{size:12})," Recherche rapide"]})]}),r.jsx(Mw,{from:P.from,fromLabel:P.fromLabel,fromMeta:P.fromMeta,to:P.to,toLabel:P.toLabel,toMeta:P.toMeta,date:P.date,seats:P.seats,priceMax:P.priceMax,departureAfter:P.departureAfter,departureBefore:P.departureBefore,sort:P.sort,loading:u,onChange:J,onSubmit:X,theme:O,searchTheme:A.search}),D.length>0&&r.jsx("div",{className:"mt-4 flex flex-wrap gap-2 text-xs",children:D.map(ne=>r.jsxs(ze,{to:ne.to,className:`inline-flex shrink-0 items-center gap-2 rounded-full px-3 py-2 transition ${R.active}`,children:[r.jsx(Ip,{size:14,className:F.iconColor}),ne.label]},ne.id))})]}),(ke||fe.length>0)&&r.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Raccourcis intelligents"}),ke&&r.jsx("button",{type:"button",onClick:z,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-sky-200 hover:text-sky-600",children:"Reprendre la dernire recherche"})]}),fe.length>0&&r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:fe.map((ne,De)=>r.jsxs("button",{type:"button",onClick:()=>se(ne,!0),className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-sky-200 hover:text-sky-700",children:[ne.from,"  ",ne.to]},`${ne.from}-${ne.to}-${De}`))})]})]})]})})]}),r.jsx("section",{className:"section-block--compact pt-0 pb-12",children:r.jsxs("div",{className:"container-wide grid gap-8 lg:grid-cols-[minmax(0,1fr),320px]",children:[r.jsxs("div",{className:"space-y-5",children:[f&&r.jsx(fm,{message:f,onDismiss:()=>l(void 0),toneClass:he}),t&&!ie&&r.jsxs("div",{className:`flex flex-wrap items-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm ${T}`,children:[r.jsxs("span",{className:`font-semibold ${K}`,children:[je," trajet(s)"]}),r.jsxs("span",{children:[ee,"  ",pe]}),t.date&&r.jsxs("span",{children:[" ",new Date(t.date).toLocaleDateString()]}),t.seats&&r.jsxs("span",{children:[" ",t.seats," sige(s)"]})]}),k&&r.jsx(fm,{message:k,onDismiss:C,toneClass:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800"}),ie&&r.jsx("div",{className:`${ue} animate-pulse`,children:"Recherche en cours"}),!ie&&je>0&&r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:w.map(ne=>{const De=!!g[ne.rideId];return r.jsx(Dg,{...ne,onBook:()=>e(`/booking/${ne.rideId}`),onDetails:()=>e(`/ride/${ne.rideId}`),onContact:m!=null&&m.id&&ne.driverId?()=>y(ne):void 0,contactBusy:v===ne.rideId,variant:"dark",saved:De,onToggleSaved:()=>_({rideId:ne.rideId,originCity:ne.originCity,destinationCity:ne.destinationCity,departureAt:ne.departureAt,pricePerSeat:ne.pricePerSeat,seatsAvailable:ne.seatsAvailable,driverLabel:ne.driverLabel})},ne.rideId)})}),!ie&&!f&&je===0&&t&&r.jsx("div",{className:`${Y} transition`,children:"Aucun trajet ne correspond encore  cette recherche. Essaie dajuster lhoraire ou publie ton propre trajet pour informer la communaut."}),!t&&!ie&&je===0&&!f&&r.jsxs("div",{className:`${Y} transition`,children:["Renseigne un ",r.jsx("span",{className:`font-medium ${K}`,children:"dpart"}),", une"," ",r.jsx("span",{className:`font-medium ${K}`,children:"arrive"})," et une"," ",r.jsx("span",{className:`font-medium ${K}`,children:"date"})," pour voir les trajets disponibles."]})]}),r.jsxs("aside",{className:"space-y-4",children:[r.jsxs("div",{className:`rounded-2xl px-4 py-5 ${$}`,children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xd,{size:18,className:F.iconColor}),r.jsx("h2",{className:`text-sm font-semibold uppercase tracking-wide ${F.sectionTitle}`,children:"Trajets favoris"})]}),r.jsx("p",{className:`text-xs ${F.cardText}`,children:"Prremplis la recherche avec tes itinraires frquents."})]}),r.jsx("div",{className:"mt-3 scroll-chips text-sm sm:flex sm:flex-wrap sm:gap-2",children:M.length>0?M.map((ne,De)=>r.jsxs("button",{type:"button",onClick:()=>se(ne),className:`shrink-0 rounded-xl px-4 py-2 transition ${R.inactive}`,children:[ne.from,"  ",ne.to]},`${ne.from}-${ne.to}-${De}`)):r.jsx("p",{className:`text-xs ${F.cardText}`,children:"Ajoute des favoris depuis tes prfrences pour les retrouver ici."})})]}),r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-5 shadow-sm",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Besoin de publier ?"}),r.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Utilise la page ddie pour crer un trajet en masse, ajuster tes places et prvenir les passagers."}),r.jsxs(ze,{to:"/create",className:"mt-4 inline-flex items-center gap-2 text-sm text-sky-600",children:["Publier un trajet",r.jsx(es,{size:14})]})]}),r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-gradient-to-br from-slate-900 to-slate-800 px-4 py-5 text-white shadow-lg",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/70",children:"Nouveaut"}),r.jsx("p",{className:"mt-2 text-sm text-white/90",children:"Consulter tes rservations confirmes, passes et  venir depuis un espace ddi."}),r.jsxs(ze,{to:"/my-trips",className:"mt-4 inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1.5 text-xs font-semibold text-white hover:bg-white/20",children:['Ouvrir "Mes trajets"',r.jsx(es,{size:14})]})]})]})]})})]})}function fm({message:e,onDismiss:t,toneClass:s}){const i=s||"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700 shadow-sm";return r.jsxs("div",{className:`${i} flex items-start gap-3`,children:[r.jsx(Ys,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{className:"flex-1",children:e}),t&&r.jsx("button",{type:"button",onClick:t,className:"text-xs font-semibold text-inherit underline-offset-4 hover:underline",children:"OK"})]})}function TN(){var J;const e=Ft(),{lastSearch:t,results:s,setResults:i,setLoading:o,loading:l,error:u,setError:h,setSearch:f}=ge(),m=ge(H=>H.account),g=ge(H=>H.savedRides),_=ge(H=>H.toggleSavedRide),y=((J=m==null?void 0:m.homePreferences)==null?void 0:J.theme)??"default",k=($r[y]??$r.default).chips,C=y==="night"?"text-slate-300":"text-slate-600",{contactDriver:S,contactingRideId:j,contactError:w,clearContactError:N}=Fg(),{execute:O,isPending:A}=Ug(),F=x.useDeferredValue(s),R=x.useCallback(()=>({priceMax:t!=null&&t.priceMax?String(t.priceMax):"",departureAfter:(t==null?void 0:t.departureAfter)??"",departureBefore:(t==null?void 0:t.departureBefore)??"",seats:(t==null?void 0:t.seats)??1,sort:(t==null?void 0:t.sort)??"soonest"}),[t]),[V,$]=x.useState(()=>R());x.useEffect(()=>{$(R())},[R]);const T=x.useCallback(async H=>{if(!H)return;f(H),o(!0),h(void 0),(await O(H,{onSuccess:X=>i(X),onError:X=>h(X)})).aborted||o(!1)},[O,f,o,h,i]),K=x.useCallback(async()=>{t&&await T(t)},[t,T]);if(x.useEffect(()=>{K()},[K]),!t)return r.jsx("section",{className:"py-14",children:r.jsx("div",{className:"container-wide",children:r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-10 text-center shadow-sm",children:[r.jsx(MapPin,{className:"mx-auto mb-4 h-10 w-10 text-slate-400"}),r.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Commence par dfinir ton trajet"}),r.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Choisis un point de dpart, une destination et une date depuis la page daccueil pour voir les rsultats dtaills ici."}),r.jsx(ze,{to:"/",className:"mt-6 inline-flex items-center justify-center rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white",children:"Ouvrir la recherche"})]})})});const Y=t.sort==="cheapest"?"Tri : moins cher":t.sort==="seats"?"Tri : plus de places":"Tri : plus tt",ue=t.departureAfter||t.departureBefore,ve=F.length>0,Z=l||A,le=x.useMemo(()=>{const H=Number(V.priceMax);return{priceMax:V.priceMax&&Number.isFinite(H)&&H>0?Math.floor(H):void 0,departureAfter:V.departureAfter||void 0,departureBefore:V.departureBefore||void 0,seats:Math.max(1,V.seats||1),sort:V.sort}},[V]),M=x.useMemo(()=>t?le.priceMax!==(t.priceMax??void 0)||(le.departureAfter||void 0)!==(t.departureAfter??void 0)||(le.departureBefore||void 0)!==(t.departureBefore??void 0)||le.seats!==(t.seats??1)||le.sort!==(t.sort??"soonest"):!1,[t,le]),D=async()=>{if(!t)return;const H={...t,priceMax:le.priceMax,departureAfter:le.departureAfter,departureBefore:le.departureBefore,seats:le.seats,sort:le.sort};await T(H)},P=()=>{t&&$(R())},G=[{value:"soonest",label:"Dpart"},{value:"cheapest",label:"Moins cher"},{value:"seats",label:"Places"}];return r.jsx("section",{className:"py-8",children:r.jsxs("div",{className:"container-wide space-y-6",children:[r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-5 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-[220px] space-y-2",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Trajet demand"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-lg font-semibold text-slate-900",children:[r.jsx(el,{name:t.from}),r.jsx("span",{className:"text-slate-400",children:""}),r.jsx(el,{name:t.to})]})]}),r.jsxs("button",{type:"button",onClick:()=>void K(),disabled:Z,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:[r.jsx(ps,{size:14}),"Actualiser"]})]}),r.jsxs("div",{className:`mt-4 flex flex-wrap gap-2 text-xs ${C}`,children:[r.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 ${k.neutral}`,children:[r.jsx(MapPin,{size:12}),t.from,"  ",t.to]}),t.date&&r.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 ${k.neutral}`,children:[r.jsx(ss,{size:12})," ",new Date(t.date).toLocaleDateString("fr-FR")]}),t.seats&&r.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 ${k.accent}`,children:[t.seats," sige(s)"]}),t.priceMax&&r.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 ${k.accent}`,children:["Budget  ",t.priceMax.toLocaleString("fr-FR")," XOF"]}),ue&&r.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 ${k.neutral}`,children:[r.jsx(iw,{size:12}),t.departureAfter?`Aprs ${t.departureAfter}`:"",t.departureBefore?` avant ${t.departureBefore}`:""]}),r.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 ${k.neutral}`,children:Y})]})]}),t&&r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-5 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Ajuster en direct"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Modifie tri, budget ou horaires sans quitter la page."})]}),r.jsxs("button",{type:"button",onClick:P,disabled:!M,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-slate-300 disabled:opacity-40",children:[r.jsx(vw,{size:14})," Rinitialiser"]})]}),r.jsxs("form",{className:"mt-4 space-y-4",onSubmit:H=>{H.preventDefault(),D()},children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Priorit"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:G.map(H=>{const B=V.sort===H.value;return r.jsxs("button",{type:"button",onClick:()=>$(X=>({...X,sort:H.value})),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition ${B?"border-sky-200 bg-sky-50 text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[r.jsx(Mp,{size:12})," ",H.label]},H.value)})})]}),r.jsxs("div",{className:"grid gap-3 lg:grid-cols-[repeat(3,minmax(0,1fr))]",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Siges"}),r.jsx("input",{type:"number",min:1,max:10,value:V.seats,onChange:H=>$(B=>({...B,seats:Math.max(1,Number(H.currentTarget.value)||1)})),className:"h-12 w-full rounded-xl border border-slate-200 px-3 text-sm focus:border-sky-300 focus:ring-2 focus:ring-sky-100"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Budget max (XOF)"}),r.jsx("input",{type:"number",min:0,step:500,value:V.priceMax,onChange:H=>$(B=>({...B,priceMax:H.currentTarget.value})),className:"h-12 w-full rounded-xl border border-slate-200 px-3 text-sm focus:border-sky-300 focus:ring-2 focus:ring-sky-100",placeholder:"15000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Plage horaire"}),r.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[r.jsx("input",{type:"time",value:V.departureAfter,onChange:H=>$(B=>({...B,departureAfter:H.currentTarget.value})),className:"h-12 w-full rounded-xl border border-slate-200 px-3 text-sm focus:border-sky-300 focus:ring-2 focus:ring-sky-100"}),r.jsx("input",{type:"time",value:V.departureBefore,onChange:H=>$(B=>({...B,departureBefore:H.currentTarget.value})),className:"h-12 w-full rounded-xl border border-slate-200 px-3 text-sm focus:border-sky-300 focus:ring-2 focus:ring-sky-100"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs("button",{type:"submit",disabled:!M||Z,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-800 disabled:opacity-40",children:[r.jsx(Mp,{size:14})," Appliquer"]}),r.jsx("p",{className:"text-xs text-slate-500",children:M?"Rafrachit les rsultats instantanment.":"Filtres appliqus."})]})]})]}),w&&r.jsx(pm,{message:w,tone:"warning",onDismiss:N}),Z&&r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[...Array(4)].map((H,B)=>r.jsx("div",{className:"h-40 rounded-2xl border border-slate-100 bg-slate-50 animate-pulse"},B))}),u&&!Z&&r.jsx(pm,{message:u,tone:"error",onDismiss:()=>h(void 0)}),!Z&&!u&&ve&&r.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:F.map(H=>{const B=!!g[H.rideId];return r.jsx(Dg,{...H,onBook:()=>e(`/booking/${H.rideId}`),onDetails:()=>e(`/ride/${H.rideId}`),onContact:m!=null&&m.id&&H.driverId?()=>S(H):void 0,contactBusy:j===H.rideId,variant:"dark",saved:B,onToggleSaved:()=>_({rideId:H.rideId,originCity:H.originCity,destinationCity:H.destinationCity,departureAt:H.departureAt,pricePerSeat:H.pricePerSeat,seatsAvailable:H.seatsAvailable,driverLabel:H.driverLabel})},H.rideId)})}),!Z&&!u&&!ve&&r.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white px-6 py-10 text-center text-slate-600",children:[r.jsx("p",{className:"font-semibold text-slate-900",children:"Aucun trajet trouv"}),r.jsx("p",{className:"mt-2 text-sm",children:"Ajuste tes filtres ou propose un trajet pour informer les passagers intresss."}),r.jsxs("div",{className:"mt-5 flex flex-wrap items-center justify-center gap-3 text-sm",children:[r.jsx(ze,{to:"/",className:"rounded-full border border-slate-200 px-4 py-2 text-slate-600 hover:border-sky-200 hover:text-sky-600",children:"Affiner la recherche"}),r.jsx(ze,{to:"/create",className:"rounded-full bg-slate-900 px-4 py-2 font-semibold text-white hover:bg-slate-800",children:"Publier un trajet"})]})]})]})})}function pm({message:e,tone:t="error",onDismiss:s}){const i={error:"border-rose-200 bg-rose-50 text-rose-700",warning:"border-amber-200 bg-amber-50 text-amber-800"};return r.jsxs("div",{className:`rounded-3xl border px-4 py-3 text-sm ${i[t]} flex items-start gap-3`,children:[r.jsx(Ys,{size:16,className:"mt-0.5"}),r.jsx("span",{className:"flex-1",children:e}),s&&r.jsx("button",{type:"button",onClick:s,className:"text-xs font-semibold underline-offset-4 hover:underline",children:"OK"})]})}const Vg=[{id:"loading",label:"Chargement du paiement scuris",duration:900},{id:"validation",label:"Validation auprs de la banque",duration:1200}];function MN(e=Vg){return e.map(t=>({id:t.id,label:t.label,status:"pending"}))}function AN(e={}){const{onUpdate:t,signal:s,steps:i=Vg}=e,o={cancelled:!1,timers:[],rejectors:[]};let l=-1,u=MN(i);const h=()=>{o.timers.forEach(v=>clearTimeout(v)),o.timers=[],o.rejectors.forEach(v=>v()),o.rejectors=[]},f=()=>{o.cancelled||(o.cancelled=!0,h())},m=v=>{o.timers=o.timers.filter(k=>k!==v)},g=v=>{o.rejectors=o.rejectors.filter(k=>k!==v)},_=v=>new Promise((k,C)=>{if(o.cancelled){C(new Error("cancelled"));return}const S=setTimeout(()=>{m(S),g(j),o.cancelled?C(new Error("cancelled")):k()},v),j=()=>{m(S),g(j),C(new Error("cancelled"))};o.timers.push(S),o.rejectors.push(j)});return s&&(s.aborted?f():s.addEventListener("abort",f)),t==null||t({index:l,steps:u}),{promise:(async()=>{for(let v=0;v<i.length;v+=1){if(o.cancelled)throw new Error("cancelled");if(l=v,u=u.map((k,C)=>C<v?{...k,status:"done"}:C===v?{...k,status:"active"}:{...k,status:"pending"}),t==null||t({index:l,steps:u}),await _(i[v].duration),o.cancelled)throw new Error("cancelled");u=u.map((k,C)=>C<=v?{...k,status:"done"}:k),t==null||t({index:l,steps:u})}})().catch(v=>{if((v==null?void 0:v.message)!=="cancelled")throw v}).finally(()=>{s&&s.removeEventListener("abort",f),h()}),cancel:f,getCurrentIndex:()=>l,getSnapshot:()=>u}}function RN(){var as,kt,Xt,gs;const{rideId:e}=Gd(),t=Ft(),{results:s,passengerId:i,token:o,setRideAvailability:l}=ge(te=>({results:te.results,passengerId:te.passengerId,token:te.token,setRideAvailability:te.setRideAvailability})),u=x.useMemo(()=>s.find(te=>te.rideId===e),[e,s]),[h,f]=x.useState(u),[m,g]=x.useState(!1),[_,y]=x.useState();x.useEffect(()=>{u&&f(u)},[u]),x.useEffect(()=>{if(u||!e)return;let te=!1;return(async()=>{try{g(!0);const me=await Qo(e);if(!me||me.error)throw new Error("Trajet introuvable");const Q={rideId:me.id,originCity:me.originCity,destinationCity:me.destinationCity,departureAt:me.departureAt,pricePerSeat:me.pricePerSeat,seatsTotal:me.seatsTotal,seatsAvailable:me.seatsAvailable,driverId:me.driverId,status:me.status};te||(f(Q),l(Q.rideId,Q.seatsAvailable,Q.seatsTotal))}catch(me){te||y((me==null?void 0:me.message)||"Trajet introuvable")}finally{te||g(!1)}})(),()=>{te=!0}},[u,e,l]);const[v,k]=x.useState(1);x.useEffect(()=>{h&&h.seatsAvailable>0&&v>h.seatsAvailable&&k(h.seatsAvailable)},[h==null?void 0:h.seatsAvailable]);const[C,S]=x.useState(!1),[j,w]=x.useState(),[N,O]=x.useState(),[A,F]=x.useState(),[R,V]=x.useState(!1),[$,T]=x.useState(),[K,Y]=x.useState(),[ue,he]=x.useState([]),ve=x.useRef(null),[Z,le]=x.useState([]),[M,D]=x.useState(!1),[P,G]=x.useState(),[J,H]=x.useState("cash"),[B,X]=x.useState(!1),[ee,pe]=x.useState(!1),[je,ie]=x.useState("CARD"),[I,de]=x.useState({holder:"",number:"",expiry:""}),[se,z]=x.useState({provider:"MTN Money",phone:""}),[fe,ke]=x.useState({provider:"MTN Money",phone:""}),[Ne,Ve]=x.useState(!1),Oe=J==="cash"?{type:"CASH",label:"Paiement en espces"}:J==="mobile-instant"?{type:"MOBILE_MONEY",label:`${fe.provider} ${fe.phone||""}`.trim()||"Mobile money instantan",provider:fe.provider,phoneNumber:fe.phone}:Z.find(te=>te.id===J);x.useEffect(()=>()=>{var te;(te=ve.current)==null||te.cancel(),ve.current=null},[]);const Yt=x.useCallback(async()=>{if(e)try{const te=await Qo(e);if(!te||te!=null&&te.error)return;const me={rideId:te.id,originCity:te.originCity,destinationCity:te.destinationCity,departureAt:te.departureAt,pricePerSeat:te.pricePerSeat,seatsTotal:te.seatsTotal,seatsAvailable:te.seatsAvailable,driverId:te.driverId,status:te.status};f(me),l(me.rideId,me.seatsAvailable,me.seatsTotal),ge.setState(Q=>({results:Q.results.map(oe=>oe.rideId===me.rideId?{...oe,seatsAvailable:me.seatsAvailable}:oe)}))}catch{}},[e,l]),be=x.useCallback(async()=>{var te,me;if(!o){le([]),H("cash");return}try{D(!0),G(void 0);const Q=await hN(o);le(Array.isArray(Q)?Q:[]),Array.isArray(Q)&&Q.length>0&&H(oe=>oe==="cash"?Q[0].id:oe)}catch(Q){G(((me=(te=Q==null?void 0:Q.response)==null?void 0:te.data)==null?void 0:me.message)||(Q==null?void 0:Q.message)||"Impossible de charger tes moyens de paiement.")}finally{D(!1)}},[o]);if(x.useEffect(()=>{be()},[be]),m&&!h)return r.jsx("div",{className:"glass p-6 rounded-2xl",children:"Chargement du trajet"});if(!h)return r.jsx("div",{className:"glass p-6 rounded-2xl text-red-200",children:_||"Trajet introuvable."});const ne=h.seatsAvailable<=0,De=ne?0:v*h.pricePerSeat,we=new Date(h.departureAt).toLocaleString("fr-FR",{weekday:"long",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),Ee=j?"done":C?"active":"pending",We=$?"done":R?"active":j?"ready":"pending",gt=$?"done":"pending",re=[{id:"reservation",title:"Rservation",status:Ee,description:j?`Rf ${j.id}`:"Choisis tes siges et confirme."},{id:"payment",title:"Paiement",status:We,description:(Oe==null?void 0:Oe.label)||"Slectionne ton moyen favori."},{id:"confirmation",title:"Confirmation",status:gt,description:$||"Recevras ton reu automatiquement."}];async function Be(){var te,me,Q,oe,Ce,Pe,Me,Fe;if(F(void 0),O(void 0),T(void 0),Y(void 0),w(void 0),he([]),(te=ve.current)==null||te.cancel(),ve.current=null,h.seatsAvailable<=0){F("Plus aucune place disponible pour ce trajet");return}try{S(!0);const Ze=await Vj({rideId:h.rideId,passengerId:i,seats:v});w(Ze),O(`Rservation ${Ze.id} confirme (${Ze.amount} XOF).`);const ct=Math.max(0,((h==null?void 0:h.seatsAvailable)??0)-v);f($t=>$t&&{...$t,seatsAvailable:ct}),k($t=>ct>0?Math.min($t,ct):1),l(h.rideId,ct,h.seatsTotal),ge.setState($t=>({results:$t.results.map(Ln=>Ln.rideId===h.rideId?{...Ln,seatsAvailable:ct}:Ln)}))}catch(Ze){const ct=(me=Ze==null?void 0:Ze.response)==null?void 0:me.status,$t=((oe=(Q=Ze==null?void 0:Ze.response)==null?void 0:Q.data)==null?void 0:oe.detail)||((Pe=(Ce=Ze==null?void 0:Ze.response)==null?void 0:Ce.data)==null?void 0:Pe.error),Ln=typeof $t=="string"?$t.toLowerCase():"";ct===409&&((Fe=(Me=Ze==null?void 0:Ze.response)==null?void 0:Me.data)==null?void 0:Fe.error)==="not_enough_seats"?(F($t||"Plus assez de siges disponibles."),await Yt()):Ln.includes("seat lock")?(F("Plus assez de siges disponibles. Nous venons de synchroniser le trajet."),await Yt()):F($t||(Ze==null?void 0:Ze.message)||"Erreur pendant la rservation")}finally{S(!1)}}async function Ye(){var Q;if(!j)return;const te=J==="cash"?{type:"CASH",label:"Paiement en espces"}:J==="mobile-instant"?{type:"MOBILE_MONEY",label:`${fe.provider} ${fe.phone||""}`.trim(),provider:fe.provider,phoneNumber:fe.phone}:Z.find(oe=>oe.id===J);if(!te){Y("Choisis un moyen de paiement.");return}Y(void 0),T(void 0),(Q=ve.current)==null||Q.cancel();const me=AN({onUpdate:({steps:oe})=>he(oe)});ve.current=me;try{V(!0),await Zj({bookingId:j.id,amount:j.amount,holdId:j.holdId??void 0,paymentMethodId:te==null?void 0:te.id,paymentMethodType:(te==null?void 0:te.type)??"CASH"}),await me.promise,T(te.type==="CASH"?"Paiement en espces confirm ":`Paiement confirm via ${te.label||te.provider||te.type} `)}catch(oe){me.cancel(),await me.promise.catch(()=>{});const Ce=me.getCurrentIndex();he(Pe=>Pe.map((Me,Fe)=>Ce<0?Fe===0&&Pe.length?{...Me,status:"error"}:Me:Fe===Ce?{...Me,status:"error"}:Fe>Ce?{...Me,status:"pending"}:Me)),Y((oe==null?void 0:oe.message)||"chec du paiement")}finally{ve.current=null,V(!1)}}const tt=async te=>{var me,Q;if(te.preventDefault(),!o){G("Connecte-toi pour enregistrer un moyen de paiement.");return}try{if(pe(!0),G(void 0),je==="CARD"){const oe=I.number.replace(/\D/g,"");if(oe.length<12)throw new Error("Numro de carte invalide");const Ce=oe.slice(-4),Pe=oe.startsWith("4")?"VISA":oe.startsWith("5")?"MASTERCARD":"CARTE",Me=I.holder?`${I.holder}  ${Ce}`:`Carte  ${Ce}`;await lm(o,{type:"CARD",label:Me,provider:Pe,last4:Ce,expiresAt:I.expiry})}else{if(!se.phone.trim())throw new Error("Numro requis");await lm(o,{type:"MOBILE_MONEY",label:`${se.provider} ${se.phone}`,provider:se.provider,phoneNumber:se.phone})}X(!1),de({holder:"",number:"",expiry:""}),z({provider:"MTN Money",phone:""}),await be()}catch(oe){G(((Q=(me=oe==null?void 0:oe.response)==null?void 0:me.data)==null?void 0:Q.message)||(oe==null?void 0:oe.message)||"Impossible denregistrer le moyen de paiement.")}finally{pe(!1)}},_t=async te=>{var me,Q;if(o)try{await fN(o,te),J===te&&H("cash"),await be()}catch(oe){G(((Q=(me=oe==null?void 0:oe.response)==null?void 0:me.data)==null?void 0:Q.message)||(oe==null?void 0:oe.message)||"Suppression impossible.")}};return r.jsxs("div",{className:"mx-auto max-w-6xl space-y-6 rounded-3xl bg-white px-4 py-6 text-slate-900 shadow-xl sm:px-8",children:[r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 border-b border-slate-200 pb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Trajet"}),r.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:[h.originCity,"  ",h.destinationCity]}),r.jsxs("p",{className:"text-sm text-slate-600",children:[we,"  ",h.seatsAvailable," sige(s) restants"]})]}),r.jsx("button",{className:"rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:border-slate-900 hover:text-slate-900",onClick:()=>t(`/ride/${h.rideId}`),children:"Voir la fiche trajet"})]}),r.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.7fr,1fr]",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-5 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Nombre de siges"}),r.jsx("input",{type:"number",min:1,max:Math.max(1,h.seatsAvailable),value:v,onChange:te=>{const me=Number(te.target.value||1);k(Math.min(Math.max(1,me),Math.max(1,h.seatsAvailable)))},className:"mt-2 h-12 w-24 rounded-2xl border border-slate-300 bg-white text-center text-2xl font-semibold text-slate-900"})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Disponibles"}),r.jsx("span",{className:"mt-2 text-2xl font-semibold text-emerald-600",children:h.seatsAvailable}),r.jsxs("span",{className:"text-xs text-slate-500",children:["Encore ",h.seatsAvailable," place(s)"]})]}),r.jsx("div",{className:"flex-1 rounded-2xl border border-dashed border-slate-300 bg-white/60 p-4 text-sm text-slate-600",children:"Ajuste le nombre de siges puis valide pour verrouiller ta rservation avant les autres passagers."})]}),ne&&r.jsx("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800",children:"Plus aucune place disponible pour ce trajet."}),r.jsxs("div",{className:"mt-4 flex flex-wrap items-end justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500",children:"Montant estim"}),r.jsxs("p",{className:"text-3xl font-semibold text-slate-900",children:[De.toLocaleString()," XOF"]})]}),r.jsxs("div",{className:"text-sm text-slate-500",children:["Prix par sige",r.jsxs("span",{className:"font-semibold text-slate-900",children:[h.pricePerSeat.toLocaleString()," XOF"]})]})]})]}),r.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Parcours de rservation"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Rserve, paie, puis reois automatiquement ton reu dans ton espace KariGo."})]}),N&&r.jsx("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700",children:N})]}),r.jsx("div",{className:"mt-5 space-y-5",children:re.map(te=>{const me=te.status==="done"?"bg-emerald-500":te.status==="active"?"bg-amber-500 animate-pulse":te.status==="ready"?"bg-sky-500":"bg-slate-300",Q=te.status==="done"?"text-emerald-700":te.status==="active"?"text-slate-900":te.status==="ready"?"text-sky-700":"text-slate-500";return r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:`mt-1 h-3 w-3 rounded-full ${me}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-semibold ${Q}`,children:te.title}),r.jsx("p",{className:"text-sm text-slate-500",children:te.description})]})]},te.id)})})]}),j&&r.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Rservation confirme"}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Rf ",j.id]})]}),r.jsx("button",{className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-400",onClick:()=>{J==="cash"?Ve(!0):Ye()},disabled:R||!!$,children:R?"Paiement":"Payer maintenant"})]}),r.jsxs("div",{className:"grid gap-3 text-sm text-slate-600 sm:grid-cols-2",children:[r.jsxs("div",{children:["Montant",r.jsxs("span",{className:"font-semibold text-slate-900",children:[((kt=(as=j.amount)==null?void 0:as.toLocaleString)==null?void 0:kt.call(as))??j.amount," XOF"]})]}),r.jsxs("div",{children:["Moyen slectionn",r.jsx("span",{className:"font-semibold text-slate-900",children:(Oe==null?void 0:Oe.label)||((Oe==null?void 0:Oe.type)==="CASH"?"Espces":Oe==null?void 0:Oe.type)})]}),j.holdId&&r.jsxs("div",{children:["Wallet hold",r.jsx("span",{className:"font-semibold text-slate-900",children:j.holdId})]}),r.jsxs("div",{children:["Siges rservs",r.jsx("span",{className:"font-semibold text-slate-900",children:v})]})]}),$&&r.jsx("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-2 text-sm font-semibold text-emerald-700",children:$}),K&&r.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700",children:K}),ue.length>0&&r.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Simulation du paiement"}),r.jsx("div",{className:"space-y-2",children:ue.map(te=>r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${te.status==="done"?"bg-emerald-500":te.status==="active"?"bg-amber-500 animate-pulse":te.status==="error"?"bg-rose-500":"bg-slate-300"}`}),r.jsx("span",{className:te.status==="error"?"text-rose-600":te.status==="done"?"text-emerald-700":te.status==="active"?"text-slate-900":"text-slate-500",children:te.label})]},te.id))})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Choisis un moyen de paiement"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Cartes bancaires/Visa, mobile money, payer en cash le jour J ou enregistre ton wallet."})]}),o?r.jsx("button",{type:"button",onClick:()=>X(te=>!te),className:"text-xs font-semibold text-slate-900 underline",children:B?"Fermer":"Enregistrer un moyen"}):r.jsx("span",{className:"text-xs font-semibold text-slate-400",children:"Connecte-toi pour mmoriser tes moyens favoris"})]}),P&&r.jsx("div",{className:"mt-3 rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm text-rose-700",children:P}),r.jsxs("div",{className:"mt-4 grid gap-3",children:[r.jsx("button",{type:"button",onClick:()=>H("cash"),className:`rounded-2xl border px-4 py-3 text-left transition ${J==="cash"?"border-slate-900 bg-slate-900/5 shadow-sm":"border-slate-200 hover:border-slate-400"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(jw,{size:18,className:"text-slate-900"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Espces  bord"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Paiement au dpart, confirmation avec le conducteur."})]})]})}),r.jsx("button",{type:"button",onClick:()=>H("mobile-instant"),className:`rounded-2xl border px-4 py-3 text-left transition ${J==="mobile-instant"?"border-slate-900 bg-slate-900/5 shadow-sm":"border-slate-200 hover:border-slate-400"}`,children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ap,{size:18,className:"text-slate-900"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Mobile money instantan"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Saisis ton numro (MTN, Orange, Moov) et confirme depuis ton tlphone."})]})]}),J==="mobile-instant"&&r.jsxs("div",{className:"space-y-2 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-3 text-sm",children:[r.jsx("div",{className:"flex flex-wrap gap-2",children:["MTN Money","Orange Money","Moov Money"].map(te=>r.jsx("button",{type:"button",onClick:()=>ke(me=>({...me,provider:te})),className:`rounded-full px-3 py-1 text-xs font-semibold ${fe.provider===te?"bg-slate-900 text-white":"bg-white text-slate-600 ring-1 ring-slate-200"}`,children:te},te))}),r.jsx("input",{type:"tel",value:fe.phone,onChange:te=>ke(me=>({...me,phone:te.target.value})),placeholder:"+225 07 07 07 07",className:"h-11 w-full rounded-xl border border-slate-300 bg-white px-3 text-slate-900 placeholder:text-slate-400"})]})]})}),M&&r.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-500",children:"Chargement"}),!M&&Z.map(te=>r.jsx("button",{type:"button",onClick:()=>H(te.id),className:`rounded-2xl border px-4 py-3 text-left transition ${J===te.id?"border-slate-900 bg-slate-900/5 shadow-sm":"border-slate-200 hover:border-slate-400"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[te.type==="CARD"?r.jsx(sw,{size:18,className:"text-slate-900"}):r.jsx(Ap,{size:18,className:"text-slate-900"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:te.label||te.provider||te.type}),r.jsx("p",{className:"text-xs text-slate-500",children:te.type==="CARD"?` ${te.last4??"****"}  Exp ${te.expiresAt??"--/--"}`:te.phoneNumber||"Numro inconnu"})]}),r.jsx("button",{type:"button",onClick:me=>{me.stopPropagation(),_t(te.id)},className:"ml-auto text-slate-400 transition hover:text-rose-500",children:r.jsx(Iu,{size:14})})]})},te.id))]}),B&&o&&r.jsxs("form",{className:"mt-5 space-y-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",onSubmit:tt,children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-wide text-slate-500",children:[r.jsx("span",{children:"Nouveau moyen"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>ie("CARD"),className:`rounded-full px-3 py-1 ${je==="CARD"?"bg-slate-900 text-white":"bg-white text-slate-600 ring-1 ring-slate-200"}`,children:"Carte"}),r.jsx("button",{type:"button",onClick:()=>ie("MOBILE_MONEY"),className:`rounded-full px-3 py-1 ${je==="MOBILE_MONEY"?"bg-slate-900 text-white":"bg-white text-slate-600 ring-1 ring-slate-200"}`,children:"Mobile money"})]})]}),je==="CARD"?r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"sm:col-span-2 space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Nom sur la carte"}),r.jsx("input",{type:"text",value:I.holder,onChange:te=>de(me=>({...me,holder:te.target.value})),className:"h-11 w-full rounded-xl border border-slate-300 bg-white px-3 text-slate-900",placeholder:"Koman Traor",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Numro"}),r.jsx("input",{type:"text",value:I.number,onChange:te=>de(me=>({...me,number:te.target.value})),className:"h-11 w-full rounded-xl border border-slate-300 bg-white px-3 text-slate-900",placeholder:"4111 1111 1111 1111",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Expiration"}),r.jsx("input",{type:"text",value:I.expiry,onChange:te=>de(me=>({...me,expiry:te.target.value})),className:"h-11 w-full rounded-xl border border-slate-300 bg-white px-3 text-slate-900",placeholder:"08/28",required:!0})]})]}):r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Oprateur"}),r.jsxs("select",{value:se.provider,onChange:te=>z(me=>({...me,provider:te.target.value})),className:"h-11 w-full rounded-xl border border-slate-300 bg-white px-3 text-slate-900",children:[r.jsx("option",{children:"MTN Money"}),r.jsx("option",{children:"Orange Money"}),r.jsx("option",{children:"Moov Money"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Numro"}),r.jsx("input",{type:"tel",value:se.phone,onChange:te=>z(me=>({...me,phone:te.target.value})),className:"h-11 w-full rounded-xl border border-slate-300 bg-white px-3 text-slate-900",placeholder:"+225 07 07 07 07",required:!0})]})]}),r.jsx("button",{type:"submit",disabled:ee,className:"inline-flex w-full items-center justify-center rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",children:ee?"Enregistrement":"Enregistrer ce moyen"})]})]}),r.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-5 shadow-sm space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Rcapitulatif"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Valide ton panier puis passe au paiement moderne."})]}),r.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Prix par place"}),r.jsxs("span",{className:"font-semibold text-slate-900",children:[h.pricePerSeat.toLocaleString()," XOF"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Places slectionnes"}),r.jsx("span",{className:"font-semibold text-slate-900",children:v})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Mthode"}),r.jsx("span",{className:"font-semibold text-slate-900",children:(Oe==null?void 0:Oe.label)||((Oe==null?void 0:Oe.type)==="CASH"?"Espces":" choisir")})]}),r.jsxs("div",{className:"flex justify-between border-t border-slate-200 pt-3 text-base font-semibold text-slate-900",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{children:[De.toLocaleString()," XOF"]})]})]}),A&&r.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:A}),N&&!j&&r.jsx("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm font-semibold text-emerald-700",children:N}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx("button",{disabled:C||ne,onClick:Be,className:"rounded-full bg-slate-900 px-4 py-3 text-sm font-semibold text-white transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:bg-slate-400",children:C?"Rservation":"Confirmer la rservation"}),r.jsx("button",{className:"rounded-full border border-slate-300 px-4 py-3 text-sm font-semibold text-slate-700 hover:border-slate-500",onClick:()=>t(-1),children:"Retour"})]})]})]})]}),Ne&&j&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/70 px-4",children:r.jsxs("div",{className:"w-full max-w-md space-y-4 rounded-3xl bg-white p-6 text-slate-900 shadow-2xl",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Paiement en espces"}),r.jsx("p",{className:"mt-2 text-xl font-semibold text-slate-900",children:"Je mengage  payer le jour du dpart"})]}),r.jsxs("p",{className:"text-sm text-slate-600",children:["En choisissant lespce, tu confirmes que tu verseras"," ",r.jsxs("span",{className:"font-semibold text-slate-900",children:[((gs=(Xt=j.amount)==null?void 0:Xt.toLocaleString)==null?void 0:gs.call(Xt))??j.amount," XOF"]})," ","directement au conducteur avant le dpart. Merci darriver avec le montant exact."]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{type:"button",className:"flex-1 rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700",onClick:()=>Ve(!1),disabled:R,children:"Annuler"}),r.jsx("button",{type:"button",className:"flex-1 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white",onClick:()=>{Ve(!1),Ye()},disabled:R,children:"Je mengage"})]})]})})]})}const mm=(e,t)=>{if(!e||!t)return"";const[s,i,o]=e.split("-").map(Number),[l,u]=t.split(":").map(Number);return new Date(Date.UTC(s,i-1,o,l,u,0,0)).toISOString()};function IN(){const e=Ft(),t=ge($=>$.setSearch),s=ge($=>$.setResults),i=ge($=>$.setLoading),o=ge($=>$.setError),l=ge($=>$.account),[u,h]=x.useState({originCity:"Abidjan",destinationCity:"Yamoussoukro",date:"",time:"",pricePerSeat:2e3,seatsTotal:3}),[f,m]=x.useState(!1),[g,_]=x.useState(null),y=x.useMemo(()=>new Date().toISOString().slice(0,10),[]),v=$=>{h(T=>({...T,...$}))},k=$=>!$.originCity.trim()||!$.destinationCity.trim()?"Prcise la ville de dpart et darrive.":!$.date||!$.time?"Choisis une date et une heure de dpart.":!Number.isFinite($.pricePerSeat)||$.pricePerSeat<=0?"Le prix par sige doit tre suprieur  0.":!Number.isFinite($.seatsTotal)||$.seatsTotal<=0?"Le nombre de siges doit tre positif.":mm($.date,$.time)?null:"Date ou heure invalide.",C=async $=>{$.preventDefault(),_(null);const T=k(u);if(T){_({type:"error",message:T});return}if(!(l!=null&&l.id)){_({type:"error",message:"Connecte-toi pour publier un trajet."});return}const K=mm(u.date,u.time),Y=Math.round(u.seatsTotal),ue={originCity:u.originCity.trim(),destinationCity:u.destinationCity.trim(),departureAt:K,pricePerSeat:Math.round(u.pricePerSeat),seatsTotal:Y,seatsAvailable:Y,driverId:l.id,driverLabel:R,driverPhotoUrl:l.profilePhotoUrl??void 0};try{m(!0),await gN(ue),_({type:"success",message:"Trajet publi avec succs !"}),t({from:ue.originCity,to:ue.destinationCity,date:u.date||void 0}),s([]),o(void 0),i(!0),e("/results")}catch(he){_({type:"error",message:(he==null?void 0:he.message)||"chec de la cration du trajet."})}finally{m(!1)}},S=(g==null?void 0:g.type)==="success"?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-red-50 border border-red-200 text-red-700",j=u.date&&u.time?`${u.date}T${u.time}`:void 0,w=j?new Date(j).toLocaleString("fr-FR",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"Date et heure  confirmer",N=`${u.originCity||"Dpart ?"}  ${u.destinationCity||"Arrive ?"}`,O=`${u.seatsTotal} sige(s)`,A=`${Number(u.pricePerSeat||0).toLocaleString("fr-FR")} XOF`,R=($=>{if(!$)return;const T=$.trim();if(T)return T.split(/\s+/)[0]})((l==null?void 0:l.fullName)||(l==null?void 0:l.companyName)||(l==null?void 0:l.email))||"Profil KariGo",V=[{id:1,label:"Itinraire"},{id:2,label:"Logistique"},{id:3,label:"Publication"}];return r.jsx("div",{className:"bg-slate-950/5 py-8",children:r.jsxs("div",{className:"container-wide space-y-8",children:[r.jsxs("div",{className:"space-y-3 text-center md:text-left",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-slate-900/5 px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:[r.jsx(Yd,{size:12}),"Publication express"]}),r.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Publier un trajet en quelques tapes"}),r.jsx("p",{className:"text-sm text-slate-600 max-w-3xl",children:"Dfinis litinraire, prcise les dtails logistiques puis confirme la publication. La fiche est instantanment disponible dans la recherche et partageable par les administrateurs."})]}),g&&r.jsx("div",{className:`px-4 py-3 rounded-xl text-sm ${S}`,children:g.message}),r.jsxs("div",{className:"grid gap-8 lg:grid-cols-[minmax(0,1fr),320px]",children:[r.jsxs("form",{className:"space-y-6",onSubmit:C,children:[r.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-6 shadow-sm",children:r.jsx("div",{className:"flex items-center gap-3",children:V.map(($,T)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full border border-slate-200 text-xs font-semibold text-slate-600",children:$.id}),r.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:$.label}),T<V.length-1&&r.jsx("span",{className:"hidden sm:block h-px w-8 bg-slate-200"})]},$.id))})}),r.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-6 shadow-sm space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"1. Dfinir litinraire"}),r.jsx("span",{className:"text-xs text-slate-500",children:"Choisis des villes connues"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(Yo,{label:"Dpart",placeholder:"Ville de dpart",value:u.originCity,onChange:$=>v({originCity:$}),onSelect:$=>v({originCity:$})}),r.jsx(Yo,{label:"Arrive",placeholder:"Ville darrive",value:u.destinationCity,onChange:$=>v({destinationCity:$}),onSelect:$=>v({destinationCity:$})})]})]}),r.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-6 shadow-sm space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"2. Planifier le dpart"}),r.jsxs("span",{className:"text-xs text-slate-500",children:["Date limite ",y]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Date"}),r.jsx("input",{type:"date",className:"input w-full",min:y,value:u.date,onChange:$=>v({date:$.currentTarget.value}),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Heure"}),r.jsx("input",{type:"time",className:"input w-full",value:u.time,onChange:$=>v({time:$.currentTarget.value}),required:!0})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Prix par sige (XOF)"}),r.jsx("input",{type:"number",min:0,step:100,className:"input w-full",value:u.pricePerSeat,onChange:$=>v({pricePerSeat:Number($.currentTarget.value||0)}),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Nombre de siges"}),r.jsx("input",{type:"number",min:1,max:7,className:"input w-full",value:u.seatsTotal,onChange:$=>{const T=Number($.currentTarget.value||1);v({seatsTotal:Math.max(1,Math.min(7,T))})},required:!0})]})]})]}),r.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-6 shadow-sm space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"3. Publier et partager"}),r.jsx("span",{className:"text-xs text-slate-500",children:"Rsum automatique envoy aux admins"})]}),r.jsxs("ul",{className:"text-sm text-slate-600 space-y-2",children:[r.jsx("li",{children:" Le trajet sera index dans la recherche et visible en admin."}),r.jsx("li",{children:" Tu peux dupliquer ce formulaire pour planifier une tourne complte."}),r.jsxs("li",{children:[" Le trajet sera automatiquement associ  ton profil ",(l==null?void 0:l.fullName)??(l==null?void 0:l.companyName)??""," pour assurer la traabilit et les changes."]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-2",children:[r.jsx("button",{type:"submit",disabled:f,className:"btn-primary px-5 py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Publication":"Publier le trajet"}),r.jsx("button",{type:"button",onClick:()=>e(-1),className:"px-4 py-3 rounded-xl border border-slate-300 text-slate-700 hover:bg-slate-100",children:"Annuler"})]})]})]}),r.jsxs("aside",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-6 shadow-sm",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Aperu du trajet"}),r.jsxs("div",{className:"mt-4 space-y-3 text-sm text-slate-600",children:[r.jsxs("div",{className:"rounded-2xl bg-slate-50 px-4 py-3",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Itinraire"}),r.jsxs("p",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[r.jsx(er,{size:14,className:"text-sky-500"}),N]})]}),r.jsxs("div",{className:"rounded-2xl bg-slate-50 px-4 py-3",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Dpart prvu"}),r.jsxs("p",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[r.jsx(ss,{size:14,className:"text-slate-500"}),w]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"rounded-2xl bg-slate-50 px-4 py-3",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Places"}),r.jsxs("p",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[r.jsx(Qd,{size:14}),O]})]}),r.jsxs("div",{className:"rounded-2xl bg-slate-50 px-4 py-3",children:[r.jsx("p",{className:"text-xs text-slate-500",children:"Prix"}),r.jsx("p",{className:"font-semibold text-slate-900",children:A})]})]}),r.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-3 text-xs text-slate-500",children:["Chauffeur associ : ",r.jsx("span",{className:"font-semibold text-slate-900",children:R})]})]})]}),r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-gradient-to-br from-slate-900 to-slate-800 px-5 py-6 text-white shadow-lg",children:[r.jsx("p",{className:"text-sm font-semibold",children:"Besoin de suivre les rservations ?"}),r.jsx("p",{className:"mt-2 text-xs text-white/80",children:"Les admins peuvent, depuis la page ddie, envoyer la liste complte des trajets par email ou les fermer en un clic."}),r.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 text-xs font-semibold",children:["Accessible aprs publication",r.jsx(es,{size:14})]})]})]})]})]})})}const Zg="kari_pending_acquisitions_v1";function zN(e){if(!e)return{};try{const t=JSON.parse(e);if(t&&typeof t=="object")return t}catch{return{}}return{}}function Nl(){if(typeof window>"u")return{};try{return zN(window.localStorage.getItem(Zg))}catch{return{}}}function ih(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Zg,JSON.stringify(e))}catch{}}function ah(e){if(!(typeof window>"u"||!e))try{window.dispatchEvent(new CustomEvent("kari:pendingAcquisitions",{detail:{ownerId:e}}))}catch{}}function ON(e){return e?Nl()[e]??[]:[]}function Hg(e,t){if(!e)return;const s=Nl(),i=s[e]??[],o=t.id??`${t.rideId}:${t.driverId}`,l=t.createdAt??new Date().toISOString(),u={id:o,createdAt:l,...t},h=i.filter(f=>f.id!==o);s[e]=[u,...h].slice(0,25),ih(s),ah(e)}function DN(e,t){if(!e)return;const s=Nl(),i=s[e];i&&(s[e]=i.filter(o=>o.id!==t),ih(s),ah(e))}function BN(e,t){if(!e||!t.length)return;const s=Nl(),i=s[e];if(!i)return;const o=new Set(t),l=i.filter(u=>!o.has(u.rideId));l.length!==i.length&&(s[e]=l,ih(s),ah(e))}function FN(e,t){const s=x.useRef(t);x.useEffect(function(){t!==s.current&&e.attributionControl!=null&&(s.current!=null&&e.attributionControl.removeAttribution(s.current),t!=null&&e.attributionControl.addAttribution(t)),s.current=t},[e,t])}const $N=1;function UN(e){return Object.freeze({__version:$N,map:e})}function qg(e,t){return Object.freeze({...e,...t})}const Wg=x.createContext(null),Gg=Wg.Provider;function oh(){const e=x.useContext(Wg);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Kg(e){function t(s,i){const{instance:o,context:l}=e(s).current;return x.useImperativeHandle(i,()=>o),s.children==null?null:Tr.createElement(Gg,{value:l},s.children)}return x.forwardRef(t)}function VN(e){function t(s,i){const{instance:o}=e(s).current;return x.useImperativeHandle(i,()=>o),null}return x.forwardRef(t)}function Yg(e,t){const s=x.useRef();x.useEffect(function(){return t!=null&&e.instance.on(t),s.current=t,function(){s.current!=null&&e.instance.off(s.current),s.current=null}},[e,t])}function lh(e,t){const s=e.pane??t.pane;return s?{...e,pane:s}:e}function ch(e,t,s){return Object.freeze({instance:e,context:t,container:s})}function uh(e,t){return t==null?function(i,o){const l=x.useRef();return l.current||(l.current=e(i,o)),l}:function(i,o){const l=x.useRef();l.current||(l.current=e(i,o));const u=x.useRef(i),{instance:h}=l.current;return x.useEffect(function(){u.current!==i&&(t(h,i,u.current),u.current=i)},[h,i,o]),l}}function Xg(e,t){x.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var l;(l=t.layerContainer)==null||l.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Qg(e){return function(s){const i=oh(),o=e(lh(s,i),i);return FN(i.map,s.attribution),Yg(o.current,s.eventHandlers),Xg(o.current,i),o}}function ZN(e,t){const s=x.useRef();x.useEffect(function(){if(t.pathOptions!==s.current){const o=t.pathOptions??{};e.instance.setStyle(o),s.current=o}},[e,t])}function HN(e){return function(s){const i=oh(),o=e(lh(s,i),i);return Yg(o.current,s.eventHandlers),Xg(o.current,i),ZN(o.current,s),o}}function qN(e,t){const s=uh(e,t),i=Qg(s);return Kg(i)}function WN(e,t){const s=uh(e,t),i=HN(s);return Kg(i)}function GN(e,t){const s=uh(e,t),i=Qg(s);return VN(i)}function KN(e,t,s){const{opacity:i,zIndex:o}=t;i!=null&&i!==s.opacity&&e.setOpacity(i),o!=null&&o!==s.zIndex&&e.setZIndex(o)}function YN(){return oh().map}function Wu(){return Wu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Wu.apply(this,arguments)}function XN({bounds:e,boundsOptions:t,center:s,children:i,className:o,id:l,placeholder:u,style:h,whenReady:f,zoom:m,...g},_){const[y]=x.useState({className:o,id:l,style:h}),[v,k]=x.useState(null);x.useImperativeHandle(_,()=>(v==null?void 0:v.map)??null,[v]);const C=x.useCallback(j=>{if(j!==null&&v===null){const w=new ua.Map(j,g);s!=null&&m!=null?w.setView(s,m):e!=null&&w.fitBounds(e,t),f!=null&&w.whenReady(f),k(UN(w))}},[]);x.useEffect(()=>()=>{v==null||v.map.remove()},[v]);const S=v?Tr.createElement(Gg,{value:v},i):u??null;return Tr.createElement("div",Wu({},y,{ref:C}),S)}const QN=x.forwardRef(XN),xm=qN(function({position:t,...s},i){const o=new ua.Marker(t,s);return ch(o,qg(i,{overlayContainer:o}))},function(t,s,i){s.position!==i.position&&t.setLatLng(s.position),s.icon!=null&&s.icon!==i.icon&&t.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==i.opacity&&t.setOpacity(s.opacity),t.dragging!=null&&s.draggable!==i.draggable&&(s.draggable===!0?t.dragging.enable():t.dragging.disable())}),JN=WN(function({positions:t,...s},i){const o=new ua.Polyline(t,s);return ch(o,qg(i,{overlayContainer:o}))},function(t,s,i){s.positions!==i.positions&&t.setLatLngs(s.positions)}),ek=GN(function({url:t,...s},i){const o=new ua.TileLayer(t,lh(s,i));return ch(o,i)},function(t,s,i){KN(t,s,i);const{url:o}=s;o!=null&&o!==i.url&&t.setUrl(o)}),tk=(e,t)=>{const i=(t.lat-e.lat)*Math.PI/180,o=(t.lng-e.lng)*Math.PI/180,l=e.lat*Math.PI/180,u=t.lat*Math.PI/180,h=Math.sin(i/2),f=Math.sin(o/2),m=h*h+f*f*Math.cos(l)*Math.cos(u),g=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return Math.round(6371*g)},sk=e=>{if(e)try{return new Date(e).toLocaleString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})}catch{return}},Xa=e=>typeof e=="number"&&Number.isFinite(e)?e:void 0;function nk({points:e}){const t=YN();return x.useEffect(()=>{if(!e.length)return;const s=L.latLngBounds(e);t.fitBounds(s,{padding:[32,32]})},[t,e]),null}function rk({origin:e,destination:t,departureAt:s,distanceKmHint:i}){var k,C;const o=x.useRef(null),[l,u]=x.useState({width:760,height:300});x.useEffect(()=>{const S=o.current;if(!S)return;const j=()=>{const N=S.getBoundingClientRect(),O=Math.max(280,Math.min(960,Math.round(N.width||760))),A=Math.max(220,Math.min(420,Math.round(O*.5)));u({width:O,height:A})};j();const w=new ResizeObserver(j);return w.observe(S),()=>w.disconnect()},[]);const h=x.useMemo(()=>e.meta&&Xa(e.meta.lat)&&Xa(e.meta.lng)?{lat:e.meta.lat,lng:e.meta.lng}:void 0,[e.meta]),f=x.useMemo(()=>t.meta&&Xa(t.meta.lat)&&Xa(t.meta.lng)?{lat:t.meta.lat,lng:t.meta.lng}:void 0,[t.meta]),m=x.useMemo(()=>{if(typeof i=="number"&&Number.isFinite(i)&&i>0)return Math.round(i);if(h&&f)return tk(h,f)},[i,f,h]),g=sk(s),_=!!(h&&f),y=_&&h&&f?[h,f]:[],v=h&&f?{lat:(h.lat+f.lat)/2,lng:(h.lng+f.lng)/2}:h||f||{lat:0,lng:0};return r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white text-slate-900 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3 px-4 pt-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("p",{className:"text-[11px] uppercase tracking-[0.18em] text-slate-500",children:"Vue du trajet"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Repre visuel rapide du parcours"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] font-semibold",children:[g&&r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-slate-700",children:["Dpart ",g]}),m&&r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-sky-200 bg-sky-50 px-3 py-1 text-sky-700",children:["~",m," km"]})]})]}),r.jsxs("div",{ref:o,className:"relative mt-3 overflow-hidden px-2 pb-4",children:[r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(59,130,246,0.10),transparent_45%),radial-gradient(circle_at_80%_65%,rgba(14,165,233,0.08),transparent_40%)]"}),_?r.jsxs(QN,{center:v,zoom:6,scrollWheelZoom:!1,style:{height:`${l.height}px`,width:"100%"},className:"relative w-full rounded-xl border border-slate-200 bg-white shadow-inner",zoomControl:!1,children:[r.jsx(ek,{attribution:" OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.jsx(JN,{positions:y,pathOptions:{color:"#2563eb",weight:6,opacity:.9}}),r.jsx(xm,{position:h,icon:hm(e.label)}),r.jsx(xm,{position:f,icon:hm(t.label)}),r.jsx(nk,{points:y})]}):r.jsx("div",{className:"relative w-full rounded-xl border border-dashed border-slate-200 bg-slate-50/60 px-4 py-6 text-sm text-slate-600",style:{height:`${l.height}px`},children:"Ajoute des points avec coordonnes (ex: via une recherche golocalise) pour afficher le trac sur la carte."})]}),r.jsxs("div",{className:"grid gap-4 border-t border-slate-200 px-4 py-4 text-sm md:grid-cols-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-9 w-9 rounded-xl bg-sky-100 ring-1 ring-sky-200"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[11px] uppercase tracking-[0.15em] text-sky-600",children:"Dpart"}),r.jsx("p",{className:"text-base font-semibold text-slate-900",children:e.label}),((k=e.meta)==null?void 0:k.label)&&r.jsxs("p",{className:"text-xs text-slate-500",children:["Repre: ",e.meta.label]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-9 w-9 rounded-xl bg-sky-100 ring-1 ring-sky-200"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[11px] uppercase tracking-[0.15em] text-sky-600",children:"Arrive"}),r.jsx("p",{className:"text-base font-semibold text-slate-900",children:t.label}),((C=t.meta)==null?void 0:C.label)&&r.jsxs("p",{className:"text-xs text-slate-500",children:["Repre: ",t.meta.label]})]})]})]})]})}const ik=e=>{if(!e)return;const t=e.trim();if(t)return t.split(/\s+/)[0]};function ak(){var J,H;const{rideId:e}=Gd(),t=Ft(),s=ge(B=>B.results.find(X=>X.rideId===e)),i=ge(B=>B.token),o=ge(B=>B.account),l=ge(B=>B.refreshMessageBadge),u=ge(B=>B.lastSearch),[h,f]=x.useState(s),[m,g]=x.useState(!1),[_,y]=x.useState(),[v,k]=x.useState(null),[C,S]=x.useState(!1),[j,w]=x.useState(),[N,O]=x.useState(""),[A,F]=x.useState(!1),[R,V]=x.useState();x.useEffect(()=>{s&&f(s)},[s]),x.useEffect(()=>{if(s||!e)return;let B=!1;return(async()=>{try{g(!0);const X=await Qo(e);if(!X||X.error)throw new Error("Trajet introuvable");const ee={rideId:X.id,originCity:X.originCity,destinationCity:X.destinationCity,departureAt:X.departureAt,pricePerSeat:X.pricePerSeat,seatsTotal:X.seatsTotal,seatsAvailable:X.seatsAvailable,driverId:X.driverId,status:X.status};B||f(ee)}catch(X){B||y((X==null?void 0:X.message)||"Trajet introuvable")}finally{B||g(!1)}})(),()=>{B=!0}},[s,e]);const $=B=>B?/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(B):!1;x.useEffect(()=>{if(!(h!=null&&h.driverId)||!i)return;if(!$(h.driverId)){k(null),w("Profil chauffeur indisponible pour ce trajet."),S(!1);return}let B=!1;return(async()=>{try{S(!0),w(void 0);const X=await nh(h.driverId,i);B||k(X)}catch(X){B||w((X==null?void 0:X.message)||"Impossible de charger le chauffeur.")}finally{B||S(!1)}})(),()=>{B=!0}},[h==null?void 0:h.driverId,i]);const T=x.useMemo(()=>h?new Date(h.departureAt).toLocaleString("fr-FR",{weekday:"long",day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}):"",[h==null?void 0:h.departureAt]),K=x.useMemo(()=>{if(h)return{rideId:h.rideId,originCity:h.originCity,destinationCity:h.destinationCity,departureAt:h.departureAt}},[h]),Y=!!(v&&(o!=null&&o.id)&&(v==null?void 0:v.id)!==(o==null?void 0:o.id)&&i),ue=!!(v!=null&&v.id&&i);if(m&&!h)return r.jsx("div",{className:"glass p-6 rounded-2xl",children:"Chargement du trajet"});if(!h)return r.jsx("div",{className:"glass p-6 rounded-2xl text-red-200",children:_||"Trajet introuvable (reviens via la recherche)."});const he=()=>{!v||!Y||t("/messages",{state:{contact:{id:v.id,type:v.type,label:v.fullName??v.companyName??v.email??"Chauffeur",email:v.email},rideContext:K??void 0}})},ve=async()=>{var X,ee;if(!v||!Y||!o)return;const B=N.trim();if(!B){V("cris un petit message pour le chauffeur.");return}V(void 0),F(!0);try{await Vu({senderId:o.id,senderType:o.type,senderLabel:o.fullName??o.companyName??o.email,recipientId:v.id,recipientType:v.type,recipientLabel:v.fullName??v.companyName??v.email,body:B}),Hg(o.id??"guest",{rideId:h.rideId,driverId:v.id,driverType:v.type,driverLabel:v.fullName??v.companyName??v.email??"Chauffeur KariGo",originCity:h.originCity,destinationCity:h.destinationCity,departureAt:h.departureAt,pricePerSeat:h.pricePerSeat,lastMessagePreview:B.slice(0,140)}),O(""),await l(),t("/messages",{state:{contact:{id:v.id,type:v.type,label:v.fullName??v.companyName??v.email??"Chauffeur",email:v.email},rideContext:K??void 0}})}catch(pe){V(((ee=(X=pe==null?void 0:pe.response)==null?void 0:X.data)==null?void 0:ee.message)||(pe==null?void 0:pe.message)||"Impossible denvoyer le message.")}finally{F(!1)}},Z=(v==null?void 0:v.profilePhotoUrl)||void 0,le=ik((v==null?void 0:v.fullName)??(v==null?void 0:v.companyName)??(v==null?void 0:v.email))||"Chauffeur KariGo",M=()=>{!ue||!(v!=null&&v.id)||t(`/profile/${v.id}`)},D=B=>B==null?void 0:B.trim().toLowerCase(),P=h&&u&&D((J=u.fromMeta)==null?void 0:J.city)===D(h.originCity)?u.fromMeta??void 0:void 0,G=h&&u&&D((H=u.toMeta)==null?void 0:H.city)===D(h.destinationCity)?u.toMeta??void 0:void 0;return r.jsxs("div",{className:"glass p-6 rounded-2xl space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-900/60",children:[r.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-xs uppercase tracking-wide",children:"Trajet partag"}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-slate-900/60",children:[r.jsx(Ks,{size:14})," ",T]}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-slate-900/60",children:[r.jsx(ss,{size:14})," ",h.seatsAvailable,"/",h.seatsTotal," siges"]}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-slate-900/60 capitalize",children:[r.jsx(Wo,{size:14})," ",h.status.toLowerCase()]})]}),r.jsxs("h1",{className:"flex flex-wrap items-center gap-2 text-3xl font-semibold text-slate-900",children:[r.jsx(el,{name:h.originCity,className:"text-lg"}),r.jsx(es,{size:22,className:"text-slate-900/50"}),r.jsx(el,{name:h.destinationCity,className:"text-lg"})]})]}),r.jsx(rk,{origin:{label:h.originCity,meta:P},destination:{label:h.destinationCity,meta:G},departureAt:h.departureAt}),r.jsxs("section",{className:"grid gap-4 lg:grid-cols-[minmax(0,1.4fr),minmax(0,1fr)]",children:[r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/5 p-5 text-slate-900/80 space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-start gap-4",children:[r.jsx("button",{type:"button",onClick:ue?M:void 0,className:`relative h-20 w-20 overflow-hidden rounded-2xl border border-slate-200 bg-slate-100 ${ue?"cursor-pointer hover:opacity-90 transition":"cursor-default"}`,children:Z?r.jsx("img",{src:Z,alt:`Photo de ${le}`,className:"h-full w-full object-cover"}):r.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-slate-900/70",children:"Photo"})}),r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-900/60",children:(v==null?void 0:v.type)==="COMPANY"?"Trajet pro":"Conducteur particulier"}),r.jsx("div",{className:"text-xl font-semibold text-slate-900",children:le}),(v==null?void 0:v.tagline)&&r.jsx("p",{className:"text-sm text-slate-900/70",children:v.tagline}),v&&r.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-slate-900/70",children:[v.email&&r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(Y0,{size:12}),v.email]}),v.contactPhone&&r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(X0,{size:12}),v.contactPhone]})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[Y&&r.jsxs("button",{onClick:he,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-900/90 hover:bg-slate-100",children:["Ouvrir la messagerie",r.jsx(es,{size:14})]}),ue&&r.jsxs("button",{type:"button",onClick:M,className:"inline-flex items-center gap-2 text-xs font-semibold text-slate-700 hover:text-slate-900",children:["Voir le profil du chauffeur",r.jsx(es,{size:14})]})]})]}),(v==null?void 0:v.comfortPreferences)&&v.comfortPreferences.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 text-xs text-slate-900/80",children:v.comfortPreferences.map(B=>r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-100 px-3 py-1",children:[r.jsx(Xd,{size:11})," ",B]},B))}),Y&&r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-900/60",children:"Envoyer un message"}),r.jsx("textarea",{className:"input w-full min-h-[90px] bg-slate-100 text-sm text-slate-900 placeholder:text-slate-900/60",placeholder:`Bonjour ${le}, je suis intress par ce trajet...`,value:N,onChange:B=>O(B.currentTarget.value)}),R&&r.jsx("div",{className:"text-xs text-rose-200",children:R}),r.jsx("button",{onClick:ve,disabled:A,className:"btn-primary h-10 px-4 text-sm font-semibold disabled:opacity-60",children:A?"Envoi en cours":"Envoyer"})]})]}),r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/5 p-5 text-slate-900/80 space-y-4",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-900/60",children:"Dtails du trajet"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsx("div",{className:"flex items-start gap-3",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-900/50",children:"Dpart"}),r.jsxs("p",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[r.jsx(Ji,{city:h.originCity}),r.jsx("span",{children:h.originCity})]})]})}),r.jsx("div",{className:"flex items-start gap-3",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-900/50",children:"Arrive"}),r.jsxs("p",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[r.jsx(Ji,{city:h.destinationCity}),r.jsx("span",{children:h.destinationCity})]})]})}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-900/70",children:[r.jsx(ss,{size:16,className:"text-emerald-300"}),r.jsx("span",{children:T})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-900/70",children:[r.jsx(Wo,{size:16,className:"text-emerald-300"}),r.jsxs("span",{children:[h.seatsAvailable,"/",h.seatsTotal," siges disponibles"]})]}),r.jsxs("div",{className:"flex items-center gap-3 text-emerald-300 text-2xl font-bold",children:[h.pricePerSeat.toLocaleString()," XOF",r.jsx("span",{className:"text-base text-slate-900/60",children:"/ sige"})]})]}),r.jsx("button",{onClick:()=>t(`/booking/${h.rideId}`),className:"w-full rounded-xl bg-emerald-500 px-4 py-3 text-center text-sm font-semibold text-slate-900 transition hover:bg-emerald-400",children:"Rserver ce trajet"}),Y&&r.jsx("button",{onClick:he,className:"w-full rounded-xl border border-slate-200 px-4 py-3 text-center text-sm font-semibold text-slate-900 transition hover:bg-slate-100",children:"crire au conducteur"})]})]}),C&&r.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-100 px-4 py-3 text-sm text-slate-900/80",children:"Chargement des informations du conducteur"}),j&&r.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:j}),r.jsx("button",{onClick:()=>t(-1),className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-900/80 hover:bg-slate-100",children:"Retour"})]})}function Jg({className:e,compact:t}){return r.jsxs("span",{className:zs("inline-flex items-center gap-2 font-black tracking-tight text-slate-900",e),"aria-label":"KariGo",children:[r.jsx("span",{className:"grid h-9 w-9 place-items-center rounded-xl bg-gradient-to-br from-sky-500 to-cyan-600 text-white shadow-lg shadow-sky-500/40",children:r.jsxs("svg",{"aria-hidden":!0,viewBox:"0 0 32 32",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 20.5v-4c0-3 2.4-5.4 5.4-5.5l10-.3c3-.1 5.6 2.3 5.6 5.3v4.5M6.5 22h-2a2 2 0 0 0-2 2v2h5M25.5 22h2a2 2 0 0 1 2 2v2h-5"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 14.5h1m4 0h1m4 0h1M8 20.5h6m12.5 3a3 3 0 1 1-6 0m-9 0a3 3 0 1 1-6 0"})]})}),!t&&r.jsxs("span",{className:"text-xl sm:text-2xl",children:["Kari",r.jsx("span",{className:"text-sky-600",children:"Go"})]})]})}function kl({title:e,subtitle:t,hero:s,footer:i,children:o}){const l=x.useId();return r.jsx("main",{className:"auth-shell",role:"main","aria-labelledby":l,children:r.jsxs("section",{className:"auth-panel",children:[r.jsx("aside",{className:"auth-panel__hero",children:s}),r.jsxs("div",{className:"auth-panel__content",children:[r.jsxs("header",{className:"auth-panel__header",children:[r.jsx(Jg,{}),r.jsxs("div",{className:"auth-panel__heading",id:l,children:[r.jsx("h1",{children:e}),t&&r.jsx("p",{children:t})]})]}),r.jsx("section",{className:"auth-panel__body",children:o}),i&&r.jsx("footer",{className:"auth-panel__footer",children:i})]})]})})}function Nr({className:e}){return r.jsxs("svg",{viewBox:"0 0 512 512",role:"img","aria-label":"Logo Gmail",className:zs("h-8 w-8",e),children:[r.jsx("path",{fill:"#fbbc04",d:"M64 128h64v256H64z"}),r.jsx("path",{fill:"#34a853",d:"M448 128v256h-64V180z"}),r.jsx("path",{fill:"#ea4335",d:"M448 128H64l192 160z"}),r.jsx("path",{fill:"#4285f4",d:"M128 384V180l128 108 128-108v204z"})]})}function ok(){const e=Ft(),t=ge(B=>B.token),s=ge(B=>B.authReady),i=ge(B=>B.authLoading),o=ge(B=>B.initializeAuth),l=ge(B=>B.setSession),u=ge(B=>B.clearSession),h=ge(B=>B.authError),[f,m]=x.useState("password"),[g,_]=x.useState(""),[y,v]=x.useState(""),[k,C]=x.useState(!1),[S,j]=x.useState(),[w,N]=x.useState("email"),[O,A]=x.useState(""),[F,R]=x.useState(""),[V,$]=x.useState(!1),[T,K]=x.useState(!1),[Y,ue]=x.useState(),he=B=>B.replace(/\D+/g,"").slice(0,8),[ve,Z]=x.useState(!1);x.useEffect(()=>{s||o()},[s,o]),x.useEffect(()=>{t&&s&&e("/",{replace:!0})},[t,s,e]),x.useEffect(()=>{const B=X=>{if(!(X!=null&&X.data)||X.data.type!=="kari:oauth"||X.origin!==window.location.origin)return;Z(!1);const ee=X.data.payload;if(ee!=null&&ee.error){j(ee.error);return}ee!=null&&ee.token&&(ee!=null&&ee.account)&&(l(ee.token,ee.account),e("/",{replace:!0}))};return window.addEventListener("message",B),()=>window.removeEventListener("message",B)},[e,l]);const le=()=>{N("email"),A(""),R(""),$(!1),K(!1),ue(void 0),j(void 0)},M=async B=>{var X,ee;if(B.preventDefault(),j(void 0),!g||!y){j("Renseigne email et mot de passe.");return}try{C(!0);const pe=await sN({email:g,password:y});l(pe.token,pe.account),e("/",{replace:!0})}catch(pe){const je=(ee=(X=pe==null?void 0:pe.response)==null?void 0:X.data)==null?void 0:ee.message;j(je==="account_suspended"?"Ton compte est suspendu. Contacte un administrateur.":je||(pe==null?void 0:pe.message)||"Connexion impossible."),u()}finally{C(!1)}},D=async B=>{var ee,pe;B.preventDefault(),j(void 0),ue(void 0);const X=O.trim().toLowerCase();if(!X.endsWith("@gmail.com")){j("Utilise une adresse Gmail.");return}try{$(!0),await Tg({email:X}),N("code"),ue("Code envoy. Vrifie Gmail ou tes spams.")}catch(je){j(((pe=(ee=je==null?void 0:je.response)==null?void 0:ee.data)==null?void 0:pe.message)||(je==null?void 0:je.message)||"Impossible denvoyer le code.")}finally{$(!1)}},P=async B=>{var ee,pe;B.preventDefault(),j(void 0),ue(void 0);const X=he(F);if(!X){j("Entre le code reu par email.");return}try{K(!0);const je=await Mg({email:O.trim().toLowerCase(),code:X});l(je.token,je.account),e("/",{replace:!0})}catch(je){const ie=(pe=(ee=je==null?void 0:je.response)==null?void 0:ee.data)==null?void 0:pe.message;j(ie==="account_suspended"?"Ton compte est suspendu. Contacte un administrateur.":ie||(je==null?void 0:je.message)||"Code invalide.")}finally{K(!1)}},G=x.useCallback(()=>{if(j(void 0),typeof window>"u")return;const B=520,X=640,ee=window.screenX+(window.outerWidth-B)/2,pe=window.screenY+(window.outerHeight-X)/2,ie=`${new URL("/api/identity/",window.location.origin).toString().replace(/\/$/,"")}/auth/google/start?redirect=${encodeURIComponent(window.location.origin)}`;if(!window.open(ie,"kari-google-oauth",`width=${B},height=${X},left=${ee},top=${pe},resizable,scrollbars`)){j("Fentre pop-up bloque. Autorise les pop-ups pour KariGo.");return}Z(!0)},[]),J=!s||i,H=x.useMemo(()=>r.jsxs("div",{className:"space-y-6","aria-hidden":"true",children:[r.jsxs("span",{className:"auth-panel__badge",children:[r.jsx(qo,{size:16}),"Connexion scurise"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h2",{className:"text-3xl font-semibold tracking-tight leading-tight",children:"Connecte-toi en quelques secondes"}),r.jsx("p",{className:"text-sm leading-relaxed text-white/85",children:"Clique sur  Continuer avec Google , utilise ton mot de passe ou reois un code Gmail."})]}),r.jsxs("ul",{className:"auth-panel__list text-white/90",children:[r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.18)"},children:r.jsx(Nr,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Code Gmail express"}),r.jsx("p",{className:"text-sm text-white/80",children:"Un code  usage unique, sans mot de passe."})]})]}),r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.18)"},children:r.jsx(Qi,{size:18})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Alertes instantanes"}),r.jsx("p",{className:"text-sm text-white/80",children:"Notifications de rservation ds quelles arrivent."})]})]})]})]}),[]);return r.jsxs(kl,{title:"Connexion",subtitle:"Accde  ton interface conducteur ou passager.",hero:H,footer:r.jsxs(r.Fragment,{children:["Pas encore de compte ?"," ",r.jsx(ze,{to:"/register",className:"text-sky-600 font-semibold",children:"Inscription"})]}),children:[r.jsxs("div",{className:"card highlight p-5 sm:p-6 lg:p-8 space-y-6 sm:space-y-7",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{type:"button",onClick:G,className:"inline-flex w-full items-center justify-center gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-semibold text-slate-700 shadow-sm transition hover:border-slate-300",children:[r.jsx(Nr,{className:"h-5 w-5"}),r.jsx("span",{children:ve?"Fentre Google ouverte":"Continuer avec Google"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-[11px] uppercase tracking-wide text-slate-400",children:[r.jsx("span",{className:"flex-1 border-t border-slate-200"}),r.jsx("span",{children:"ou"}),r.jsx("span",{className:"flex-1 border-t border-slate-200"})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3 bg-slate-100/80 p-1.5 sm:p-2 rounded-2xl text-sm",role:"tablist","aria-label":"Modes de connexion",children:[r.jsxs("button",{className:zs("w-full sm:flex-1 rounded-xl px-4 py-2 flex items-center justify-center gap-2 transition text-center",f==="password"?"bg-white shadow-sm shadow-sky-100/60 text-slate-900":"text-slate-500 hover:text-slate-700"),onClick:()=>{m("password"),j(void 0)},type:"button",role:"tab","aria-selected":f==="password","aria-controls":"login-password-panel",id:"login-password-tab",children:[r.jsx(K0,{size:16,className:f==="password"?"text-sky-500":"text-slate-400 transition"}),r.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),r.jsxs("button",{className:zs("w-full sm:flex-1 rounded-xl px-4 py-2 flex items-center justify-center gap-2 transition text-center",f==="gmail"?"bg-white shadow-sm shadow-sky-100/60 text-slate-900":"text-slate-500 hover:text-slate-700"),onClick:()=>{m("gmail"),le()},type:"button",role:"tab","aria-selected":f==="gmail","aria-controls":"login-gmail-panel",id:"login-gmail-tab",children:[r.jsx(Nr,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"Code Gmail"})]})]}),f==="password"&&r.jsxs("form",{onSubmit:M,className:"space-y-5 sm:space-y-6",id:"login-password-panel",role:"tabpanel","aria-labelledby":"login-password-tab",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Email"}),r.jsx("input",{type:"email",className:"input w-full",value:g,onChange:B=>_(B.currentTarget.value),placeholder:"utilisateur@karigo.ci",required:!0})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Mot de passe"}),r.jsx("input",{type:"password",className:"input w-full",value:y,onChange:B=>v(B.currentTarget.value),placeholder:"",required:!0}),r.jsx("div",{className:"text-right",children:r.jsx(ze,{to:"/forgot-password",className:"text-xs font-semibold text-sky-600 hover:text-sky-700",children:"Mot de passe oubli ?"})})]}),(S||h)&&r.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm text-red-600",role:"alert","aria-live":"polite",children:[r.jsx(Ys,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{children:S||h})]}),r.jsx("button",{type:"submit",disabled:k||J,className:"btn-primary w-full h-11 disabled:opacity-60 disabled:cursor-not-allowed",children:k||J?"Connexion":"Se connecter"})]}),f==="gmail"&&r.jsxs("div",{className:"space-y-5 sm:space-y-6",id:"login-gmail-panel",role:"tabpanel","aria-labelledby":"login-gmail-tab",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[r.jsx(Nr,{className:"h-6 w-6 shrink-0"}),r.jsx("p",{children:"Entre ton adresse Gmail pour recevoir un code unique valable quelques minutes."})]}),w==="email"&&r.jsxs("form",{className:"space-y-4 sm:space-y-5",onSubmit:D,children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Adresse Gmail"}),r.jsx("input",{type:"email",className:"input w-full",value:O,onChange:B=>A(B.currentTarget.value),placeholder:"tonadresse@gmail.com",required:!0})]}),(S||h)&&r.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm text-red-600",role:"alert","aria-live":"polite",children:[r.jsx(Ys,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{children:S||h})]}),r.jsx("button",{type:"submit",disabled:V||J,className:"btn-primary w-full h-11 disabled:opacity-60 disabled:cursor-not-allowed",children:V||J?"Envoi":"Envoyer un code"})]}),w==="code"&&r.jsxs("form",{className:"space-y-4 sm:space-y-5",onSubmit:P,children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-xs font-medium text-slate-600",children:["Code reu sur ",O]}),r.jsx("input",{type:"text",className:"input w-full text-center tracking-widest text-lg",value:F,onChange:B=>R(he(B.currentTarget.value)),maxLength:8,autoComplete:"one-time-code",required:!0})]}),(S||h)&&r.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm text-red-600",children:[r.jsx(Ys,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{children:S||h})]}),Y&&r.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[r.jsx(Qi,{size:18,className:"mt-0.5 shrink-0 text-sky-600"}),r.jsx("span",{children:Y})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{type:"submit",disabled:T||J,className:"btn-primary flex-1 h-11 disabled:opacity-60 disabled:cursor-not-allowed",children:T||J?"Vrification":"Valider le code"}),r.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl border border-slate-300 text-slate-600 hover:bg-slate-100 text-xs font-medium",onClick:()=>{N("email"),R(""),ue(void 0),j(void 0)},children:"Changer demail"})]})]})]})]}),r.jsxs("div",{className:"mt-4 text-center text-xs text-slate-500",children:["Juste curieux ?"," ",r.jsx(ze,{to:"/",className:"font-semibold text-sky-600",children:"Continuer en visiteur"})]})]})}function lk(){const e=Ft(),t=ge(be=>be.token),s=ge(be=>be.authReady),i=ge(be=>be.authLoading),o=ge(be=>be.initializeAuth),l=ge(be=>be.setSession),u=ge(be=>be.clearSession),[h,f]=x.useState("password"),[m,g]=x.useState("individual"),[_,y]=x.useState(""),[v,k]=x.useState(""),[C,S]=x.useState(""),[j,w]=x.useState(""),[N,O]=x.useState(""),[A,F]=x.useState(""),[R,V]=x.useState(""),[$,T]=x.useState(""),[K,Y]=x.useState(""),[ue,he]=x.useState(""),[ve,Z]=x.useState(!1),[le,M]=x.useState("email"),[D,P]=x.useState(""),[G,J]=x.useState(""),[H,B]=x.useState(!1),[X,ee]=x.useState(!1),[pe,je]=x.useState(),[ie,I]=x.useState(),de=be=>be.replace(/\D+/g,"").slice(0,8),se=()=>[C.trim(),j.trim()].filter(Boolean).join(" ");x.useEffect(()=>{s||o()},[s,o]),x.useEffect(()=>{t&&s&&e("/",{replace:!0})},[t,s,e]),x.useEffect(()=>{m==="company"&&h==="gmail"&&f("password")},[m,h]);const z=()=>{M("email"),P(""),J(""),B(!1),ee(!1),je(void 0),I(void 0)},fe=async be=>{var ne,De;if(be.preventDefault(),I(void 0),!_||!v){I("Renseigne un email et un mot de passe.");return}try{if(Z(!0),m==="individual"){if(!C.trim()||!j.trim()){I("Renseigne ton prnom et ton nom."),Z(!1);return}const we=se(),Ee=N?N.split(",").map(gt=>gt.trim()).filter(Boolean):void 0,We=await eN({email:_,password:v,fullName:we,comfortPreferences:Ee,tagline:A||void 0});l(We.token,We.account)}else{if(!R.trim()){I("Renseigne le nom de la compagnie."),Z(!1);return}const we=await tN({email:_,password:v,companyName:R,registrationNumber:$||void 0,contactName:K||void 0,contactPhone:ue||void 0});l(we.token,we.account)}e("/",{replace:!0})}catch(we){I(((De=(ne=we==null?void 0:we.response)==null?void 0:ne.data)==null?void 0:De.message)||(we==null?void 0:we.message)||"Inscription impossible."),u()}finally{Z(!1)}},ke=async be=>{var De,we;if(be.preventDefault(),I(void 0),je(void 0),m==="individual"&&(!C.trim()||!j.trim())){I("Ajoute ton prnom et ton nom avant de continuer.");return}const ne=D.trim().toLowerCase();if(!ne.endsWith("@gmail.com")){I("Utilise une adresse Gmail valide.");return}try{B(!0),await Tg({email:ne}),M("code"),je("Code envoy sur ta bote Gmail.")}catch(Ee){I(((we=(De=Ee==null?void 0:Ee.response)==null?void 0:De.data)==null?void 0:we.message)||(Ee==null?void 0:Ee.message)||"Impossible denvoyer le code.")}finally{B(!1)}},Ne=async be=>{var De,we;be.preventDefault(),I(void 0),je(void 0);const ne=de(G);if(!ne){I("Entre le code reu par email.");return}try{ee(!0);const Ee=await Mg({email:D.trim().toLowerCase(),code:ne});let We=Ee.account;if(m==="individual"){const gt=se();if(gt)try{We=await Ag(Ee.token,{fullName:gt})}catch(re){console.warn("Impossible de mettre  jour le profil aprs lOTP :",re)}}l(Ee.token,We),e("/",{replace:!0})}catch(Ee){I(((we=(De=Ee==null?void 0:Ee.response)==null?void 0:De.data)==null?void 0:we.message)||(Ee==null?void 0:Ee.message)||"Code invalide.")}finally{ee(!1)}},Ve=!s||i,Oe=be=>be?r.jsxs("div",{className:"flex items-start gap-2 rounded-2xl border border-red-200 bg-red-50/90 px-4 py-3 text-sm text-red-600",children:[r.jsx(Ys,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{children:be})]}):null,Yt=x.useMemo(()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("span",{className:"auth-panel__badge",children:[r.jsx(Yd,{size:16}),"Onboarding express"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h2",{className:"text-3xl font-semibold tracking-tight leading-tight",children:"Construis un profil qui inspire confiance"}),r.jsx("p",{className:"text-sm leading-relaxed text-white/85",children:"KariGo taccompagne de linscription  la mise en relation avec des passagers ou chauffeurs fiables. Un parcours unique pour les voyageurs comme pour les compagnies."})]}),r.jsxs("ul",{className:"auth-panel__list text-white/90",children:[r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.2)"},children:r.jsx(zu,{size:18})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Profil voyageur"}),r.jsx("p",{className:"text-sm text-white/80",children:"Personnalise ton exprience, partage tes prfrences de confort et rserve en toute srnit."})]})]}),r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.2)"},children:r.jsx(Cp,{size:18})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Compte compagnie"}),r.jsx("p",{className:"text-sm text-white/80",children:"Centralise ton quipe, publie des trajets rguliers et offre un suivi premium  tes passagers."})]})]}),r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.2)"},children:r.jsx(qo,{size:18})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Scurit intgre"}),r.jsx("p",{className:"text-sm text-white/80",children:"Mot de passe robuste ou code Gmail  usage unique: choisis la mthode adapte  ton organisation."})]})]})]})]}),[]);return r.jsx(kl,{title:"Crer un compte",subtitle:"Slectionne ton profil et choisis la mthode qui correspond  ton organisation.",hero:Yt,footer:r.jsxs(r.Fragment,{children:["Dj inscrit ?"," ",r.jsx(ze,{to:"/login",className:"text-sky-600 font-semibold",children:"Connexion"})]}),children:r.jsxs("div",{className:"card highlight p-6 space-y-6",children:[r.jsxs("div",{className:"grid gap-5 lg:grid-cols-2",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Type de profil"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-slate-100/80 p-1.5 rounded-2xl text-sm",children:[r.jsxs("button",{className:zs("flex-1 basis-32 rounded-xl px-4 py-2 flex items-center justify-center gap-2 transition",m==="individual"?"bg-white shadow-sm shadow-sky-100/60 text-slate-900":"text-slate-500 hover:text-slate-700"),onClick:()=>{g("individual"),I(void 0)},type:"button",children:[r.jsx(zu,{size:18,className:m==="individual"?"text-sky-500":"text-slate-400 transition"}),r.jsx("span",{className:"font-medium",children:"Voyageur"})]}),r.jsxs("button",{className:zs("flex-1 basis-32 rounded-xl px-4 py-2 flex items-center justify-center gap-2 transition",m==="company"?"bg-white shadow-sm shadow-sky-100/60 text-slate-900":"text-slate-500 hover:text-slate-700"),onClick:()=>{g("company"),I(void 0)},type:"button",children:[r.jsx(Cp,{size:18,className:m==="company"?"text-sky-500":"text-slate-400 transition"}),r.jsx("span",{className:"font-medium",children:"Compagnie"})]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:m==="individual"?"Parfait pour planifier tes trajets personnels, dfinir des prfrences et suivre tes rservations.":"Pens pour les quipes et flottes professionnelles qui souhaitent grer plusieurs trajets."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Mthode dinscription"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-slate-100/80 p-1.5 rounded-2xl text-sm",children:[r.jsxs("button",{className:zs("flex-1 basis-32 rounded-xl px-4 py-2 flex items-center justify-center gap-2 transition",h==="password"?"bg-white shadow-sm shadow-sky-100/60 text-slate-900":"text-slate-500 hover:text-slate-700"),onClick:()=>{f("password"),z()},type:"button",children:[r.jsx(qo,{size:18,className:h==="password"?"text-sky-500":"text-slate-400 transition"}),r.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),r.jsxs("button",{className:zs("flex-1 basis-32 rounded-xl px-4 py-2 flex items-center justify-center gap-2 transition",h==="gmail"?"bg-white shadow-sm shadow-sky-100/60 text-slate-900":"text-slate-500 hover:text-slate-700"),onClick:()=>{f("gmail"),z()},type:"button",children:[r.jsx(Nr,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"Gmail + OTP"})]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:h==="password"?"Cre un mot de passe que tu pourras modifier  tout moment dans ton espace compte.":"Nous envoyons un code unique sur ton adresse Gmail pour valider la cration sans mot de passe."})]})]}),h==="password"?r.jsxs("form",{onSubmit:fe,className:"space-y-5",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Email"}),r.jsx("input",{type:"email",className:"input w-full",value:_,onChange:be=>y(be.currentTarget.value),placeholder:"contact@karigo.ci",required:!0})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Mot de passe"}),r.jsx("input",{type:"password",className:"input w-full",value:v,onChange:be=>k(be.currentTarget.value),placeholder:"",required:!0})]})]}),m==="individual"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Prnom"}),r.jsx("input",{type:"text",className:"input w-full",value:C,onChange:be=>S(be.currentTarget.value),placeholder:"Prnom",required:!0})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Nom"}),r.jsx("input",{type:"text",className:"input w-full",value:j,onChange:be=>w(be.currentTarget.value),placeholder:"Nom",required:!0})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Phrase daccroche (optionnel)"}),r.jsx("input",{type:"text",className:"input w-full",value:A,onChange:be=>F(be.currentTarget.value),placeholder:"Toujours  lheure, trajet confortable garanti"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Optionnel  visible sur ton profil quand tu proposes un trajet."})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Prfrences de confort (spares par des virgules)"}),r.jsx("input",{type:"text",className:"input w-full",value:N,onChange:be=>O(be.currentTarget.value),placeholder:"Climatisation, musique douce, bouteille deau"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Exemple: Climatisation, Wi-Fi, Snacks."})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Nom de la compagnie"}),r.jsx("input",{type:"text",className:"input w-full",value:R,onChange:be=>V(be.currentTarget.value),placeholder:"KariGo Transports",required:!0})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Numro dimmatriculation (optionnel)"}),r.jsx("input",{type:"text",className:"input w-full",value:$,onChange:be=>T(be.currentTarget.value),placeholder:"RC-123456"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Contact principal (optionnel)"}),r.jsx("input",{type:"text",className:"input w-full",value:K,onChange:be=>Y(be.currentTarget.value),placeholder:"Responsable flotte"})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Tlphone du contact (optionnel)"}),r.jsx("input",{type:"tel",className:"input w-full",value:ue,onChange:be=>he(be.currentTarget.value),placeholder:"+225 01 23 45 67 89"})]})]})]}),Oe(ie),r.jsx("button",{type:"submit",disabled:ve||Ve,className:"btn-primary w-full h-11 disabled:opacity-60 disabled:cursor-not-allowed",children:ve||Ve?"Cration":"Crer le compte"})]}):r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[r.jsx(Nr,{className:"h-6 w-6 shrink-0"}),r.jsx("p",{children:"Renseigne une adresse Gmail pour recevoir un code unique. Aprs validation, ton compte KariGo est cr et tu pourras complter les informations manquantes dans ton espace profil."})]}),m==="individual"&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Prnom"}),r.jsx("input",{type:"text",className:"input w-full",value:C,onChange:be=>S(be.currentTarget.value),placeholder:"Prnom",required:!0})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Nom"}),r.jsx("input",{type:"text",className:"input w-full",value:j,onChange:be=>w(be.currentTarget.value),placeholder:"Nom",required:!0})]})]}),le==="email"?r.jsxs("form",{className:"space-y-4",onSubmit:ke,children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Adresse Gmail"}),r.jsx("input",{type:"email",className:"input w-full",value:D,onChange:be=>P(be.currentTarget.value),placeholder:"tonadresse@gmail.com",required:!0})]}),Oe(ie),r.jsx("button",{type:"submit",disabled:H||Ve,className:"btn-primary w-full h-11 disabled:opacity-60 disabled:cursor-not-allowed",children:H||Ve?"Envoi":"Recevoir un code"})]}):r.jsxs("form",{className:"space-y-4",onSubmit:Ne,children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("label",{className:"text-xs font-medium text-slate-600",children:["Code reu sur ",D]}),r.jsx("input",{type:"text",className:"input w-full text-center tracking-widest text-lg",value:G,onChange:be=>J(de(be.currentTarget.value)),maxLength:8,autoComplete:"one-time-code",required:!0})]}),Oe(ie),pe&&r.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[r.jsx(Qi,{size:18,className:"mt-0.5 shrink-0 text-sky-600"}),r.jsx("span",{children:pe})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{type:"submit",disabled:X||Ve,className:"btn-primary flex-1 h-11 disabled:opacity-60 disabled:cursor-not-allowed",children:X||Ve?"Vrification":"Valider le code"}),r.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl border border-slate-300 text-slate-600 hover:bg-slate-100 text-xs font-medium",onClick:()=>{M("email"),J(""),je(void 0),I(void 0)},children:"Changer demail"})]})]})]})]})})}function ck(){const e=ge(y=>y.authReady),t=ge(y=>y.initializeAuth);x.useEffect(()=>{e||t()},[e,t]);const[s,i]=x.useState(""),[o,l]=x.useState(!1),[u,h]=x.useState(),[f,m]=x.useState(),g=async y=>{var k,C;y.preventDefault(),m(void 0),h(void 0);const v=s.trim().toLowerCase();if(!v){m("Indique ton adresse email.");return}try{l(!0),await nN({email:v}),h("Si un compte est associ  cette adresse, un lien de rinitialisation vient de ttre envoy.")}catch(S){m(((C=(k=S==null?void 0:S.response)==null?void 0:k.data)==null?void 0:C.message)||(S==null?void 0:S.message)||"Impossible denvoyer lemail.")}finally{l(!1)}},_=x.useMemo(()=>r.jsxs("div",{className:"space-y-6","aria-hidden":"true",children:[r.jsxs("span",{className:"auth-panel__badge",children:[r.jsx(ww,{size:16}),"Assistance scurit"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h2",{className:"text-3xl font-semibold tracking-tight leading-tight",children:"Mot de passe oubli ?"}),r.jsx("p",{className:"text-sm leading-relaxed text-white/85",children:"Reois un lien scuris pour choisir un nouveau mot de passe KariGo."})]}),r.jsxs("ul",{className:"auth-panel__list text-white/90",children:[r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.18)"},children:r.jsx(Qi,{size:18})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Lien valable quelques minutes"}),r.jsx("p",{className:"text-sm text-white/80",children:"Il suffit douvrir lemail pour continuer."})]})]}),r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.18)"},children:r.jsx(Ys,{size:18})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Aucun risque"}),r.jsx("p",{className:"text-sm text-white/80",children:"Ignore lemail si tu nes pas  lorigine."})]})]})]})]}),[]);return r.jsx(kl,{title:"Rinitialisation",subtitle:"On va taider  retrouver laccs  ton compte.",hero:_,footer:r.jsxs(r.Fragment,{children:["Tu connais ton mot de passe ?"," ",r.jsx(ze,{to:"/login",className:"text-sky-600 font-semibold",children:"Retour  la connexion"})]}),children:r.jsxs("form",{className:"card highlight p-5 sm:p-6 lg:p-8 space-y-5",onSubmit:g,children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Adresse email"}),r.jsx("input",{type:"email",className:"input w-full",value:s,onChange:y=>i(y.currentTarget.value),placeholder:"utilisateur@karigo.ci",required:!0})]}),u&&r.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:[r.jsx(Qi,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{children:u})]}),f&&r.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-600",children:[r.jsx(Ys,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{children:f})]}),r.jsx("button",{type:"submit",disabled:o,className:"btn-primary w-full h-11 disabled:opacity-60 disabled:cursor-not-allowed",children:o?"Envoi":"Recevoir un lien"}),r.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Pense  vrifier tes spams si tu ne vois rien arriver dans les prochaines minutes."})]})})}function uk(){const[e]=H1(),t=e.get("token")??"",s=ge(V=>V.authReady),i=ge(V=>V.initializeAuth),o=ge(V=>V.setSession);x.useEffect(()=>{s||i()},[s,i]);const l=Ft(),[u,h]=x.useState(t),[f,m]=x.useState(!!t),[g,_]=x.useState(""),[y,v]=x.useState(""),[k,C]=x.useState(!1),[S,j]=x.useState(),[w,N]=x.useState();x.useEffect(()=>{t&&(h(t),m(!0))},[t]);const O=x.useMemo(()=>{if(!u)return"";const[V="",$=""]=u.split(":"),T=V.slice(0,6),K=$.slice(-4);return`${T||""}${K||""}`},[u]),A=V=>{switch(V){case"reset_expired":return"Le lien a expir. Relance une demande depuis la page Mot de passe oubli.";case"reset_invalid":case"reset_used":case"reset_blocked":return"Ce lien ne peut pas tre utilis. Fais-en gnrer un nouveau.";case"account_suspended":return"Ton compte est suspendu. Contacte un administrateur.";default:return V||"Impossible de mettre  jour ton mot de passe."}},F=async V=>{var T,K;V.preventDefault(),j(void 0),N(void 0);const $=u.trim();if(!$){j("Colle le lien reu par email.");return}if(!g||g.length<8){j("Choisis un mot de passe dau moins 8 caractres.");return}if(g!==y){j("Les mots de passe ne correspondent pas.");return}try{C(!0);const Y=await rN({token:$,password:g});o(Y.token,Y.account),N("Mot de passe mis  jour. Redirection en cours"),setTimeout(()=>{l("/",{replace:!0})},500)}catch(Y){j(A(((K=(T=Y==null?void 0:Y.response)==null?void 0:T.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)))}finally{C(!1)}},R=x.useMemo(()=>r.jsxs("div",{className:"space-y-6","aria-hidden":"true",children:[r.jsxs("span",{className:"auth-panel__badge",children:[r.jsx(qo,{size:16}),"Scurise ton accs"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h2",{className:"text-3xl font-semibold tracking-tight leading-tight",children:"Choisis un nouveau mot de passe"}),r.jsx("p",{className:"text-sm leading-relaxed text-white/85",children:"Le lien reu par email permet de valider que tu es bien le propritaire du compte."})]}),r.jsxs("ul",{className:"auth-panel__list text-white/90",children:[r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.18)"},children:r.jsx(K0,{size:18})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Un seul lien par demande"}),r.jsx("p",{className:"text-sm text-white/80",children:"Il expire automatiquement pour protger ton compte."})]})]}),r.jsxs("li",{children:[r.jsx("span",{className:"icon text-white",style:{background:"rgba(15,23,42,.18)"},children:r.jsx(Pp,{size:18})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Accs immdiat"}),r.jsx("p",{className:"text-sm text-white/80",children:"Une fois valid, tu es directement connect."})]})]})]})]}),[]);return r.jsx(kl,{title:"Nouveau mot de passe",subtitle:"Colle le lien reu pour finaliser la rinitialisation.",hero:R,footer:r.jsxs(r.Fragment,{children:["Tu nas pas reu demail ?"," ",r.jsx(ze,{to:"/forgot-password",className:"text-sky-600 font-semibold",children:"Relancer lenvoi"})]}),children:r.jsxs("form",{className:"card highlight p-5 sm:p-6 lg:p-8 space-y-5",onSubmit:F,children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Jeton de rinitialisation"}),f?r.jsxs("div",{className:"flex flex-col gap-2 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700",children:[r.jsxs("div",{className:"flex items-center gap-2 font-semibold text-slate-800",children:[r.jsx(rw,{size:16}),"Jeton scuris dtect"]}),r.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:O}),r.jsx("button",{type:"button",className:"self-start text-xs font-semibold text-sky-600 hover:text-sky-700",onClick:()=>{h(""),m(!1)},children:"Utiliser un autre lien"})]}):r.jsx("input",{type:"text",className:"input w-full",value:u,onChange:V=>h(V.currentTarget.value),placeholder:"Ex: 123e4567-...:abcd1234",required:!0})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Nouveau mot de passe"}),r.jsx("input",{type:"password",className:"input w-full",value:g,onChange:V=>_(V.currentTarget.value),placeholder:"",minLength:8,required:!0})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Confirmation"}),r.jsx("input",{type:"password",className:"input w-full",value:y,onChange:V=>v(V.currentTarget.value),placeholder:"",minLength:8,required:!0})]}),w&&r.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:[r.jsx(Pp,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{children:w})]}),S&&r.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-600",children:[r.jsx(Ys,{size:18,className:"mt-0.5 shrink-0"}),r.jsx("span",{children:S})]}),r.jsx("button",{type:"submit",disabled:k,className:"btn-primary w-full h-11 disabled:opacity-60 disabled:cursor-not-allowed",children:k?"Validation":"Mettre  jour"})]})})}function xi(e){if(!e)return"";try{return new Date(e).toLocaleString("fr-FR",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})}catch{return e}}function dk(e){return e.split(" ").map(t=>t.charAt(0)).join("").slice(0,2).toUpperCase()}function Qa(e){var t,s,i,o;return((s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.message)||((o=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:o.error)||(e==null?void 0:e.message)||"Erreur inattendue"}function Ac(e){return`Bonjour, je suis intress par votre trajet ${e.originCity}  ${e.destinationCity} prvu ${e.dateLabel}  ${e.timeLabel}. Est-ce que des siges sont toujours disponibles ?`}function hk(){const e=ge(z=>z.account),t=ge(z=>z.token),s=ge(z=>z.refreshMessageBadge),i=Pn(),o=Ft(),l=(e==null?void 0:e.id)??"",u=(e==null?void 0:e.type)??"INDIVIDUAL",h=(e==null?void 0:e.fullName)??(e==null?void 0:e.companyName)??(e==null?void 0:e.email)??"Moi",f=(e==null?void 0:e.id)??"guest",[m,g]=x.useState([]),[_,y]=x.useState(null),[v,k]=x.useState([]),[C,S]=x.useState(null),[j,w]=x.useState(!1),[N,O]=x.useState(!1),[A,F]=x.useState(!1),[R,V]=x.useState(!1),[$,T]=x.useState(""),[K,Y]=x.useState(""),[ue,he]=x.useState(""),[ve,Z]=x.useState(null),[le,M]=x.useState(null),[D,P]=x.useState(null),[G,J]=x.useState(""),[H,B]=x.useState(!1),X=x.useMemo(()=>m.find(z=>z.id===_)??null,[m,_]),ee=x.useMemo(()=>{if(!G.trim())return m;const z=G.trim().toLowerCase();return m.filter(fe=>{var Ve,Oe;const ke=((Ve=fe.otherParticipant.label)==null?void 0:Ve.toLowerCase())??"",Ne=((Oe=fe.lastMessagePreview)==null?void 0:Oe.toLowerCase())??"";return ke.includes(z)||Ne.includes(z)})},[G,m]),pe=x.useMemo(()=>{if(!D)return null;const z=new Date(D.departureAt);return{...D,dateLabel:z.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"}),timeLabel:z.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}},[D]);x.useEffect(()=>{const z=i.state;if(z!=null&&z.contact&&(M(z.contact),z.contact.email&&Y(fe=>fe||z.contact.email||""),B(!0)),z!=null&&z.rideContext&&(P(z.rideContext),!ue.trim())){const fe={...z.rideContext,dateLabel:new Date(z.rideContext.departureAt).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"}),timeLabel:new Date(z.rideContext.departureAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})};he(Ac(fe)),T(Ac(fe))}(z!=null&&z.contact||z!=null&&z.rideContext)&&o(i.pathname,{replace:!0})},[i.state,i.pathname,o,ue]),x.useEffect(()=>{l&&je()},[l]),x.useEffect(()=>{!_||!l||ie(_)},[_,l]),x.useEffect(()=>{_||k([])},[_]);const je=async()=>{if(l){w(!0),Z(null);try{const[z,fe]=await Promise.all([Fj(l),Zu(l)]);g(z),S(fe),y(ke=>{var Ne;if(ke&&z.some(Ve=>Ve.id===ke))return ke;if(le){const Ve=z.find(Oe=>Oe.otherParticipant.id===le.id);if(Ve)return Ve.id}return((Ne=z[0])==null?void 0:Ne.id)??null}),le&&!z.some(ke=>ke.otherParticipant.id===le.id)&&le.email&&B(!0)}catch(z){Z(Qa(z))}finally{w(!1)}}},ie=async z=>{O(!0),Z(null);try{const fe=await $j(z,l);k(fe),await Uj(z,l).catch(()=>{}),await s();const ke=await Zu(l);S(ke)}catch(fe){Z(Qa(fe))}finally{O(!1)}},I=async()=>{if(!X||!$.trim())return;const z=X.otherParticipant;F(!0),Z(null);try{const fe=await Vu({senderId:l,senderType:u,senderLabel:h,recipientId:z.id,recipientType:z.type,recipientLabel:z.label??"Destinataire",body:$.trim()});T(""),k(ke=>[...ke,fe.message]),g(ke=>{const Ne=ke.filter(Ve=>Ve.id!==fe.conversation.id);return[fe.conversation,...Ne]}),y(fe.conversation.id),await s()}catch(fe){Z(Qa(fe))}finally{F(!1)}},de=async()=>{if(!(!K.trim()||!ue.trim()||!l||!t)){V(!0),Z(null);try{const z=await mN(K.trim(),t);if(z.id===l)throw new Error("Tu ne peux pas te contacter toi-mme.");const fe=await Vu({senderId:l,senderType:u,senderLabel:h,recipientId:z.id,recipientType:z.type,recipientLabel:z.fullName??z.companyName??z.email,body:ue.trim()});Y(""),he(""),B(!1),M(null),P(null),k([fe.message]),D&&Hg(f,{rideId:D.rideId,driverId:z.id,driverType:z.type,driverLabel:z.fullName??z.companyName??z.email??"Conducteur KariGo",originCity:D.originCity,destinationCity:D.destinationCity,departureAt:D.departureAt,lastMessagePreview:ue.trim().slice(0,140)}),g(ke=>{const Ne=ke.filter(Ve=>Ve.id!==fe.conversation.id);return[fe.conversation,...Ne]}),y(fe.conversation.id),await s()}catch(z){Z(Qa(z))}finally{V(!1)}}},se=z=>{T(z)};return e?r.jsx("div",{className:"min-h-[calc(100vh-80px)] bg-slate-50/40 py-6",children:r.jsxs("div",{className:"container-wide space-y-5",children:[r.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Messagerie KariGo"}),r.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Mes conversations"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Discute avec les conducteurs ou passagers pour finaliser les dtails dun trajet."})]}),C&&r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-600 flex items-center gap-3 shadow-sm",children:[r.jsx(Sp,{size:18,className:"text-sky-500"}),r.jsx("span",{className:"font-semibold text-slate-900",children:C.unreadConversations}),"conv. non lues /"," ",r.jsx("span",{className:"font-semibold text-slate-900",children:C.unreadMessages})," messages"]})]}),ve&&r.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:ve}),r.jsxs("div",{className:"grid gap-5 xl:grid-cols-[320px,minmax(0,1fr),300px]",children:[r.jsxs("aside",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 font-semibold",children:"Contacts"}),r.jsxs("p",{className:"text-xs text-slate-400",children:[m.length," conversation(s)"]})]}),r.jsxs("button",{onClick:je,className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 hover:border-sky-200 hover:text-sky-600",children:[r.jsx(ps,{size:14}),"Sync"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Q0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),r.jsx("input",{className:"input pl-9 text-sm",placeholder:"Rechercher un contact",value:G,onChange:z=>J(z.currentTarget.value)})]}),r.jsxs("div",{className:"max-h-[420px] overflow-y-auto pr-1 space-y-1",children:[j&&r.jsx("p",{className:"text-xs text-slate-400 px-1",children:"Chargement"}),!j&&ee.length===0&&r.jsx("p",{className:"text-sm text-slate-500 px-1",children:"Aucun change pour le moment."}),ee.map(z=>{const fe=z.otherParticipant.label??z.otherParticipant.id,ke=dk(fe);return r.jsx("button",{onClick:()=>y(z.id),className:`w-full rounded-2xl border px-3 py-2 text-left transition ${z.id===_?"border-sky-300 bg-sky-50":"border-slate-200 hover:bg-slate-50"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-9 w-9 rounded-full bg-slate-100 text-slate-600 grid place-items-center font-semibold",children:ke||r.jsx(ew,{size:18})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 text-sm font-semibold text-slate-800",children:[r.jsx("span",{className:"truncate",children:fe}),z.unreadCount>0&&r.jsx("span",{className:"rounded-full bg-sky-500 px-2 text-[11px] font-semibold text-white",children:z.unreadCount})]}),r.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:z.lastMessagePreview??"Aucun message"}),r.jsx("p",{className:"text-[11px] text-slate-400",children:xi(z.lastMessageAt)})]})]})},z.id)})]}),r.jsxs("div",{className:"border-t border-slate-100 pt-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase text-slate-500",children:[r.jsx(dw,{size:14}),"Nouveau message"]}),r.jsx("button",{type:"button",onClick:()=>B(z=>!z),className:"w-full rounded-2xl border border-dashed border-slate-300 px-3 py-2 text-sm font-semibold text-slate-600 hover:border-slate-400",children:H?"Fermer le formulaire":"Contact direct"}),H&&r.jsxs("div",{className:"space-y-2",children:[le&&r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600",children:["Prrempli pour"," ",r.jsx("span",{className:"font-semibold text-slate-800",children:le.label??le.email??le.id})]}),r.jsx("input",{className:"input text-sm",placeholder:"Email du destinataire",value:K,onChange:z=>Y(z.currentTarget.value)}),r.jsx("textarea",{className:"input h-24 text-sm",placeholder:"Ton message",value:ue,onChange:z=>he(z.currentTarget.value)}),r.jsxs("button",{onClick:de,disabled:R||!K.trim()||!ue.trim()||!t,className:"btn-primary w-full h-10 flex items-center justify-center gap-2 disabled:opacity-60",children:[r.jsx(fw,{size:16}),"Dmarrer"]})]})]})]}),r.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm flex flex-col min-h-[600px]",children:X?r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"border-b border-slate-100 px-5 py-4 flex items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Discussion"}),r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:X.otherParticipant.label??X.otherParticipant.id}),r.jsx("p",{className:"text-xs text-slate-500",children:X.otherParticipant.type==="COMPANY"?"Compte entreprise":"Compte particulier"})]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Dernier message ",xi(X.lastMessageAt)]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-3 bg-slate-50/40",children:[N&&r.jsx("div",{className:"text-xs text-slate-400",children:"Chargement des messages"}),v.length===0&&!N&&r.jsx("div",{className:"text-sm text-slate-500",children:"Commence la conversation avec un premier message."}),v.map(z=>{const fe=z.senderId===l,ke=z.status==="READ";return r.jsx("div",{className:`flex ${fe?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`rounded-2xl px-4 py-3 max-w-[75%] text-sm shadow-sm ${fe?"bg-sky-500 text-white":"bg-white text-slate-800 border border-slate-100"}`,children:[r.jsx("p",{className:"whitespace-pre-line",children:z.body}),r.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px] opacity-80 gap-4",children:[r.jsx("span",{children:xi(z.createdAt)}),fe&&r.jsx(J1,{size:14,className:ke?"text-white":"text-white/60"})]})]})},z.id)})]}),r.jsxs("footer",{className:"border-t border-slate-100 px-5 py-4 space-y-3",children:[pe&&r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[r.jsx("span",{children:"Ajoute un extrait :"}),r.jsxs("button",{type:"button",onClick:()=>se(Ac(pe)),className:"rounded-full border border-slate-200 px-3 py-1 text-slate-600 hover:border-sky-200 hover:text-sky-600",children:["Trajet ",pe.originCity,"  ",pe.destinationCity]})]}),r.jsxs("div",{className:"flex items-end gap-3",children:[r.jsx("textarea",{className:"input flex-1 min-h-[64px]",placeholder:"crire un message",value:$,onChange:z=>T(z.currentTarget.value)}),r.jsxs("button",{onClick:I,disabled:A||!$.trim(),className:"btn-primary h-12 px-4 flex items-center gap-2 disabled:opacity-60",children:[r.jsx(Kd,{size:18}),"Envoyer"]})]})]})]}):r.jsx("div",{className:"flex flex-1 items-center justify-center text-slate-500 px-6 text-center",children:"Slectionne une conversation ou ouvre un nouveau message pour changer avec un conducteur."})}),r.jsxs("aside",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm space-y-4",children:[X?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Contact"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:X.otherParticipant.label??X.otherParticipant.id}),r.jsx("p",{className:"text-xs text-slate-500",children:X.otherParticipant.type==="COMPANY"?"Professionnel":"Particulier"})]}),r.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3 text-sm text-slate-600 space-y-2",children:[r.jsxs("p",{children:["Dernier message le"," ",r.jsx("span",{className:"font-semibold text-slate-800",children:xi(X.lastMessageAt)})]}),r.jsxs("p",{children:["Total messages:"," ",r.jsx("span",{className:"font-semibold text-slate-800",children:X.lastMessagePreview&&v.length||""})]})]})]}):r.jsx("div",{className:"text-sm text-slate-500",children:"Aucun contact slectionn. Choisis un trajet pour afficher ses informations."}),pe&&r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase text-slate-500 font-semibold",children:[r.jsx(X1,{size:14}),"Trajet concern"]}),r.jsxs("div",{className:"text-sm text-slate-700 font-semibold",children:[pe.originCity,"  ",pe.destinationCity]}),r.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[r.jsx(ss,{size:14}),pe.dateLabel,"  ",pe.timeLabel]}),r.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[r.jsx(er,{size:14}),"ID: ",pe.rideId.slice(0,8).toUpperCase()]}),r.jsxs(ze,{to:`/ride/${pe.rideId}`,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1.5 text-xs font-semibold text-slate-600 hover:border-sky-200 hover:text-sky-600",children:["Ouvrir le dtail",r.jsx(es,{size:14})]})]}),C&&C.items.length>0&&r.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase text-slate-500",children:[r.jsx(Sp,{size:14,className:"text-sky-500"}),"Derniers vnements"]}),r.jsx("ul",{className:"space-y-2 text-sm text-slate-600",children:C.items.slice(0,3).map(z=>{var fe;return r.jsxs("li",{className:"text-xs",children:[r.jsx("span",{className:"font-semibold text-slate-800",children:((fe=z.sender)==null?void 0:fe.label)??"Contact"})," ","- ",z.preview??"Nouveau message"," (",xi(z.createdAt),")"]},z.id)})})]})]})]})]})}):r.jsx("div",{className:"container-wide py-8",children:"Connecte-toi pour accder aux messages."})}const dh={ACTIVE:"Actif",SUSPENDED:"Suspendu"},Sl={USER:"Utilisateur",ADMIN:"Administrateur"},da={INDIVIDUAL:"Particulier",COMPANY:"Entreprise"},fk=new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),pk=new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric"}),gi=20,Rc=5,mk={recipient_scope_requires_account:"Slectionne un compte KariGo existant ou passe la porte sur Catalogue global.",recipient_required:"Renseigne une adresse destinataire valide.",ride_fetch_failed:"Impossible de rcuprer les trajets  partager pour le moment."};function Xn(e,t=!0){if(!e)return"";try{return t?fk.format(new Date(e)):pk.format(new Date(e))}catch{return e}}function gm(e){return`${(Number.isFinite(e)?e:0).toLocaleString("fr-FR")} FCFA`}function xk(){const e=ge(Q=>Q.token),t=ge(Q=>Q.account),[s,i]=x.useState({status:"ALL",type:"ALL",search:""}),[o,l]=x.useState(""),[u,h]=x.useState(0),[f,m]=x.useState(!1),[g,_]=x.useState(),[y,v]=x.useState(),[k,C]=x.useState(),[S,j]=x.useState(),[w,N]=x.useState(),[O,A]=x.useState(!1),[F,R]=x.useState(),[V,$]=x.useState(),[T,K]=x.useState(!1),[Y,ue]=x.useState(),[he,ve]=x.useState({}),[Z,le]=x.useState({loading:!1,data:[]}),[M,D]=x.useState({loading:!1,data:[]}),P=(t==null?void 0:t.email)??"",G=Array.isArray(Z.data)?Z.data.length:0,J=Array.isArray(M.data)?M.data.length:0,H=Z.summary,B=M.summary,X=(t==null?void 0:t.role)==="ADMIN",ee=(y==null?void 0:y.total)??0,pe=(y==null?void 0:y.data)??[],je=s.status!=="ALL"||s.type!=="ALL"||!!s.search,ie=s.status==="ALL"?"Tous les statuts":dh[s.status],I=s.type==="ALL"?"Tous les types":da[s.type],de=!f&&pe.length===0,se=x.useCallback(async()=>{var Q,oe;if(e){m(!0),_(void 0);try{const Ce=await iN(e,{status:s.status==="ALL"?void 0:s.status,type:s.type==="ALL"?void 0:s.type,search:s.search||void 0,offset:u*gi,limit:gi});v(Ce)}catch(Ce){_(((oe=(Q=Ce==null?void 0:Ce.response)==null?void 0:Q.data)==null?void 0:oe.message)||(Ce==null?void 0:Ce.message)||"Impossible de charger les comptes.")}finally{m(!1)}}},[s,u,e]);x.useEffect(()=>{h(0)},[s.status,s.type,s.search]),x.useEffect(()=>{X&&se()},[X,se]),x.useEffect(()=>{j(void 0),N(void 0),R(void 0),A(!1)},[s.status,s.type,s.search]);const z=x.useMemo(()=>y?Math.max(1,Math.ceil(y.total/gi)):1,[y]),fe=x.useMemo(()=>{if(S)return y==null?void 0:y.data.find(Q=>Q.id===S)},[y,S]),ke=x.useMemo(()=>{var oe;const Q=(oe=y==null?void 0:y.stats)==null?void 0:oe.byStatus;return[{value:"ALL",label:"Tous",count:(y==null?void 0:y.total)??0},{value:"ACTIVE",label:"Actifs",count:(Q==null?void 0:Q.ACTIVE)??0},{value:"SUSPENDED",label:"Suspendus",count:(Q==null?void 0:Q.SUSPENDED)??0}]},[y]),Ne=x.useMemo(()=>{if(y!=null&&y.data)return y.data.reduce((Q,oe)=>(Q[oe.type]=(Q[oe.type]??0)+1,Q),{INDIVIDUAL:0,COMPANY:0})},[y==null?void 0:y.data]),Ve=x.useMemo(()=>[{value:"ALL",label:"Tous",count:(y==null?void 0:y.total)??0},{value:"INDIVIDUAL",label:"Particuliers",count:Ne==null?void 0:Ne.INDIVIDUAL},{value:"COMPANY",label:"Entreprises",count:Ne==null?void 0:Ne.COMPANY}],[y==null?void 0:y.total,Ne]),Oe=ee===0?0:u*gi+1,Yt=Math.min(ee,(u+1)*gi);if(!e)return r.jsx(Ho,{to:"/login",replace:!0});if(!X)return r.jsx(Ho,{to:"/",replace:!0});const be=Q=>{Q.preventDefault();const oe=o.trim();l(oe),i(Ce=>({...Ce,search:oe}))},ne=()=>{i({status:"ALL",type:"ALL",search:""}),l("")},De=async()=>{await se()},we=x.useCallback(async(Q,{preserveSelection:oe=!1}={})=>{var Ce,Pe,Me,Fe;if(e){oe||j(Q),N(void 0),R(void 0),$(void 0),ue(void 0),ve({}),A(!0);try{const Ze=await cN(e,Q);if(N(Ze),Ze.account.type==="COMPANY"){K(!0);try{const ct=await rm(Ze.account.id,{status:"ALL"});$(ct)}catch(ct){ue(((Pe=(Ce=ct==null?void 0:ct.response)==null?void 0:Ce.data)==null?void 0:Pe.message)||(ct==null?void 0:ct.message)||"Impossible de charger la flotte.")}finally{K(!1)}}else $(void 0)}catch(Ze){R(((Fe=(Me=Ze==null?void 0:Ze.response)==null?void 0:Me.data)==null?void 0:Fe.message)||(Ze==null?void 0:Ze.message)||"Impossible de charger lactivit.")}finally{A(!1)}}},[e]),Ee=x.useCallback(async(Q,oe)=>{if(!e)return;const Ce=await lN(e,Q,oe);return v(Pe=>Pe&&{...Pe,data:Pe.data.map(Me=>Me.id===Ce.id?{...Me,...Ce}:Me)}),N(Pe=>Pe&&{...Pe,account:Ce}),Ce},[e]),We=x.useCallback(async()=>{var oe,Ce;const Q=w==null?void 0:w.account;if(!(!Q||Q.type!=="COMPANY")){K(!0),ue(void 0);try{const Pe=await rm(Q.id,{status:"ALL"});$(Pe)}catch(Pe){ue(((Ce=(oe=Pe==null?void 0:Pe.response)==null?void 0:oe.data)==null?void 0:Ce.message)||(Pe==null?void 0:Pe.message)||"Impossible de charger la flotte.")}finally{K(!1)}}},[w==null?void 0:w.account]),gt=x.useCallback(async(Q,oe="upcoming")=>{const Ce=w==null?void 0:w.account;if(!(!Ce||Ce.type!=="COMPANY")){ve(Pe=>{var Me;return{...Pe,[Q]:{loading:!0,items:((Me=Pe[Q])==null?void 0:Me.items)??[],window:oe}}});try{const Pe=await Jj(Ce.id,Q,{window:oe});ve(Me=>({...Me,[Q]:{loading:!1,items:Pe.data,window:oe}}))}catch(Pe){ve(Me=>{var Fe,Ze,ct;return{...Me,[Q]:{loading:!1,items:((Fe=Me[Q])==null?void 0:Fe.items)??[],window:oe,error:((ct=(Ze=Pe==null?void 0:Pe.response)==null?void 0:Ze.data)==null?void 0:ct.message)||(Pe==null?void 0:Pe.message)||"Impossible de charger les plannings."}}})}}},[w==null?void 0:w.account]),re=x.useCallback(async()=>{var oe,Ce,Pe,Me;if(!e||(t==null?void 0:t.role)!=="ADMIN")return;const Q=new Date().toISOString();le(Fe=>({...Fe,loading:!0,error:void 0})),D(Fe=>({...Fe,loading:!0,error:void 0}));try{const Fe=await om(e,{departureAfter:Q,sort:"departure_asc",limit:200});le({loading:!1,data:Fe.data,summary:Fe.summary,error:void 0})}catch(Fe){le({loading:!1,data:[],summary:void 0,error:((Ce=(oe=Fe==null?void 0:Fe.response)==null?void 0:oe.data)==null?void 0:Ce.message)||(Fe==null?void 0:Fe.message)||"Impossible de charger les trajets  venir."})}try{const Fe=await om(e,{departureBefore:Q,sort:"departure_desc",limit:200});D({loading:!1,data:Fe.data,summary:Fe.summary,error:void 0})}catch(Fe){D({loading:!1,data:[],summary:void 0,error:((Me=(Pe=Fe==null?void 0:Fe.response)==null?void 0:Pe.data)==null?void 0:Me.message)||(Fe==null?void 0:Fe.message)||"Impossible de charger les trajets passs."})}},[e,t==null?void 0:t.role]);x.useEffect(()=>{(t==null?void 0:t.role)==="ADMIN"&&re()},[t==null?void 0:t.role,re]);const Be=x.useCallback(async(Q,oe)=>{if(!e||!S)return;const Ce=await im(e,Q,oe);return await we(S,{preserveSelection:!0}),Ce},[e,S,we]),Ye=x.useCallback(async Q=>{if(!e||!S)return;const oe=await am(e,Q);return await we(S,{preserveSelection:!0}),oe},[e,S,we]),tt=x.useCallback(async(Q,oe)=>{if(!e)return;const Ce=await im(e,Q,oe);return await re(),S&&await we(S,{preserveSelection:!0}),Ce},[e,re,S,we]),_t=x.useCallback(async Q=>{if(!e)return;const oe=await am(e,Q);return await re(),S&&await we(S,{preserveSelection:!0}),oe},[e,re,S,we]),as=x.useCallback(async Q=>{if(!e)throw new Error("missing_token");return uN(e,Q)},[e]),kt=async Q=>{var Ce,Pe;if(!e)return;const oe=Q.status==="ACTIVE"?"SUSPENDED":"ACTIVE";C(Q.id),_(void 0);try{await aN(e,Q.id,oe),await De(),S===Q.id&&await we(Q.id,{preserveSelection:!0})}catch(Me){_(((Pe=(Ce=Me==null?void 0:Me.response)==null?void 0:Ce.data)==null?void 0:Pe.message)||(Me==null?void 0:Me.message)||"Impossible de modifier le statut.")}finally{C(void 0)}},Xt=async Q=>{var Ce,Pe;if(!e)return;const oe=Q.role==="ADMIN"?"USER":"ADMIN";C(Q.id),_(void 0);try{await oN(e,Q.id,oe),await De(),S===Q.id&&await we(Q.id,{preserveSelection:!0})}catch(Me){_(((Pe=(Ce=Me==null?void 0:Me.response)==null?void 0:Ce.data)==null?void 0:Pe.message)||(Me==null?void 0:Me.message)||"Impossible de modifier le rle.")}finally{C(void 0)}},gs=async Q=>{await we(Q.id,{preserveSelection:!1})},te=Q=>Q.id===(t==null?void 0:t.id),me=Q=>Q.id===(t==null?void 0:t.id);return r.jsxs("section",{className:"max-w-7xl mx-auto px-4 py-10 space-y-10",children:[r.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white/90 p-8 lg:p-10 shadow-xl shadow-sky-100/40 backdrop-blur space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-sky-100 px-3 py-1 text-[11px] font-semibold text-sky-700",children:"Tableau de bord administrateur"}),r.jsx("h1",{className:"text-3xl lg:text-4xl font-semibold text-slate-900",children:"Supervise les comptes et garde le contrle sur les trajets publis."}),r.jsx("p",{className:"text-sm text-slate-500 lg:max-w-2xl",children:"Gre les accs, ajuste les profils et actionne les dcisions mtier sans quitter cette page. Le tableau de bord se veut fluide, lisible et orient actions rapides."})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 w-full lg:max-w-xl",children:[r.jsx(Ic,{title:"Comptes actifs",value:(y==null?void 0:y.stats.byStatus.ACTIVE)??0,tone:"green"}),r.jsx(Ic,{title:"Comptes suspendus",value:(y==null?void 0:y.stats.byStatus.SUSPENDED)??0,tone:"amber"}),r.jsx(Ic,{title:"Administrateurs",value:(y==null?void 0:y.stats.byRole.ADMIN)??0,tone:"sky"})]})]}),r.jsxs("form",{onSubmit:be,className:"grid gap-4 lg:grid-cols-[minmax(0,1fr),auto] items-end bg-slate-900/3 rounded-2xl p-4 border border-slate-100",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Recherche globale"}),r.jsxs("div",{className:"mt-1 flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 shadow-sm focus-within:ring-2 focus-within:ring-sky-200",children:[r.jsx("input",{type:"search",className:"flex-1 border-none bg-transparent text-sm text-slate-700 focus:outline-none",placeholder:"Email, nom, entreprise",value:o,onChange:Q=>l(Q.target.value)}),s.search&&r.jsx("button",{type:"button",onClick:()=>{l(""),i(Q=>({...Q,search:""}))},className:"text-xs font-semibold text-slate-400 hover:text-slate-600",children:"Effacer"})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(vm,{label:"Statut",value:s.status,options:ke,onChange:Q=>i(oe=>({...oe,status:Q}))}),r.jsx(vm,{label:"Type de compte",value:s.type,options:Ve,onChange:Q=>i(oe=>({...oe,type:Q}))})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-end",children:[r.jsx("button",{type:"button",onClick:()=>{i({status:"ALL",type:"ALL",search:""}),l("")},className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-slate-300",children:"Rinitialiser"}),r.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-sky-600 px-5 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-sky-700",children:"Appliquer"})]})]})]}),(t==null?void 0:t.role)==="ADMIN"&&r.jsxs("section",{className:"grid gap-6 xl:grid-cols-[minmax(0,1fr),minmax(320px,1fr)]",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-6 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Catalogue global"}),r.jsxs("p",{className:"text-lg font-semibold text-slate-900",children:[G+J," trajets suivis"]}),r.jsxs("p",{className:"text-sm text-slate-500",children:[(H==null?void 0:H.upcoming)??G,"  venir  ",J," archivs"]})]}),r.jsxs("button",{type:"button",onClick:()=>void re(),disabled:Z.loading||M.loading,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:[r.jsx(ps,{size:14})," Rafrachir"]})]}),r.jsxs("div",{className:"mt-4 grid gap-3 text-sm text-slate-600 sm:grid-cols-3",children:[r.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Places proposes"}),r.jsx("p",{className:"text-lg font-semibold text-slate-900",children:((H==null?void 0:H.seatsTotal)??0).toLocaleString("fr-FR")})]}),r.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Rservations"}),r.jsx("p",{className:"text-lg font-semibold text-slate-900",children:(((H==null?void 0:H.seatsBooked)??0)+((B==null?void 0:B.seatsBooked)??0)).toLocaleString("fr-FR")})]}),r.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Prix moyen"}),r.jsxs("p",{className:"text-lg font-semibold text-slate-900",children:[((H==null?void 0:H.averagePrice)??(B==null?void 0:B.averagePrice)??0).toLocaleString("fr-FR")," ","F CFA"]})]})]})]}),r.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[r.jsx(Gu,{title:"Trajets  venir",rides:Z.data,summary:Z.summary,loading:Z.loading,error:Z.error,enableDigest:!1,onUpdateRide:tt,onCloseRide:_t,onRefresh:re}),r.jsx(Gu,{title:"Trajets passs",rides:M.data,summary:M.summary,loading:M.loading,error:M.error,enableDigest:!1,onUpdateRide:tt,onCloseRide:_t,onRefresh:re})]})]}),r.jsx(wk,{defaultRecipient:P,disabled:Z.loading||M.loading,onShare:as})]}),g&&r.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 text-sm text-rose-700 px-4 py-3",children:g}),r.jsxs("div",{className:"grid gap-6 xl:grid-cols-[minmax(0,520px),minmax(0,1fr)]",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm",children:[r.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 px-5 py-5 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Rsultats"}),r.jsx("p",{className:"text-lg font-semibold text-slate-900",children:f?"Recherche en cours":`${ee.toLocaleString("fr-FR")} comptes`}),r.jsxs("div",{className:"mt-1 flex flex-wrap gap-2 text-[11px] font-semibold text-slate-500",children:[r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5",children:ie}),r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5",children:I}),s.search&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-amber-50 px-2.5 py-0.5 text-amber-700",children:[" ",s.search," "]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-semibold text-slate-600",children:[r.jsxs("button",{type:"button",onClick:()=>void De(),disabled:f,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 transition hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:[r.jsx(ps,{size:14})," Rafrachir"]}),r.jsx("button",{type:"button",onClick:()=>j(void 0),disabled:!S,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 transition hover:border-slate-300 disabled:opacity-40",children:"Effacer la slection"})]})]}),r.jsx("div",{className:"hidden lg:block overflow-x-auto px-5",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600 uppercase text-xs tracking-wide",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Email"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Profil"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Statut"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Rle"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Dernire connexion"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Connexions"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Cr le"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold",children:"Actions"})]})}),r.jsxs("tbody",{children:[f&&r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-slate-500",children:"Chargement"})}),!f&&pe.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-slate-500",children:"Aucun compte  afficher."})}),!f&&pe.map(Q=>r.jsx(gk,{item:Q,selected:S===Q.id,disabledStatus:te(Q),disabledRole:me(Q),loadingId:k,onSelect:oe=>void we(oe.id),onView:oe=>void gs(oe),onToggleStatus:oe=>void kt(oe),onToggleRole:oe=>void Xt(oe)},Q.id))]})]})}),r.jsxs("div",{className:"lg:hidden space-y-3 px-5 py-5",children:[f&&r.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-center text-sm text-slate-500",children:"Chargement"}),!f&&pe.map(Q=>r.jsx(vk,{item:Q,selected:S===Q.id,disabledStatus:te(Q),disabledRole:me(Q),loadingId:k,onSelect:oe=>void we(oe.id),onView:oe=>void gs(oe),onToggleStatus:oe=>void kt(oe),onToggleRole:oe=>void Xt(oe)},Q.id))]}),de&&r.jsxs("div",{className:"border-t border-slate-100 px-5 py-6 text-center text-sm text-slate-500 space-y-3",children:[r.jsx("p",{children:"Aucun compte ne correspond aux filtres slectionns."}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 text-xs font-semibold",children:[je&&r.jsx("button",{type:"button",onClick:ne,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-slate-600 transition hover:border-slate-300",children:"Rinitialiser les filtres"}),r.jsx("button",{type:"button",onClick:()=>void De(),className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-slate-600 transition hover:border-slate-300",children:"Recharger"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-600",children:[r.jsx("div",{children:ee===0?"Aucun rsultat":`Affichage ${Oe.toLocaleString("fr-FR")}${Yt.toLocaleString("fr-FR")} sur ${ee.toLocaleString("fr-FR")}`}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-3 py-1.5 border border-slate-300 rounded-lg bg-white hover:bg-slate-100 disabled:opacity-40",onClick:()=>h(Q=>Math.max(0,Q-1)),disabled:u===0||f,children:"Prcdent"}),r.jsx("button",{className:"px-3 py-1.5 border border-slate-300 rounded-lg bg-white hover:bg-slate-100 disabled:opacity-40",onClick:()=>h(Q=>Math.min(z-1,Q+1)),disabled:u>=z-1||f,children:"Suivant"})]})]}),fe&&r.jsx(yk,{account:fe,busyId:k,disableStatus:te(fe),disableRole:me(fe),onView:()=>void gs(fe),onToggleStatus:()=>void kt(fe),onToggleRole:()=>void Xt(fe)})]}),r.jsx("div",{children:S?r.jsx(bk,{title:"Trajets du compte",account:(w==null?void 0:w.account)??fe,activity:w,loading:O,error:F,onRefresh:()=>we(S,{preserveSelection:!0}),onSave:async Q=>Ee(S,Q),fleet:V,fleetLoading:T,fleetError:Y,onReloadFleet:We,fleetSchedules:he,onLoadSchedules:gt,onUpdateRide:Be,onCloseRide:Ye,onShareRides:as}):r.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white p-10 text-center text-slate-500",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Slectionne un compte"}),r.jsx("p",{className:"mt-2 text-sm",children:"Choisis un utilisateur dans la liste pour afficher ses informations dtailles, ses trajets et ses statistiques."})]})})]})]})}function hh({status:e}){const t=e==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700";return r.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${t}`,children:dh[e]})}function Ic({title:e,value:t,tone:s}){const i={green:"bg-emerald-50 text-emerald-700 border-emerald-100",amber:"bg-amber-50 text-amber-700 border-amber-100",sky:"bg-sky-50 text-sky-700 border-sky-100"};return r.jsxs("div",{className:`rounded-xl border px-4 py-5 ${i[s]} shadow-sm`,children:[r.jsx("p",{className:"text-xs uppercase font-semibold tracking-wide opacity-80",children:e}),r.jsx("p",{className:"text-2xl font-semibold mt-2",children:t})]})}function vm({label:e,value:t,options:s,onChange:i}){return r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:e}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(o=>{const l=o.value===t;return r.jsxs("button",{type:"button",onClick:()=>i(o.value),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition ${l?"border-sky-200 bg-sky-50 text-sky-700 shadow-sm":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[o.label,typeof o.count=="number"&&r.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] font-semibold text-slate-500",children:o.count})]},o.value)})})]})}function gk({item:e,selected:t,disabledStatus:s,disabledRole:i,loadingId:o,onSelect:l,onView:u,onToggleStatus:h,onToggleRole:f}){return r.jsxs("tr",{onClick:()=>l(e),className:`transition cursor-pointer ${t?"bg-sky-50/70":"hover:bg-slate-50"}`,children:[r.jsx("td",{className:"px-4 py-4 align-top",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:e.email}),r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-[11px] font-medium text-slate-600",children:da[e.type]})]})}),r.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 align-top",children:e.type==="INDIVIDUAL"?e.fullName||"":e.companyName||e.contactName||""}),r.jsx("td",{className:"px-4 py-4 align-top",children:r.jsx(hh,{status:e.status})}),r.jsx("td",{className:"px-4 py-4 align-top",children:r.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold ${e.role==="ADMIN"?"bg-sky-100 text-sky-700":"bg-slate-100 text-slate-600"}`,children:Sl[e.role]})}),r.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 align-top",children:[Xn(e.lastLoginAt),r.jsxs("div",{className:"text-xs text-slate-400",children:[e.loginCount??0," connexions"]})]}),r.jsx("td",{className:"px-4 py-4 align-top",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{onClick:m=>{m.stopPropagation(),u(e)},className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-sky-200 hover:text-sky-600",children:"Voir"}),r.jsx("button",{onClick:m=>{m.stopPropagation(),h(e)},disabled:s||o===e.id,className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-amber-200 hover:text-amber-600 disabled:opacity-50",children:e.status==="ACTIVE"?"Suspendre":"Ractiver"}),r.jsx("button",{onClick:m=>{m.stopPropagation(),f(e)},disabled:i||o===e.id,className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:e.role==="ADMIN"?"Retirer admin":"Promouvoir admin"})]})})]})}function vk({item:e,selected:t,disabledStatus:s,disabledRole:i,loadingId:o,onSelect:l,onView:u,onToggleStatus:h,onToggleRole:f}){return r.jsxs("button",{type:"button",onClick:()=>l(e),className:`w-full text-left rounded-2xl border ${t?"border-sky-200 bg-sky-50/60":"border-slate-200 bg-white"} p-4 shadow-sm transition hover:border-sky-200 hover:bg-sky-50/50`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:e.email}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:e.type==="INDIVIDUAL"?e.fullName||"":e.companyName||e.contactName||""}),r.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5",children:da[e.type]}),r.jsx(hh,{status:e.status}),r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5",children:Sl[e.role]})]})]}),r.jsxs("div",{className:"text-xs text-slate-400 text-right",children:[r.jsx("p",{children:Xn(e.lastLoginAt)}),r.jsxs("p",{children:[e.loginCount??0," connexions"]})]})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 text-xs font-semibold",children:[r.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),u(e)},className:"inline-flex items-center justify-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-slate-600 transition hover:border-sky-200 hover:text-sky-600",children:"Voir"}),r.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),h(e)},disabled:s||o===e.id,className:"inline-flex items-center justify-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-slate-600 transition hover:border-amber-200 hover:text-amber-600 disabled:opacity-50",children:e.status==="ACTIVE"?"Suspendre":"Ractiver"}),r.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),f(e)},disabled:i||o===e.id,className:"inline-flex items-center justify-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-slate-600 transition hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:e.role==="ADMIN"?"Retirer":"Promouvoir"})]})]})}function yk({account:e,busyId:t,disableStatus:s,disableRole:i,onView:o,onToggleStatus:l,onToggleRole:u}){const h=e.status==="ACTIVE"?"Suspendre":"Ractiver",f=e.role==="ADMIN"?"Retirer admin":"Promouvoir admin";return r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-4 shadow-sm",children:[r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Slection actuelle"}),r.jsx("p",{className:"text-base font-semibold text-slate-900",children:e.email}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5",children:da[e.type]}),r.jsx(hh,{status:e.status}),r.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-[11px] font-semibold ${e.role==="ADMIN"?"bg-sky-100 text-sky-700":"bg-slate-100 text-slate-600"}`,children:Sl[e.role]})]})]}),e.profilePhotoUrl&&r.jsx("img",{src:e.profilePhotoUrl,alt:e.fullName||e.companyName||e.email,className:"h-14 w-14 rounded-2xl object-cover border border-slate-200"})]}),r.jsxs("div",{className:"mt-4 grid gap-2 sm:grid-cols-3 text-xs font-semibold",children:[r.jsx("button",{type:"button",onClick:o,className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 px-3 py-2 text-slate-600 transition hover:border-sky-200 hover:text-sky-600",children:"Voir la fiche"}),r.jsx("button",{type:"button",onClick:l,disabled:s||t===e.id,className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 px-3 py-2 text-slate-600 transition hover:border-amber-200 hover:text-amber-600 disabled:opacity-50",children:h}),r.jsx("button",{type:"button",onClick:u,disabled:i||t===e.id,className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 px-3 py-2 text-slate-600 transition hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:f})]})]})}function bk({title:e,account:t,activity:s,loading:i,error:o,onRefresh:l,onSave:u,fleet:h,fleetLoading:f,fleetError:m,onReloadFleet:g,fleetSchedules:_,onLoadSchedules:y,onUpdateRide:v,onCloseRide:k,onShareRides:C}){const[S,j]=x.useState(""),[w,N]=x.useState(!1),[O,A]=x.useState(""),[F,R]=x.useState(""),[V,$]=x.useState(""),[T,K]=x.useState(""),[Y,ue]=x.useState(""),[he,ve]=x.useState(""),[Z,le]=x.useState(""),[M,D]=x.useState([]),[P,G]=x.useState([]),[J,H]=x.useState("default"),[B,X]=x.useState(""),[ee,pe]=x.useState(!0),[je,ie]=x.useState(!1),[I,de]=x.useState(),[se,z]=x.useState();x.useEffect(()=>{if(!t)return;j(t.profilePhotoUrl??""),N(!1),A(t.tagline??""),t.type==="INDIVIDUAL"?($(t.fullName??""),R((t.comfortPreferences??[]).join(", "))):(K(t.companyName??""),ue(t.registrationNumber??""),ve(t.contactName??""),le(t.contactPhone??""),R(""),$(""));const re=t.homePreferences;D(((re==null?void 0:re.favoriteRoutes)??[]).map(Be=>({from:Be.from,to:Be.to}))),G((re==null?void 0:re.quickActions)??[]),H((re==null?void 0:re.theme)??"default"),X((re==null?void 0:re.heroMessage)??""),pe((re==null?void 0:re.showTips)??!0),de(void 0),z(void 0)},[t]);const fe=x.useMemo(()=>F.split(",").map(re=>re.trim()).filter(Boolean),[F]),ke=()=>{D(re=>re.length>=Rc?re:[...re,{from:"",to:""}])},Ne=re=>{D(Be=>Be.filter((Ye,tt)=>tt!==re))},Ve=(re,Be,Ye)=>{D(tt=>{const _t=[...tt];return _t[re]={..._t[re],[Be]:Ye},_t})},Oe=re=>{G(Be=>Be.includes(re)?Be.filter(Ye=>Ye!==re):[...Be,re])},Yt=()=>{const re=M.map(Ye=>({from:Ye.from.trim(),to:Ye.to.trim()})).filter(Ye=>Ye.from&&Ye.to).slice(0,Rc),Be={};return re.length&&(Be.favoriteRoutes=re),P.length&&(Be.quickActions=P),J&&(Be.theme=J),B.trim()&&(Be.heroMessage=B.trim()),Be.showTips=ee,Object.keys(Be).length?Be:void 0},be=async re=>{var Be,Ye;if(re.preventDefault(),!!t){ie(!0),de(void 0),z(void 0);try{const tt=S.trim(),_t=O.trim(),as=_t.length===0,kt={tagline:as?void 0:_t,removeTagline:as,profilePhotoUrl:w?void 0:tt||void 0,removeProfilePhoto:w||!tt&&!!t.profilePhotoUrl,homePreferences:Yt()};if(t.type==="INDIVIDUAL")kt.fullName=V.trim()||void 0,kt.comfortPreferences=fe;else{kt.companyName=T.trim()||void 0;const gs=Y.trim();kt.registrationNumber=gs||void 0;const te=he.trim();kt.contactName=te||void 0;const me=Z.trim();kt.contactPhone=me||void 0}await u(kt)&&(z("Profil mis  jour."),N(!1),l())}catch(tt){de(((Ye=(Be=tt==null?void 0:tt.response)==null?void 0:Be.data)==null?void 0:Ye.message)||(tt==null?void 0:tt.message)||"Erreur lors de la mise  jour.")}finally{ie(!1)}}},ne=(s==null?void 0:s.rides.items)??[],De=(s==null?void 0:s.bookings.items)??[],we=s==null?void 0:s.rides.summary,Ee=s==null?void 0:s.bookings.summary,We=s==null?void 0:s.metrics,gt=e??"Activit du compte";return r.jsxs("section",{className:"bg-white border border-slate-200 rounded-3xl shadow-sm p-6 lg:p-8 space-y-6",children:[r.jsxs("header",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-sky-100 px-3 py-1 text-[11px] font-semibold text-sky-700",children:(t==null?void 0:t.type)==="COMPANY"?"Compte entreprise":"Compte particulier"}),r.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:gt}),r.jsx("p",{className:"text-sm text-slate-500",children:"Ajuste les informations cls, personnalise laccueil et garde un il sur les trajets partags."})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs font-semibold text-slate-500",children:[i&&r.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5",children:[r.jsx(ps,{size:12,className:"animate-spin"})," Chargement"]}),r.jsxs("button",{type:"button",onClick:l,disabled:!t||i,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-slate-600 transition hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:[r.jsx(ps,{size:14})," Rafrachir"]})]})]}),o&&r.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 text-sm text-rose-700 px-4 py-3",children:o}),t&&r.jsxs("form",{onSubmit:be,className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-[auto,1fr]",children:[r.jsx("div",{className:"relative h-24 w-24 overflow-hidden rounded-2xl border border-slate-200 bg-slate-100",children:w?r.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-slate-400",children:"Photo supprime"}):S||t.profilePhotoUrl?r.jsx("img",{src:w?"":S||t.profilePhotoUrl||"",alt:"Photo de profil",className:"h-full w-full object-cover",onError:()=>j("")}):r.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-slate-400",children:"Pas de photo"})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:[r.jsx("p",{className:"font-medium text-slate-800",children:"Email"}),r.jsx("p",{children:t.email})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:[r.jsx("p",{className:"font-medium text-slate-800",children:"Type"}),r.jsx("p",{children:da[t.type]})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:[r.jsx("p",{className:"font-medium text-slate-800",children:"Rle"}),r.jsx("p",{children:Sl[t.role]})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:[r.jsx("p",{className:"font-medium text-slate-800",children:"Statut"}),r.jsx("p",{children:dh[t.status]})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Photo (URL)"}),r.jsx("input",{type:"url",value:S,onChange:re=>{j(re.target.value),N(!1)},className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"https://"})]}),r.jsxs("div",{className:"flex items-end gap-3",children:[r.jsx("button",{type:"button",className:"mt-6 rounded-lg border border-slate-300 px-3 py-2 text-xs text-slate-600 hover:bg-slate-100",onClick:()=>{N(!0),j("")},children:"Retirer la photo"}),r.jsx("span",{className:"mt-6 text-xs text-slate-500",children:"Prconise une image carre (600600) accessible publiquement."})]})]})]})]}),r.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:t.type==="INDIVIDUAL"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Nom complet"}),r.jsx("input",{value:V,onChange:re=>$(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Nom Prnom"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Prfrences de confort"}),r.jsx("textarea",{value:F,onChange:re=>R(re.target.value),rows:2,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Musique douce, Pause caf"}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Spare chaque prfrence par une virgule."})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Entreprise"}),r.jsx("input",{value:T,onChange:re=>K(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Nom de lorganisation"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"N denregistrement"}),r.jsx("input",{value:Y,onChange:re=>ue(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"RCCM / SIRET"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Contact principal"}),r.jsx("input",{value:he,onChange:re=>ve(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Nom du rfrent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Tlphone"}),r.jsx("input",{value:Z,onChange:re=>le(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"+225"})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Accroche"}),r.jsx("textarea",{value:O,onChange:re=>A(re.target.value),rows:2,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Message court affich sur le profil"})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Thme daccueil"}),r.jsx("select",{value:J,onChange:re=>H(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",children:Bg.map(re=>r.jsx("option",{value:re.id,children:re.label},re.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Message daccueil"}),r.jsx("input",{value:B,onChange:re=>X(re.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Texte mis en avant sur la page daccueil"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Raccourcis rapides"}),r.jsx("div",{className:"flex flex-wrap gap-3",children:rh.map(re=>{const Be=P.includes(re.id);return r.jsx("button",{type:"button",onClick:()=>Oe(re.id),className:`rounded-xl border px-4 py-2 text-sm transition ${Be?"border-sky-400 bg-sky-50 text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-sky-200 hover:text-sky-600"}`,children:re.label},re.id)})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Trajets favoris"}),r.jsx("button",{type:"button",className:"text-xs font-medium text-sky-600 hover:text-sky-700",onClick:ke,disabled:M.length>=Rc,children:"Ajouter un trajet"})]}),M.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:"Ajoute des itinraires rcurrents pour les proposer directement depuis la page daccueil."}),M.map((re,Be)=>r.jsxs("div",{className:"grid gap-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-3 sm:grid-cols-[repeat(2,minmax(0,1fr)),auto]",children:[r.jsx("input",{value:re.from,onChange:Ye=>Ve(Be,"from",Ye.target.value),placeholder:"Ville de dpart",className:"rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"}),r.jsx("input",{value:re.to,onChange:Ye=>Ve(Be,"to",Ye.target.value),placeholder:"Ville darrive",className:"rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"}),r.jsx("button",{type:"button",onClick:()=>Ne(Be),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs text-slate-500 hover:bg-slate-100",children:"Supprimer"})]},`${re.from}-${re.to}-${Be}`))]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx("input",{type:"checkbox",checked:ee,onChange:re=>pe(re.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-200"}),"Afficher les encarts de conseils sur la page daccueil"]}),I&&r.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:I}),se&&r.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:se}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsx("button",{type:"submit",disabled:je,className:"rounded-xl bg-sky-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-700 disabled:opacity-50",children:je?"Enregistrement":"Enregistrer les modifications"})})]}),!i&&!o&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(Ja,{label:"Trajets publis",value:(s==null?void 0:s.rides.total)??0,hint:`${(we==null?void 0:we.published)??0} actifs`}),r.jsx(Ja,{label:"Dparts  venir",value:(We==null?void 0:We.rides.upcoming)??0,hint:`${(We==null?void 0:We.rides.past)??0} passs`}),r.jsx(Ja,{label:"Places rserves",value:(We==null?void 0:We.rides.seatsReserved)??0,hint:`/${(We==null?void 0:We.rides.seatsPublished)??0} proposes`}),r.jsx(Ja,{label:"Rservations",value:(s==null?void 0:s.bookings.total)??0,hint:`${(Ee==null?void 0:Ee.seatsTotal)??0} places`})]}),(t==null?void 0:t.type)==="COMPANY"&&r.jsx(_k,{fleet:h,fleetLoading:f,fleetError:m,onReloadFleet:g,scheduleState:_,onLoadSchedules:y}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[2fr,1fr] gap-6",children:[r.jsx(Gu,{title:"Trajets du compte",account:t,rides:ne,summary:we,metrics:We==null?void 0:We.rides,loading:i,onUpdateRide:v,onCloseRide:k,onShareRides:C,digestRecipient:t==null?void 0:t.email}),r.jsx(Nk,{title:"Rservations",emptyMessage:"Aucune rservation enregistre pour ce compte.",items:De,getKey:re=>re.id,renderItem:re=>r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-slate-800",children:["Rservation #",re.id.slice(0,8).toUpperCase()]}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Cre ",Xn(re.createdAt),"  ",re.seats," places"]})]}),r.jsxs("div",{className:"text-sm text-slate-600 text-right",children:[r.jsx("span",{className:"block",children:gm(re.amount)}),r.jsxs("span",{className:"block text-xs text-slate-400",children:["Statut : ",re.status]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"rounded-xl border border-slate-200 p-4 bg-slate-50",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3 uppercase tracking-wide",children:"Statuts de rservation"}),r.jsx("ul",{className:"space-y-2 text-sm text-slate-600",children:Ee&&Object.keys(Ee.byStatus).length>0?Object.entries(Ee.byStatus).map(([re,Be])=>r.jsxs("li",{className:"flex items-center justify-between",children:[r.jsx("span",{children:re}),r.jsx("span",{className:"font-medium",children:Be})]},re)):r.jsx("li",{className:"text-slate-500 text-sm",children:"Aucune donne"})})]}),r.jsxs("div",{className:"rounded-xl border border-slate-200 p-4 bg-slate-50",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3 uppercase tracking-wide",children:"Totaux financiers"}),r.jsxs("ul",{className:"space-y-2 text-sm text-slate-600",children:[r.jsxs("li",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Montant rserv (hors frais)"}),r.jsx("span",{className:"font-semibold",children:gm((Ee==null?void 0:Ee.amountTotal)??0)})]}),r.jsxs("li",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Places rserves"}),r.jsx("span",{className:"font-semibold",children:(Ee==null?void 0:Ee.seatsTotal)??0})]})]})]})]})]})]})}function _k({fleet:e,fleetLoading:t,fleetError:s,onReloadFleet:i,scheduleState:o,onLoadSchedules:l}){const u=Array.isArray(e==null?void 0:e.data)?e.data:[],h=e==null?void 0:e.summary,f=u.length,m=(h==null?void 0:h.active)??0,g=(h==null?void 0:h.fleetSeats)??0,_=(h==null?void 0:h.upcomingTrips)??0;return r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-4 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Flotte entreprise"}),r.jsxs("button",{type:"button",onClick:()=>i==null?void 0:i(),className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-xs text-slate-600 hover:bg-slate-100 disabled:opacity-50",disabled:t||!i,children:[r.jsx(ps,{size:14})," Rafrachir"]})]}),s&&r.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-4 py-2 text-xs text-rose-700",children:s}),t?r.jsx("p",{className:"text-sm text-slate-500",children:"Chargement de la flotte"}):e?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-3 sm:grid-cols-4 text-xs text-slate-600",children:[r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-3",children:[r.jsx("p",{className:"uppercase font-semibold text-slate-500",children:"Vhicules"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-800",children:f})]}),r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-3",children:[r.jsx("p",{className:"uppercase font-semibold text-slate-500",children:"Actifs"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-emerald-600",children:m})]}),r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-3",children:[r.jsx("p",{className:"uppercase font-semibold text-slate-500",children:"Capacit"}),r.jsxs("p",{className:"mt-1 text-lg font-semibold text-slate-800",children:[g," siges"]})]}),r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-3",children:[r.jsx("p",{className:"uppercase font-semibold text-slate-500",children:"Dparts  venir"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-800",children:_})]})]}),r.jsx("div",{className:"space-y-4",children:u.map(y=>{var S,j;const v=o==null?void 0:o[y.id],k=(v==null?void 0:v.items)??y.upcomingSchedules??[],C=y.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600";return r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4 space-y-3",children:[r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-semibold text-slate-800",children:[y.label," ",r.jsxs("span",{className:"text-xs text-slate-500",children:["(",y.plateNumber,")"]})]}),r.jsxs("p",{className:"text-xs text-slate-500",children:[y.category,"  ",y.seats," siges",y.brand?`  ${y.brand} ${y.model??""}`:""]})]}),r.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold ${C}`,children:y.status==="ACTIVE"?"Actif":"Inactif"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(Ks,{size:12}),((S=y.metrics)==null?void 0:S.upcomingTrips)??0," dpart(s) planifis"]}),((j=y.metrics)==null?void 0:j.nextDepartureAt)&&r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(ss,{size:12}),"Prochain : ",Xn(y.metrics.nextDepartureAt)]}),y.amenities&&y.amenities.length>0&&r.jsxs("span",{className:"inline-flex items-center gap-1",children:["quipements : ",y.amenities.join(", ")]})]}),r.jsx("div",{className:"space-y-2",children:k.length===0?r.jsx("p",{className:"text-xs text-slate-500",children:"Aucun dpart enregistr. Utilise la page Gestion de flotte pour programmer les prochains voyages."}):k.slice(0,3).map(w=>r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs text-slate-600",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[r.jsxs("span",{className:"font-medium text-slate-700",children:[w.originCity,"  ",w.destinationCity]}),r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(er,{size:11}),Xn(w.departureAt)]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-slate-500 mt-1",children:[r.jsxs("span",{children:[w.plannedSeats," siges"]}),r.jsxs("span",{children:["Statut : ",w.status]}),w.pricePerSeat>0&&r.jsxs("span",{children:[w.pricePerSeat.toLocaleString()," XOF / sige"]})]})]},w.id))}),l&&r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[r.jsx("button",{type:"button",onClick:()=>l==null?void 0:l(y.id,"upcoming"),disabled:!l,className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-xs text-slate-600 hover:bg-slate-100 disabled:opacity-50",children:v!=null&&v.loading?"Chargement":"Voir  venir"}),r.jsx("button",{type:"button",onClick:()=>l==null?void 0:l(y.id,"past"),disabled:!l,className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-1.5 text-xs text-slate-600 hover:bg-slate-100 disabled:opacity-50",children:"Historique"})]}),(v==null?void 0:v.error)&&r.jsx("p",{className:"text-[11px] text-amber-600",children:v.error}),v&&v.window==="past"&&v.items.length>0&&r.jsx("p",{className:"text-[11px] text-slate-500",children:"Affichage des trajets passs (dernier chargement)."})]},y.id)})})]}):r.jsx("p",{className:"text-sm text-slate-500",children:"Aucune donne de flotte disponible pour ce compte."})]})}function Gu({title:e,account:t,rides:s,summary:i,metrics:o,loading:l,error:u,enableDigest:h=!0,digestRecipient:f,onAfterMutation:m,onUpdateRide:g,onCloseRide:_,onShareRides:y,onRefresh:v}){const[k,C]=x.useState(null),[S,j]=x.useState(null),[w,N]=x.useState(!1),[O,A]=x.useState(),[F,R]=x.useState(),V=Array.isArray(s)?s:[],$=e.toLowerCase().includes("venir")?"Aucun trajet planifi pour cette priode.":"Aucun trajet disponible pour ce filtre.",[T,K]=x.useState(!1),[Y,ue]=x.useState(!1),[he,ve]=x.useState({}),Z=f??(t==null?void 0:t.email)??"",le=h&&!!y&&!!Z,[M,D]=x.useState({status:"ALL",limit:25,includeUpcomingOnly:!0,attachCsv:!0,includeInsights:!0,targetScope:(t==null?void 0:t.type)==="INDIVIDUAL"?"ACCOUNT_ONLY":"ALL",message:""}),P=async()=>{if(v){K(!0);try{await v()}finally{K(!1)}}};x.useEffect(()=>{C(null),j(null),R(void 0)},[t==null?void 0:t.id]),x.useEffect(()=>{if(!le){ve({});return}D(ie=>({...ie,targetScope:(t==null?void 0:t.type)==="INDIVIDUAL"?"ACCOUNT_ONLY":ie.targetScope})),ve({})},[t==null?void 0:t.id,t==null?void 0:t.type,le]),x.useEffect(()=>{if(!k)return;const ie=V.find(I=>I.id===k);ie&&j({originCity:ie.originCity,destinationCity:ie.destinationCity,departureLocal:jk(ie.departureAt),seatsTotal:String(ie.seatsTotal),seatsAvailable:String(ie.seatsAvailable),pricePerSeat:String(ie.pricePerSeat),status:ie.status})},[k,V]);const G=(i==null?void 0:i.occupancyRate)??0,J=Math.round(G*1e3)/10,H=(i==null?void 0:i.topRoutes)??[],B=ie=>{k===ie?(C(null),j(null)):(C(ie),R(void 0))},X=async ie=>{var I,de;if(ie.preventDefault(),!(!k||!S||!g)){N(!0),R(void 0);try{const se=Number(S.seatsTotal),z=Number(S.seatsAvailable),fe=Number(S.pricePerSeat);if(!Number.isFinite(se)||se<=0)throw new Error("Nombre de places invalide");if(!Number.isFinite(z)||z<0)throw new Error("Places restantes invalides");const ke={originCity:S.originCity.trim(),destinationCity:S.destinationCity.trim(),seatsTotal:se,seatsAvailable:z,pricePerSeat:fe,status:S.status};if(S.departureLocal){const Ne=new Date(S.departureLocal);if(Number.isNaN(Ne.getTime()))throw new Error("Date de dpart invalide");ke.departureAt=Ne.toISOString()}await g(k,ke),m&&await m(),R({kind:"success",message:"Trajet mis  jour."}),C(null),j(null)}catch(se){const z=((de=(I=se==null?void 0:se.response)==null?void 0:I.data)==null?void 0:de.message)||(se==null?void 0:se.message)||"Mise  jour impossible.";R({kind:"error",message:z})}finally{N(!1)}}},ee=async ie=>{var I,de;if(_){A(ie),R(void 0);try{await _(ie),m&&await m(),R({kind:"success",message:"Trajet cltur."})}catch(se){const z=((de=(I=se==null?void 0:se.response)==null?void 0:I.data)==null?void 0:de.message)||(se==null?void 0:se.message)||"Impossible de clturer le trajet.";R({kind:"error",message:z})}finally{A(void 0)}}},pe=async ie=>{var I,de;if(ie.preventDefault(),!(!y||!(t!=null&&t.email))){ue(!0),ve({});try{const se=await y({recipient:t.email,status:M.status,limit:M.limit,includeUpcomingOnly:M.includeUpcomingOnly,attachCsv:M.attachCsv,includeInsights:M.includeInsights,targetScope:M.targetScope,driverId:M.targetScope==="ACCOUNT_ONLY"&&t.id?t.id:void 0,message:M.message.trim()?M.message.trim():void 0});se.reason==="empty"||se.count===0?ve({error:"Aucun trajet correspondant aux filtres n'a t trouv.",insights:se.insights}):se.delivered?ve({success:`Digest envoy (${se.count??0} trajets).`,insights:se.insights}):ve({error:"Le digest n'a pas pu tre dlivr (vrifie la configuration SMTP).",insights:se.insights})}catch(se){const z=((de=(I=se==null?void 0:se.response)==null?void 0:I.data)==null?void 0:de.message)||(se==null?void 0:se.message)||"Envoi impossible.",fe=mk[z]??z;ve({error:fe})}finally{ue(!1)}}},je=!g;return r.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-4 shadow-sm",children:[r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600",children:e}),r.jsx("p",{className:"text-xs text-slate-500",children:le?"Ajuste les trajets, clture les publications ou partage un digest personnalis.":"Visualise et ajuste les trajets directement depuis cet espace."})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[v&&r.jsxs("button",{type:"button",onClick:()=>void P(),disabled:T||l,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 font-semibold text-slate-600 hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:[r.jsx(ps,{size:12})," Recharger"]}),le&&Z&&r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-1",children:[r.jsx(er,{size:12})," ",Z]})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-3 text-sm text-slate-600",children:[r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-3",children:[r.jsx("p",{className:"uppercase text-xs font-semibold text-slate-500",children:"Dparts  venir"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-800",children:(i==null?void 0:i.upcoming)??(o==null?void 0:o.upcoming)??0})]}),r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-3",children:[r.jsx("p",{className:"uppercase text-xs font-semibold text-slate-500",children:"Remplissage moyen"}),r.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-800",children:Number.isFinite(J)?`${J.toFixed(1)} %`:"0 %"})]}),r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-3",children:[r.jsx("p",{className:"uppercase text-xs font-semibold text-slate-500",children:"Prix moyen"}),r.jsxs("p",{className:"mt-1 text-lg font-semibold text-slate-800",children:[((i==null?void 0:i.averagePrice)??0).toLocaleString("fr-FR")," F CFA"]})]})]}),u&&r.jsxs("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700 flex flex-wrap items-center justify-between gap-2",children:[r.jsx("span",{children:u}),v&&r.jsx("button",{type:"button",onClick:()=>void P(),disabled:T||l,className:"rounded-full border border-rose-300 px-3 py-1 font-semibold text-rose-700 hover:bg-rose-100 disabled:opacity-50",children:"Ressayer"})]}),F&&r.jsx("div",{className:`rounded-lg border px-3 py-2 text-xs ${F.kind==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-rose-200 bg-rose-50 text-rose-700"}`,children:F.message}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left",children:"Itinraire"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Dpart"}),r.jsx("th",{className:"px-3 py-2 text-center",children:"Places"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Prix"}),r.jsx("th",{className:"px-3 py-2 text-center",children:"Statut"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),r.jsx("tbody",{children:l?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-3 py-4 text-center text-slate-500",children:"Chargement des trajets"})}):V.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-3 py-4 text-center text-slate-500",children:$})}):V.map(ie=>{const I=ie.seatsTotal-ie.seatsAvailable,de=k===ie.id;return r.jsxs("tr",{className:`border-t border-slate-100 ${de?"bg-sky-50/60":"bg-white"}`,children:[r.jsxs("td",{className:"px-3 py-2",children:[r.jsxs("div",{className:"font-medium text-slate-800",children:[ie.originCity,"  ",ie.destinationCity]}),r.jsxs("div",{className:"text-xs text-slate-500",children:["#",ie.id.slice(0,8)]})]}),r.jsx("td",{className:"px-3 py-2 text-slate-600",children:Xn(ie.departureAt)}),r.jsxs("td",{className:"px-3 py-2 text-center text-slate-600",children:[I,"/",ie.seatsTotal]}),r.jsxs("td",{className:"px-3 py-2 text-right text-slate-600",children:[ie.pricePerSeat.toLocaleString("fr-FR")," F"]}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-[11px] font-semibold ${ie.status==="PUBLISHED"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:ie.status==="PUBLISHED"?"Publi":"Cltur"})}),r.jsxs("td",{className:"px-3 py-2 text-right space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>B(ie.id),className:"inline-flex items-center gap-1 rounded-lg border border-slate-200 px-2 py-1 text-xs text-slate-600 hover:border-sky-200 hover:text-sky-600",children:[r.jsx(xw,{size:12})," Modifier"]}),r.jsxs("button",{type:"button",onClick:()=>ee(ie.id),disabled:ie.status==="CLOSED"||O===ie.id,className:"inline-flex items-center gap-1 rounded-lg border border-slate-200 px-2 py-1 text-xs text-slate-600 hover:border-rose-200 hover:text-rose-600 disabled:opacity-50",children:[r.jsx(tw,{size:12})," Clturer"]})]})]},ie.id)})})]})}),k&&S&&r.jsxs("form",{onSubmit:X,className:"rounded-xl border border-slate-200 bg-slate-50 p-4 space-y-3",children:[r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Origine"}),r.jsx("input",{value:S.originCity,onChange:ie=>j(I=>I&&{...I,originCity:ie.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Destination"}),r.jsx("input",{value:S.destinationCity,onChange:ie=>j(I=>I&&{...I,destinationCity:ie.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Dpart"}),r.jsx("input",{type:"datetime-local",value:S.departureLocal,onChange:ie=>j(I=>I&&{...I,departureLocal:ie.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Places totales"}),r.jsx("input",{type:"number",min:1,value:S.seatsTotal,onChange:ie=>j(I=>I&&{...I,seatsTotal:ie.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Places restantes"}),r.jsx("input",{type:"number",min:0,value:S.seatsAvailable,onChange:ie=>j(I=>I&&{...I,seatsAvailable:ie.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Prix / place"}),r.jsx("input",{type:"number",min:0,value:S.pricePerSeat,onChange:ie=>j(I=>I&&{...I,pricePerSeat:ie.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Statut"}),r.jsxs("select",{value:S.status,onChange:ie=>j(I=>I&&{...I,status:ie.target.value}),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",children:[r.jsx("option",{value:"PUBLISHED",children:"Publi"}),r.jsx("option",{value:"CLOSED",children:"Cltur"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsxs("button",{type:"submit",disabled:w||je,className:"inline-flex items-center gap-2 rounded-lg bg-sky-600 px-3 py-2 font-semibold text-white hover:bg-sky-700 disabled:opacity-50",children:[r.jsx(bw,{size:14})," Enregistrer"]}),r.jsx("button",{type:"button",onClick:()=>{C(null),j(null)},className:"inline-flex items-center gap-2 rounded-lg border border-slate-300 px-3 py-2 font-semibold text-slate-600 hover:bg-slate-100",children:"Annuler"})]})]}),le&&r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 space-y-3",children:[r.jsxs("form",{onSubmit:pe,className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Partager par email"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Envoie un digest synthtique au contact slectionn (CSV en pice jointe)."})]}),r.jsxs("button",{type:"submit",disabled:Y||!y||!(t!=null&&t.email),className:"inline-flex items-center gap-2 rounded-lg bg-sky-600 px-3 py-2 text-xs font-semibold text-white hover:bg-sky-700 disabled:opacity-50",children:[r.jsx(Kd,{size:14})," Envoyer le digest"]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Statut"}),r.jsxs("select",{value:M.status,onChange:ie=>D(I=>({...I,status:ie.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",children:[r.jsx("option",{value:"ALL",children:"Tous"}),r.jsx("option",{value:"PUBLISHED",children:"Publies"}),r.jsx("option",{value:"CLOSED",children:"Clotures"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Limite"}),r.jsx("input",{type:"number",min:1,max:500,value:M.limit,onChange:ie=>D(I=>({...I,limit:Math.max(1,Math.min(500,Number(ie.target.value)||0))})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-500",children:"Porte"}),r.jsxs("select",{value:M.targetScope,onChange:ie=>D(I=>({...I,targetScope:ie.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",children:[r.jsx("option",{value:"ACCOUNT_ONLY",children:"Trajets du compte"}),r.jsx("option",{value:"ALL",children:"Catalogue global"})]})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-3 text-xs text-slate-600",children:[r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:M.includeUpcomingOnly,onChange:ie=>D(I=>({...I,includeUpcomingOnly:ie.target.checked}))}),"Trajets  venir uniquement"]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:M.attachCsv,onChange:ie=>D(I=>({...I,attachCsv:ie.target.checked}))}),"Joindre le CSV"]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:M.includeInsights,onChange:ie=>D(I=>({...I,includeInsights:ie.target.checked}))}),"Inclure les insights"]})]}),r.jsx("textarea",{value:M.message,onChange:ie=>D(I=>({...I,message:ie.target.value})),rows:2,placeholder:"Ajoute un message personnalis (facultatif)",className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"})]}),Y&&r.jsx("p",{className:"text-xs text-slate-500",children:"Prparation et envoi du digest"}),he.success&&r.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700",children:he.success}),he.error&&r.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:he.error}),le&&he.insights&&M.includeInsights&&r.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs text-slate-600",children:[he.insights.nextDeparture?r.jsxs("p",{children:["Prochain dpart mis en avant :"," ",r.jsxs("strong",{children:[he.insights.nextDeparture.originCity," "," ",he.insights.nextDeparture.destinationCity]})," ","(",Xn(he.insights.nextDeparture.departureAt),")."]}):r.jsx("p",{children:"Aucun dpart  venir n'a t identifi."}),he.insights.topRoutes&&he.insights.topRoutes.length>0&&r.jsxs("p",{className:"mt-1",children:["Itinraires populaires :"," ",he.insights.topRoutes.map(ie=>`${ie.origin}  ${ie.destination} (${ie.count})`).join(", ")]})]})]}),H.length>0&&r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-3 text-xs text-slate-600",children:[r.jsx("p",{className:"font-semibold text-slate-700",children:"Top itinraires"}),r.jsx("ul",{className:"mt-2 space-y-1",children:H.map(ie=>r.jsxs("li",{children:[ie.origin,"  ",ie.destination," (",ie.count,")"]},`${ie.origin}-${ie.destination}`))})]})]})}function wk({defaultRecipient:e,disabled:t,onShare:s}){const[i,o]=x.useState(e??""),[l,u]=x.useState("ALL"),[h,f]=x.useState("UPCOMING"),[m,g]=x.useState(""),[_,y]=x.useState(""),[v,k]=x.useState(50),[C,S]=x.useState(""),[j,w]=x.useState(!1),[N,O]=x.useState();x.useEffect(()=>{o(e??"")},[e]);const A=async F=>{var R,V,$;if(F.preventDefault(),!(!i.trim()||t)){w(!0),O(void 0);try{const T=new Date().toISOString(),K={recipient:i.trim(),status:l==="ALL"?void 0:l,limit:Math.min(Math.max(v,1),200),includeInsights:!0,attachCsv:!0,includeUpcomingOnly:h==="UPCOMING",targetScope:"ALL"};h==="PAST"?(K.includeUpcomingOnly=!1,K.departureBefore=T):h==="UPCOMING"&&(K.departureAfter=T),m.trim()&&(K.origin=m.trim()),_.trim()&&(K.destination=_.trim()),C.trim()&&(K.message=C.trim());const Y=await s(K);if(Y.delivered){const ue=Y.count??((R=Y.summary)==null?void 0:R.published)??0;O({success:`Digest envoy (${ue} trajets).`})}else O({error:Y.reason||"Le digest n'a pas pu tre dlivr."})}catch(T){const K=(($=(V=T==null?void 0:T.response)==null?void 0:V.data)==null?void 0:$.message)||(T==null?void 0:T.message)||"Envoi impossible.";O({error:K})}finally{w(!1)}}};return r.jsxs("aside",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-6 shadow-sm space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Partager les trajets par email"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Diffuse une slection filtre vers nimporte quel destinataire (CSV et insights inclus)."})]}),r.jsxs("form",{className:"space-y-3",onSubmit:A,children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Destinataire"}),r.jsx("input",{type:"email",value:i,onChange:F=>o(F.target.value),className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"ex: admin@entreprise.ci",required:!0})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Priode"}),r.jsxs("select",{className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",value:h,onChange:F=>f(F.target.value),children:[r.jsx("option",{value:"UPCOMING",children:"Trajets  venir"}),r.jsx("option",{value:"PAST",children:"Trajets passs"}),r.jsx("option",{value:"ALL",children:"Tous les trajets"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Statut"}),r.jsxs("select",{className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",value:l,onChange:F=>u(F.target.value),children:[r.jsx("option",{value:"ALL",children:"Tous"}),r.jsx("option",{value:"PUBLISHED",children:"Publis"}),r.jsx("option",{value:"CLOSED",children:"Clturs"})]})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Origine (optionnel)"}),r.jsx("input",{value:m,onChange:F=>g(F.target.value),className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"Abidjan"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Destination (optionnel)"}),r.jsx("input",{value:_,onChange:F=>y(F.target.value),className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"Bouak"})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Limite (max 200)"}),r.jsx("input",{type:"number",min:1,max:200,value:v,onChange:F=>k(Number(F.target.value)||1),className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Message"}),r.jsx("input",{value:C,onChange:F=>S(F.target.value),className:"mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"Contexte du partage"})]})]}),r.jsxs("button",{type:"submit",disabled:j||t||!i.trim(),className:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 disabled:opacity-50",children:[r.jsx(Kd,{size:14})," ",j?"Envoi en cours":"Envoyer le digest"]})]}),(N==null?void 0:N.success)&&r.jsx("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700",children:N.success}),(N==null?void 0:N.error)&&r.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700",children:N.error})]})}function jk(e){const t=new Date(e);if(!Number.isFinite(t.getTime()))return"";const s=i=>String(i).padStart(2,"0");return`${t.getFullYear()}-${s(t.getMonth()+1)}-${s(t.getDate())}T${s(t.getHours())}:${s(t.getMinutes())}`}function Ja({label:e,value:t,hint:s}){return r.jsxs("div",{className:"rounded-xl border border-slate-100 bg-slate-50 px-4 py-3",children:[r.jsx("p",{className:"text-xs uppercase font-semibold text-slate-500",children:e}),r.jsx("p",{className:"text-xl font-semibold text-slate-800 mt-1",children:t}),s&&r.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:s})]})}function Nk({title:e,items:t,emptyMessage:s,renderItem:i,getKey:o}){return r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 space-y-3 shadow-sm",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:e}),r.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto pr-1",children:t.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:s}):t.map((l,u)=>{const h=o?o(l,u):u;return r.jsx("div",{className:"rounded-xl border border-slate-100 bg-slate-50 px-3 py-3 text-sm text-slate-600",children:i(l)},h)})})]})}const ym={label:"",plateNumber:"",category:"MINIBUS",seats:"15",brand:"",model:"",year:"",amenities:""},bm={originCity:"",destinationCity:"",departureAt:"",arrivalEstimate:"",plannedSeats:"",pricePerSeat:"",recurrence:"NONE",notes:""};function kk(e){if(!e)return"";const t=new Date(e);return Number.isFinite(t.getTime())?t.toLocaleString(void 0,{weekday:"short",day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):""}function Sk(e){return!e||e.length===0?"":e.join(", ")}function Ck(){var ie;const e=ge(I=>I.account),t=(e==null?void 0:e.type)==="COMPANY",[s,i]=x.useState(!1),[o,l]=x.useState([]),[u,h]=x.useState({active:0,inactive:0,fleetSeats:0,upcomingTrips:0}),[f,m]=x.useState(),[g,_]=x.useState(ym),[y,v]=x.useState(!1),[k,C]=x.useState(),[S,j]=x.useState({}),[w,N]=x.useState({}),[O,A]=x.useState({}),[F,R]=x.useState("ALL"),V=((ie=e==null?void 0:e.homePreferences)==null?void 0:ie.theme)??"default",$=$r[V]??$r.default,T=$.hero,K=$.surface,Y=$.chips.accent,ue=$.chips.neutral,he=$.quickActions.active,ve=$.quickActions.inactive,Z=V==="night"?"border border-slate-800 bg-slate-900/70 backdrop-blur-xl text-slate-200":"border border-slate-200 bg-white shadow-sm",le=async()=>{var I,de;if(t){i(!0),m(void 0);try{const se=await Hj({status:F,limit:200});l(se.data),h(se.summary)}catch(se){m(((de=(I=se==null?void 0:se.response)==null?void 0:I.data)==null?void 0:de.message)??(se==null?void 0:se.message)??"Impossible de charger la flotte")}finally{i(!1)}}};x.useEffect(()=>{t&&le()},[t,F]);const M=(I,de)=>{_(se=>({...se,[I]:de}))},D=async I=>{var fe,ke;if(I.preventDefault(),!g.label.trim()||!g.plateNumber.trim()){m("Renseigne au minimum un nom interne et une immatriculation.");return}const de=Number(g.seats);if(!Number.isFinite(de)||de<=0){m("Nombre de places invalide.");return}const se=g.year.trim()?Number(g.year):void 0;if(se&&(!Number.isFinite(se)||se<1950)){m("Anne de mise en circulation invalide.");return}const z=g.amenities.split(",").map(Ne=>Ne.trim()).filter(Boolean);v(!0),m(void 0);try{await qj({label:g.label.trim(),plateNumber:g.plateNumber.trim().toUpperCase(),category:g.category.trim().toUpperCase()||"MINIBUS",seats:de,brand:g.brand.trim()||void 0,model:g.model.trim()||void 0,year:se,amenities:z.length?z:void 0}),_(ym),await le()}catch(Ne){m(((ke=(fe=Ne==null?void 0:Ne.response)==null?void 0:fe.data)==null?void 0:ke.message)??(Ne==null?void 0:Ne.message)??"Cration impossible")}finally{v(!1)}},P=async I=>{var de,se;try{await Wj(I.id,{status:I.status==="ACTIVE"?"INACTIVE":"ACTIVE"}),await le()}catch(z){m(((se=(de=z==null?void 0:z.response)==null?void 0:de.data)==null?void 0:se.message)??(z==null?void 0:z.message)??"Impossible de modifier le statut")}},G=async I=>{var de,se;try{await Gj(I),await le()}catch(z){m(((se=(de=z==null?void 0:z.response)==null?void 0:de.data)==null?void 0:se.message)??(z==null?void 0:z.message)??"Impossible de dsactiver le vhicule")}},J=I=>S[I]??bm,H=(I,de)=>{j(se=>({...se,[I]:{...J(I),...de}}))},B=async(I,de="upcoming")=>{N(se=>{var z;return{...se,[I]:{loading:!0,window:de,items:((z=se[I])==null?void 0:z.items)??[]}}});try{const se=await Kj(I,{window:de});N(z=>({...z,[I]:{loading:!1,window:de,items:se.data}}))}catch(se){N(z=>{var fe,ke,Ne;return{...z,[I]:{loading:!1,window:de,items:((fe=z[I])==null?void 0:fe.items)??[],error:((Ne=(ke=se==null?void 0:se.response)==null?void 0:ke.data)==null?void 0:Ne.message)??(se==null?void 0:se.message)??"Erreur de chargement"}}})}},X=async I=>{var fe,ke;const de=J(I.id);if(!de.originCity.trim()||!de.destinationCity.trim()||!de.departureAt.trim()){m("Complte la ville de dpart, darrive et la date/heure de dpart.");return}const se=de.plannedSeats.trim()?Number(de.plannedSeats.trim()):void 0;if(se!==void 0){if(!Number.isFinite(se)||se<=0){m("Nombre de siges planifis invalide.");return}if(se>I.seats){m("Les siges planifis dpassent la capacit du vhicule.");return}}const z=de.pricePerSeat.trim()?Number(de.pricePerSeat.trim()):void 0;if(z!==void 0&&(!Number.isFinite(z)||z<0)){m("Prix par sige invalide.");return}A(Ne=>({...Ne,[I.id]:!0})),m(void 0);try{await Yj(I.id,{originCity:de.originCity.trim(),destinationCity:de.destinationCity.trim(),departureAt:new Date(de.departureAt).toISOString(),arrivalEstimate:de.arrivalEstimate?new Date(de.arrivalEstimate).toISOString():void 0,plannedSeats:se,pricePerSeat:z,recurrence:de.recurrence,notes:de.notes.trim()||void 0}),H(I.id,bm),await Promise.all([le(),B(I.id,"upcoming")])}catch(Ne){m(((ke=(fe=Ne==null?void 0:Ne.response)==null?void 0:fe.data)==null?void 0:ke.message)??(Ne==null?void 0:Ne.message)??"Impossible de planifier ce trajet")}finally{A(Ne=>({...Ne,[I.id]:!1}))}},ee=async(I,de,se)=>{var z,fe;m(void 0);try{se==="CANCELLED"?await Qj(I,de):await Xj(I,de,{status:se}),await Promise.all([le(),B(I,"upcoming")])}catch(ke){m(((fe=(z=ke==null?void 0:ke.response)==null?void 0:z.data)==null?void 0:fe.message)??(ke==null?void 0:ke.message)??"Action impossible sur ce planning")}};k&&w[k];const pe=I=>{const de=w[I.id],se=(de==null?void 0:de.items)??I.upcomingSchedules??[];return r.jsxs("div",{className:"mt-4 space-y-3",children:[se.length===0&&r.jsx("div",{className:`rounded-xl px-4 py-4 text-sm ${ue}`,children:"Aucun trajet planifi. Ajoute un crneau pour ce vhicule."}),se.map(z=>{const fe=z.status==="PLANNED"?Y:z.status==="COMPLETED"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-600";return r.jsxs("div",{className:`rounded-xl border px-4 py-3 text-sm ${fe}`,children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(yw,{size:16}),r.jsxs("span",{className:"font-semibold",children:[z.originCity,"  ",z.destinationCity]})]}),r.jsxs("div",{className:"inline-flex items-center gap-2 text-xs",children:[r.jsx(Ks,{size:14}),kk(z.departureAt)]})]}),r.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-4 text-xs",children:[r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx(ss,{size:12}),"Dpart dans"," ",(()=>{const ke=new Date(z.departureAt).getTime()-Date.now();if(!Number.isFinite(ke)||ke<=0)return"moins de 24h";const Ne=Math.round(ke/36e5);return Ne<24?`${Ne}h`:`${Math.round(Ne/24)} jour(s)`})()]}),r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx(Cc,{size:12}),z.plannedSeats," siges planifis"]}),z.pricePerSeat>0&&r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx(aw,{size:12}),z.pricePerSeat.toLocaleString()," XOF / sige"]}),z.recurrence!=="NONE"&&r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx(ps,{size:12}),z.recurrence==="DAILY"?"Quotidien":"Hebdomadaire"]})]}),r.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[z.status==="PLANNED"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>ee(I.id,z.id,"COMPLETED"),className:"inline-flex items-center gap-2 rounded-lg border border-emerald-200 bg-white px-3 py-1.5 text-xs font-medium text-emerald-700 hover:bg-emerald-50",children:"Marquer ralis"}),r.jsx("button",{onClick:()=>ee(I.id,z.id,"CANCELLED"),className:"inline-flex items-center gap-2 rounded-lg border border-amber-200 bg-white px-3 py-1.5 text-xs font-medium text-amber-600 hover:bg-amber-50",children:"Annuler"})]}),z.status==="CANCELLED"&&r.jsx("button",{onClick:()=>ee(I.id,z.id,"PLANNED"),className:"inline-flex items-center gap-2 rounded-lg border border-sky-200 bg-white px-3 py-1.5 text-xs font-medium text-sky-600 hover:bg-sky-50",children:"Rouvrir"})]})]},z.id)}),(de==null?void 0:de.error)&&r.jsx("div",{className:"text-xs text-amber-600",children:de.error})]})},je=x.useMemo(()=>F==="ALL"?o:o.filter(I=>I.status===F),[o,F]);return t?r.jsx("div",{className:"min-h-[calc(100vh-56px)]",children:r.jsxs("section",{className:"relative overflow-hidden pb-10",children:[r.jsx("div",{className:`absolute inset-0 -z-10 bg-gradient-to-br ${$.gradient}`}),$.pattern&&r.jsx("div",{className:`absolute inset-0 -z-10 opacity-80 ${$.pattern}`}),r.jsxs("div",{className:"container-wide py-10 space-y-8",children:[r.jsxs("header",{className:"space-y-4",children:[r.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-4 py-1 text-xs font-semibold uppercase tracking-wide ${T.badge}`,children:"Flotte entreprise"}),r.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:`text-3xl font-bold leading-tight ${T.title}`,children:"Planifie tes vhicules et tes voyages rcurrents"}),r.jsx("p",{className:`max-w-2xl text-sm ${T.text}`,children:"Renseigne les caractristiques de ta flotte, harmonise les dparts  venir et surveille dun coup dil la capacit disponible pour tes passagers."})]}),r.jsxs("div",{className:"flex gap-3 text-xs",children:[r.jsxs("span",{className:`inline-flex items-center gap-2 rounded-2xl px-3 py-2 ${Y}`,children:[r.jsx(Cc,{size:14}),u.active," actifs"]}),r.jsxs("span",{className:`inline-flex items-center gap-2 rounded-2xl px-3 py-2 ${ue}`,children:[r.jsx(ss,{size:14}),u.upcomingTrips," trajets planifis"]})]})]})]}),r.jsxs("div",{className:`grid gap-4 sm:grid-cols-4 ${Z}`,children:[r.jsxs("button",{onClick:()=>R("ALL"),className:`rounded-xl px-4 py-4 text-left transition ${F==="ALL"?he:ve}`,children:[r.jsx("p",{className:"text-xs font-semibold uppercase",children:"Flotte complte"}),r.jsx("p",{className:"mt-2 text-lg font-semibold",children:o.length})]}),r.jsxs("button",{onClick:()=>R("ACTIVE"),className:`rounded-xl px-4 py-4 text-left transition ${F==="ACTIVE"?he:ve}`,children:[r.jsx("p",{className:"text-xs font-semibold uppercase",children:"Actifs"}),r.jsx("p",{className:"mt-2 text-lg font-semibold",children:u.active})]}),r.jsxs("button",{onClick:()=>R("INACTIVE"),className:`rounded-xl px-4 py-4 text-left transition ${F==="INACTIVE"?he:ve}`,children:[r.jsx("p",{className:"text-xs font-semibold uppercase",children:"En pause"}),r.jsx("p",{className:"mt-2 text-lg font-semibold",children:u.inactive})]}),r.jsxs("div",{className:"rounded-xl px-4 py-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Capacit totale"}),r.jsxs("p",{className:"mt-2 text-lg font-semibold text-slate-800",children:[u.fleetSeats.toLocaleString()," siges"]}),r.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Rpartis sur ",o.length," vhicule(s)"]})]})]}),r.jsxs("form",{onSubmit:D,className:`rounded-3xl px-6 py-6 space-y-4 ${K}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Tp,{size:18}),r.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide",children:"Ajouter un vhicule"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Nom interne"}),r.jsx("input",{className:"input input-sm w-full",placeholder:"Sprinter Abidjan 01",value:g.label,onChange:I=>M("label",I.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Immatriculation"}),r.jsx("input",{className:"input input-sm w-full uppercase",placeholder:"XX-123-XX",value:g.plateNumber,onChange:I=>M("plateNumber",I.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Catgorie"}),r.jsxs("select",{className:"input input-sm w-full",value:g.category,onChange:I=>M("category",I.target.value),children:[r.jsx("option",{value:"MINIBUS",children:"Minibus"}),r.jsx("option",{value:"BUS",children:"Bus"}),r.jsx("option",{value:"SUV",children:"SUV"}),r.jsx("option",{value:"SEDAN",children:"Berline"}),r.jsx("option",{value:"VAN",children:"Van"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Siges"}),r.jsx("input",{type:"number",min:1,className:"input input-sm w-full",value:g.seats,onChange:I=>M("seats",I.target.value),required:!0})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Marque"}),r.jsx("input",{className:"input input-sm w-full",value:g.brand,onChange:I=>M("brand",I.target.value),placeholder:"Toyota"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Modle"}),r.jsx("input",{className:"input input-sm w-full",value:g.model,onChange:I=>M("model",I.target.value),placeholder:"Coaster"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Anne"}),r.jsx("input",{className:"input input-sm w-full",value:g.year,onChange:I=>M("year",I.target.value),placeholder:"2022"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Equipements (spars par une virgule)"}),r.jsx("input",{className:"input input-sm w-full",value:g.amenities,onChange:I=>M("amenities",I.target.value),placeholder:"Climatisation, Wi-Fi, Siges inclinables"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"submit",disabled:y,className:"btn-primary inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold disabled:cursor-not-allowed disabled:opacity-60",children:[r.jsx(Tp,{size:16}),y?"Ajout":"Ajouter"]})})]}),f&&r.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:f}),s?r.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center shadow-sm",children:"Chargement de ta flotte"}):je.length===0?r.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white/60 px-6 py-8 text-center text-sm text-slate-500",children:"Aucun vhicule pour le moment. Ajoute ton premier minibus ou bus depuis le formulaire ci-dessus."}):r.jsx("div",{className:"space-y-6",children:je.map(I=>{const de=J(I.id),se=O[I.id];return r.jsxs("div",{className:`rounded-3xl px-6 py-6 ${K}`,children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-sky-100 text-sky-600",children:r.jsx(Cc,{size:20})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:[I.label," ",r.jsxs("span",{className:"text-sm text-slate-500",children:["(",I.plateNumber,")"]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(er,{size:12}),I.category]}),r.jsxs("span",{children:[I.seats," siges"]}),I.brand&&r.jsxs("span",{children:[I.brand," ",I.model??""]}),I.year&&r.jsxs("span",{children:["Anne ",I.year]}),r.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold ${I.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:I.status==="ACTIVE"?"Actif":"Inactif"}),I.metrics&&r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(Ks,{size:12}),I.metrics.upcomingTrips," dpart(s)  venir"]})]})]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:Sk(I.amenities)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>P(I),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-medium text-slate-600 hover:bg-slate-100",children:I.status==="ACTIVE"?"Mettre en pause":"Ractiver"}),r.jsx("button",{onClick:()=>G(I.id),className:"rounded-lg border border-red-200 px-3 py-2 text-xs font-medium text-red-600 hover:bg-red-50",children:"Archiver"})]})]}),r.jsxs("div",{className:"mt-5 grid gap-4 md:grid-cols-[minmax(0,360px),1fr]",children:[r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm",children:[r.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Planifier un trajet"}),r.jsxs("div",{className:"mt-3 space-y-3",children:[r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Dpart"}),r.jsx("input",{className:"input input-sm w-full",value:de.originCity,onChange:z=>H(I.id,{originCity:z.target.value}),placeholder:"Abidjan"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Arrive"}),r.jsx("input",{className:"input input-sm w-full",value:de.destinationCity,onChange:z=>H(I.id,{destinationCity:z.target.value}),placeholder:"Yamoussoukro"})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Dpart (date & heure)"}),r.jsx("input",{type:"datetime-local",className:"input input-sm w-full",value:de.departureAt,onChange:z=>H(I.id,{departureAt:z.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Estimation darrive"}),r.jsx("input",{type:"datetime-local",className:"input input-sm w-full",value:de.arrivalEstimate,onChange:z=>H(I.id,{arrivalEstimate:z.target.value})})]})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Siges  publier"}),r.jsx("input",{className:"input input-sm w-full",placeholder:`${I.seats}`,value:de.plannedSeats,onChange:z=>H(I.id,{plannedSeats:z.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Prix / sige (XOF)"}),r.jsx("input",{className:"input input-sm w-full",value:de.pricePerSeat,onChange:z=>H(I.id,{pricePerSeat:z.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Rcurrence"}),r.jsxs("select",{className:"input input-sm w-full",value:de.recurrence,onChange:z=>H(I.id,{recurrence:z.target.value}),children:[r.jsx("option",{value:"NONE",children:"Aucune"}),r.jsx("option",{value:"DAILY",children:"Quotidienne"}),r.jsx("option",{value:"WEEKLY",children:"Hebdomadaire"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Notes"}),r.jsx("textarea",{className:"input input-sm w-full",rows:2,value:de.notes,onChange:z=>H(I.id,{notes:z.target.value}),placeholder:"Instructions pour le conducteur, point de rendez-vous"})]}),r.jsxs("button",{type:"button",disabled:se,onClick:()=>X(I),className:"btn-primary inline-flex items-center gap-2 px-4 py-2 text-xs font-semibold disabled:cursor-not-allowed disabled:opacity-60",children:[r.jsx(Ks,{size:14}),se?"Planification":"Planifier"]})]})]}),r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-500",children:"Prochains dparts"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx("button",{className:"rounded-lg border border-slate-200 px-2 py-1 hover:bg-slate-100",onClick:()=>B(I.id,"upcoming"),children:"Rafrachir"}),r.jsx("button",{className:"rounded-lg border border-slate-200 px-2 py-1 hover:bg-slate-100",onClick:()=>{C(z=>z===I.id?void 0:I.id),k!==I.id&&B(I.id,"upcoming")},children:"Historique"})]})]}),pe(I),k===I.id&&r.jsxs("div",{className:"mt-3 flex gap-2 text-xs text-slate-500",children:[r.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1 hover:bg-slate-100",onClick:()=>B(I.id,"all"),children:"Tout afficher"}),r.jsx("button",{className:"rounded-lg border border-slate-200 px-3 py-1 hover:bg-slate-100",onClick:()=>B(I.id,"past"),children:"Trajets passs"})]})]})]})]},I.id)})})]})]})}):r.jsx("div",{className:"min-h-[calc(100vh-56px)] flex items-center justify-center px-4",children:r.jsxs("div",{className:"max-w-md rounded-3xl border border-slate-200 bg-white px-6 py-8 text-center shadow-sm",children:[r.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:"Accs rserv"}),r.jsx("p",{className:"mt-3 text-sm text-slate-600",children:"La gestion de flotte est disponible pour les comptes entreprise. Passe sur un compte COMPANY ou contacte un administrateur pour tre promu."})]})})}const zc=5;function Pk(){const e=ge(D=>D.token),t=ge(D=>D.account),s=ge(D=>D.setSession),[i,o]=x.useState(""),[l,u]=x.useState(""),[h,f]=x.useState(""),[m,g]=x.useState(!1),[_,y]=x.useState([]),[v,k]=x.useState([]),[C,S]=x.useState("default"),[j,w]=x.useState(""),[N,O]=x.useState(!0),[A,F]=x.useState(!1),[R,V]=x.useState(),[$,T]=x.useState(),K=t==null?void 0:t.type;x.useEffect(()=>{if(!t)return;t.type==="INDIVIDUAL"?(o(t.tagline??""),u((t.comfortPreferences??[]).join(", "))):o(t.tagline??""),f(t.profilePhotoUrl??""),g(!1);const D=t.homePreferences;y(((D==null?void 0:D.favoriteRoutes)??[]).map(P=>({from:P.from,to:P.to}))),k((D==null?void 0:D.quickActions)??[]),S((D==null?void 0:D.theme)??"default"),w((D==null?void 0:D.heroMessage)??""),O((D==null?void 0:D.showTips)??!0)},[t]);const Y=x.useMemo(()=>l.split(",").map(D=>D.trim()).filter(Boolean),[l]);if(!e)return r.jsx(Ho,{to:"/login",replace:!0});if(!t)return null;const ue=(D,P,G)=>{y(J=>{const H=[...J];return H[D]={...H[D],[P]:G},H})},he=()=>{_.length>=zc||y(D=>[...D,{from:"",to:""}])},ve=D=>{y(P=>P.filter((G,J)=>J!==D))},Z=D=>{k(P=>P.includes(D)?P.filter(G=>G!==D):[...P,D])},le=()=>{const D=_.map(G=>({from:G.from.trim(),to:G.to.trim()})).filter(G=>G.from&&G.to).slice(0,zc),P={};return D.length&&(P.favoriteRoutes=D),v.length&&(P.quickActions=v),C&&(P.theme=C),j.trim()&&(P.heroMessage=j.trim()),P.showTips=N,Object.keys(P).length?P:void 0},M=async D=>{var P,G;if(D.preventDefault(),!(!e||!t)){F(!0),V(void 0),T(void 0);try{const J=le(),H=h.trim(),B=i.trim(),X=B.length===0,ee={profilePhotoUrl:m?void 0:H||void 0,removeProfilePhoto:m||!H&&!!t.profilePhotoUrl,removeTagline:X,homePreferences:J};let pe;t.type==="INDIVIDUAL"?pe=await Ag(e,{comfortPreferences:Y,tagline:X?void 0:B,...ee}):pe=await xN(e,{tagline:B||void 0,...ee}),s(e,pe),T("Profil mis  jour avec succs."),g(!1)}catch(J){V(((G=(P=J==null?void 0:J.response)==null?void 0:P.data)==null?void 0:G.message)||(J==null?void 0:J.message)||"Impossible de mettre  jour le profil.")}finally{F(!1)}}};return r.jsxs("section",{className:"max-w-4xl mx-auto px-4 py-10 space-y-8",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Personnalisation du profil"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Mets  jour ta photo, tes prfrences de confort et lexprience affiche sur ta page daccueil."})]}),r.jsxs("form",{onSubmit:M,className:"space-y-10",children:[r.jsx("section",{className:"grid gap-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-6",children:[r.jsx("div",{className:"relative h-24 w-24 overflow-hidden rounded-2xl border border-slate-200 bg-slate-100",children:m?r.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-slate-400",children:"Photo supprime"}):t.profilePhotoUrl||h?r.jsx("img",{src:m?"":h||t.profilePhotoUrl||"",alt:"Photo de profil",className:"h-full w-full object-cover",onError:()=>f("")}):r.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-slate-400",children:"Pas de photo"})}),r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Photo (URL)"}),r.jsx("input",{type:"url",className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"https://",value:h,onChange:D=>{f(D.target.value),g(!1)}})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[r.jsx("button",{type:"button",className:"rounded-lg border border-slate-300 px-3 py-1.5 text-slate-600 hover:bg-slate-100",onClick:()=>{g(!0),f("")},children:"Retirer la photo"}),r.jsx("span",{className:"text-slate-500",children:"Astuce: hberge ton image (600600) sur un CDN ou un cloud public."})]})]})]})}),r.jsxs("section",{className:"grid gap-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Accroche affiche sur ton profil"}),r.jsx("textarea",{value:i,onChange:D=>o(D.target.value),rows:2,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Exemple: Conducteur attentif  Climatisation et playlist sur-mesure."}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Affiche sur ta fiche publique et dans les conversations."})]}),K==="INDIVIDUAL"&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Prfrences de confort (spares par une virgule)"}),r.jsx("textarea",{value:l,onChange:D=>u(D.target.value),rows:2,className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Musique douce, Pause caf, Climatisation lgre"}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Jusqu 10 prfrences  elles seront proposes aux passagers avant la rservation."})]})]}),r.jsxs("section",{className:"grid gap-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[r.jsxs("header",{children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Personnalisation de la page daccueil"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Choisis les raccourcis, le thme graphique et les trajets favoris proposs en un clic."})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Thme"}),r.jsx("select",{className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",value:C,onChange:D=>S(D.target.value),children:Bg.map(D=>r.jsx("option",{value:D.id,children:D.label},D.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold uppercase text-slate-500",children:"Message daccroche sur la page daccueil"}),r.jsx("input",{type:"text",value:j,onChange:D=>w(D.target.value),className:"mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Une phrase inspirante pour accueillir les passagers."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Raccourcis rapides"}),r.jsx("div",{className:"flex flex-wrap gap-3",children:rh.map(D=>{const P=v.includes(D.id);return r.jsx("button",{type:"button",onClick:()=>Z(D.id),className:`rounded-xl border px-4 py-2 text-sm transition ${P?"border-sky-400 bg-sky-50 text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-sky-200 hover:text-sky-600"}`,children:D.label},D.id)})}),r.jsx("p",{className:"text-xs text-slate-500",children:"Slectionne jusqu 5 raccourcis. Ils safficheront au-dessus de la barre de recherche."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs font-semibold uppercase text-slate-500",children:"Trajets favoris"}),r.jsx("button",{type:"button",className:"text-xs font-medium text-sky-600 hover:text-sky-700",onClick:he,disabled:_.length>=zc,children:"Ajouter un trajet"})]}),_.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:"Ajoute tes itinraires rcurrents (ex: Abidjan  Yamoussoukro) pour les retrouver en un clic."}),_.map((D,P)=>r.jsxs("div",{className:"grid gap-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-3 sm:grid-cols-[repeat(2,minmax(0,1fr)),auto]",children:[r.jsx("input",{value:D.from,onChange:G=>ue(P,"from",G.target.value),placeholder:"Ville de dpart",className:"rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"}),r.jsx("input",{value:D.to,onChange:G=>ue(P,"to",G.target.value),placeholder:"Ville darrive",className:"rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-200"}),r.jsx("button",{type:"button",onClick:()=>ve(P),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs text-slate-500 hover:bg-slate-100",children:"Supprimer"})]},`${D.from}-${D.to}-${P}`))]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx("input",{type:"checkbox",checked:N,onChange:D=>O(D.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-200"}),"Afficher les encarts de conseils sur la page daccueil"]})]}),R&&r.jsx("div",{className:"rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:R}),$&&r.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:$}),r.jsx("div",{className:"flex items-center justify-end gap-3",children:r.jsx("button",{type:"submit",disabled:A,className:"rounded-xl bg-sky-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-700 disabled:opacity-50",children:A?"Enregistrement":"Sauvegarder"})})]})]})}const _m=e=>{if(e)try{return new Date(e).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}catch{return}},Ek=e=>e&&(e.fullName||e.companyName||e.email)||"Conducteur KariGo";function Lk(){var C;const{accountId:e}=Gd(),t=ge(S=>S.token),s=ge(S=>S.account),i=Ft(),[o,l]=x.useState(null),[u,h]=x.useState(!1),[f,m]=x.useState();x.useEffect(()=>{if(!e||!t)return;let S=!1;return(async()=>{var j,w;try{h(!0),m(void 0);const N=await nh(e,t);S||l(N)}catch(N){S||m(((w=(j=N==null?void 0:N.response)==null?void 0:j.data)==null?void 0:w.message)||(N==null?void 0:N.message)||"Profil introuvable.")}finally{S||h(!1)}})(),()=>{S=!0}},[e,t]);const g=Ek(o),_=x.useMemo(()=>_m(o==null?void 0:o.createdAt),[o==null?void 0:o.createdAt]),y=x.useMemo(()=>_m((o==null?void 0:o.lastLoginAt)||void 0),[o==null?void 0:o.lastLoginAt]),v=(o==null?void 0:o.type)==="COMPANY",k=!!(o&&(s!=null&&s.id)&&o.id!==s.id);return e?r.jsxs("div",{className:"glass rounded-[28px] p-6 space-y-6",children:[r.jsxs("button",{type:"button",onClick:()=>i(-1),className:"inline-flex items-center gap-2 text-sm text-slate-600 hover:text-slate-900",children:[r.jsx(K1,{size:16}),"Retour"]}),u&&r.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/40 p-4 text-sm text-slate-600",children:"Chargement du profil"}),f&&r.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-600",children:f}),o&&r.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1.1fr),minmax(0,0.9fr)]",children:[r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/60 p-6 space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-start gap-4",children:[r.jsx("div",{className:"h-24 w-24 overflow-hidden rounded-3xl border border-slate-200 bg-slate-100",children:o.profilePhotoUrl?r.jsx("img",{src:o.profilePhotoUrl,alt:`Photo de ${g}`,className:"h-full w-full object-cover"}):r.jsx("div",{className:"flex h-full w-full items-center justify-center text-2xl font-semibold text-slate-500",children:g.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs uppercase tracking-wide text-slate-500",children:[v?"Trajet pro":"Conducteur particulier",o.status==="ACTIVE"&&r.jsx(Y1,{size:12,className:"text-emerald-500"})]}),r.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:g}),o.tagline&&r.jsx("p",{className:"text-sm text-slate-600",children:o.tagline}),_&&r.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs text-slate-500",children:[r.jsx(Ks,{size:12}),"Membre depuis ",_]})]})]}),(o.email||o.contactPhone)&&r.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/70 p-4 text-sm text-slate-700",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Coordonnes"}),o.email&&r.jsxs("div",{className:"inline-flex items-center gap-2 text-slate-700",children:[r.jsx(Y0,{size:14,className:"text-sky-500"}),o.email]}),o.contactPhone&&r.jsxs("div",{className:"inline-flex items-center gap-2 text-slate-700",children:[r.jsx(X0,{size:14,className:"text-emerald-500"}),o.contactPhone]})]}),(C=o.comfortPreferences)!=null&&C.length?r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Confort & prfrences"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:o.comfortPreferences.map(S=>r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs font-semibold text-slate-700",children:[r.jsx(Xd,{size:11,className:"text-amber-500"}),S]},S))})]}):null]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/60 p-5 space-y-4 text-sm text-slate-700",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Fiabilit"}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 rounded-2xl bg-slate-100 px-3 py-1.5 text-xs font-semibold text-slate-600",children:[r.jsx(Wo,{size:14,className:"text-emerald-500"}),o.role==="ADMIN"?"Administrateur KariGo":"Conducteur vrifi"]}),y&&r.jsxs("div",{className:"inline-flex items-center gap-2 rounded-2xl bg-slate-50 px-3 py-1.5 text-xs font-semibold text-slate-600",children:[r.jsx(Ks,{size:14,className:"text-sky-500"}),"Dernire connexion ",y]}),r.jsxs("div",{className:"inline-flex items-center gap-2 rounded-2xl bg-slate-50 px-3 py-1.5 text-xs font-semibold text-slate-600",children:[r.jsx(Wo,{size:14,className:"text-slate-500"}),"Statut : ",o.status==="ACTIVE"?"Actif":"Suspendu"]})]})]}),v&&r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/60 p-5 text-sm text-slate-700 space-y-2",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Entreprise"}),o.companyName&&r.jsxs("p",{children:["Nom : ",r.jsx("span",{className:"font-semibold",children:o.companyName})]}),o.registrationNumber&&r.jsxs("p",{children:["Immatriculation : ",r.jsx("span",{className:"font-semibold",children:o.registrationNumber})]}),o.contactName&&r.jsxs("p",{children:["Contact : ",r.jsx("span",{className:"font-semibold",children:o.contactName})]})]}),k&&r.jsxs("button",{type:"button",onClick:()=>i("/messages",{state:{contact:{id:o.id,type:o.type,label:g,email:o.email}}}),className:"w-full inline-flex items-center justify-center gap-2 rounded-2xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white transition hover:bg-slate-800",children:[r.jsx(Ru,{size:16}),"Contacter ce conducteur"]})]})]})]}):r.jsx("div",{className:"glass rounded-2xl p-6 text-red-500",children:"Identifiant de profil manquant."})}const Tk={PENDING:{label:"En attente",tone:"text-amber-700 bg-amber-100"},CONFIRMED:{label:"Confirme",tone:"text-sky-700 bg-sky-100"},PAID:{label:"Paye",tone:"text-emerald-700 bg-emerald-100"},CANCELLED:{label:"Annule",tone:"text-rose-700 bg-rose-100"}},Mk=[{id:"upcoming",label:" venir"},{id:"past",label:"Passs"},{id:"all",label:"Tous"}],Ak={PENDING:"En attente",CONFIRMED:"Confirme",PAID:"Paye",CANCELLED:"Annule"},Rk=e=>Ak[e??""]??e??"Inconnu",wm=e=>{if(!e)return;const t=e.trim();if(t)return t.split(/\s+/)[0]},jm="kari_show_passenger_names",eo=(e,t=!0)=>{if(!e)return"Date inconnue";try{const s=new Date(e);return t?s.toLocaleString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):s.toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"})}catch{return e}};function Ik(){const e=ge(T=>T.token),t=ge(T=>T.account),[s,i]=x.useState([]),[o,l]=x.useState(),[u,h]=x.useState(!0),[f,m]=x.useState("upcoming"),[g,_]=x.useState([]),[y,v]=x.useState(),[k,C]=x.useState(),[S,j]=x.useState(!0),[w,N]=x.useState(()=>{if(typeof window>"u")return!0;const T=window.localStorage.getItem(jm);return T===null?!0:T==="true"}),O=async()=>{var T,K;if(e){h(!0),l(void 0);try{const Y=await Lg(e,{limit:100});i(Array.isArray(Y.data)?Y.data:[])}catch(Y){l(((K=(T=Y==null?void 0:Y.response)==null?void 0:T.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Impossible de rcuprer tes trajets.")}finally{h(!1)}}},A=async()=>{var T,K;if(e){j(!0),C(void 0);try{const Y=await dN(e,{limit:100,sort:"departure_desc"});_(Array.isArray(Y.data)?Y.data:[]),v(Y.summary)}catch(Y){C(((K=(T=Y==null?void 0:Y.response)==null?void 0:T.data)==null?void 0:K.message)||(Y==null?void 0:Y.message)||"Impossible de rcuprer tes trajets publis.")}finally{j(!1)}}};x.useEffect(()=>{O(),A()},[e]),x.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(jm,String(w))},[w]);const F=x.useMemo(()=>{const T=Date.now();return s.map(K=>{const Y=K.ride,ue=(Y==null?void 0:Y.departureAt)??null,he=(Y==null?void 0:Y.originCity)??null,ve=(Y==null?void 0:Y.destinationCity)??null,Z=ue?Date.parse(ue):Date.parse(K.createdAt);return{...K,departureAt:ue,originCity:he,destinationCity:ve,isPast:Number.isFinite(Z)?Z<T:!1}})},[s]),R=x.useMemo(()=>f==="all"?F:f==="upcoming"?F.filter(T=>!T.isPast):F.filter(T=>T.isPast),[f,F]),V=x.useMemo(()=>{const T=Date.now();return g.map(K=>{const Y=Array.isArray(K.reservations)?K.reservations:[],ue=Math.max(0,(K.seatsTotal??0)-(K.seatsAvailable??0)),he=K.seatsTotal&&K.seatsTotal>0?Math.round(ue/Math.max(K.seatsTotal,1)*100):0,ve=Number.isFinite(Date.parse(K.departureAt))?Date.parse(K.departureAt)<T:!1;return{...K,seatsReserved:ue,occupancy:he,isPast:ve,reservations:Y}})},[g]),$=x.useMemo(()=>{const T=y;return T?{upcoming:T.upcoming??0,published:T.published??0,seatsBooked:T.seatsBooked??0,seatsTotal:T.seatsTotal??0}:{upcoming:V.filter(K=>!K.isPast).length,published:V.filter(K=>K.status==="PUBLISHED").length,seatsBooked:V.reduce((K,Y)=>K+Y.seatsReserved,0),seatsTotal:V.reduce((K,Y)=>K+(Y.seatsTotal??0),0)}},[V,y]);return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900/5 via-white to-white",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-10 space-y-10",children:[r.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white/95 shadow-xl shadow-sky-100/60 backdrop-blur p-6 lg:p-10 space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{className:"space-y-3 max-w-2xl",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-sky-100 px-3 py-1 text-[11px] font-semibold text-sky-700",children:"Mes rservations"}),r.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-indigo-100 px-3 py-1 text-[11px] font-semibold text-indigo-700",children:"Mes trajets publis"})]}),r.jsxs("h1",{className:"text-3xl font-semibold text-slate-900",children:[t!=null&&t.fullName?`${t.fullName},`:"Salut,"," gre toute ton activit KariGo."]}),r.jsx("p",{className:"text-sm text-slate-600",children:"Visualise tes rservations  venir, revois celles passes et surveille loccupation des trajets que tu as publis."})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>void O(),disabled:u,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-sky-200 hover:text-sky-600 disabled:opacity-50",children:[r.jsx(ps,{size:14})," Rservations"]}),r.jsxs("button",{type:"button",onClick:()=>void A(),disabled:S,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-600 disabled:opacity-50",children:[r.jsx(ps,{size:14})," Trajets publis"]})]})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:Mk.map(T=>r.jsx("button",{type:"button",onClick:()=>m(T.id),className:`rounded-full px-4 py-2 text-xs font-semibold transition ${f===T.id?"bg-sky-600 text-white shadow shadow-sky-200/60":"bg-white text-slate-600 border border-slate-200 hover:border-sky-200 hover:text-sky-600"}`,children:T.label},T.id))})]}),o&&r.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:o}),r.jsx("section",{className:"space-y-4",children:u?r.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((T,K)=>r.jsxs("div",{className:"animate-pulse rounded-3xl border border-slate-100 bg-white px-5 py-6 shadow-sm",children:[r.jsx("div",{className:"h-4 w-1/3 rounded bg-slate-100"}),r.jsx("div",{className:"mt-3 h-3 w-2/3 rounded bg-slate-100"}),r.jsx("div",{className:"mt-4 h-10 rounded bg-slate-50"})]},K))}):R.length===0?r.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white px-6 py-10 text-center text-slate-500",children:[r.jsx(Rp,{className:"mx-auto mb-3 h-6 w-6 text-slate-400"}),r.jsxs("p",{className:"text-sm",children:["Aucun trajet ",f==="past"?"pass":f==="upcoming"?" venir":""," pour linstant. Rserve un trajet et il apparatra ici."]}),r.jsxs(ze,{to:"/",className:"mt-4 inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-xs font-semibold text-white",children:["Explorer des trajets ",r.jsx(es,{size:14})]})]}):r.jsx("div",{className:"grid gap-4",children:R.map(T=>{var ue,he;const K=Tk[T.status]??{label:T.status,tone:"text-slate-600 bg-slate-100"},Y=T.departureAt?eo(T.departureAt):eo(T.createdAt);return r.jsxs("article",{className:"rounded-3xl border border-slate-100 bg-white px-5 py-6 shadow-sm transition hover:border-sky-100 hover:shadow-md",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm text-slate-600",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-base font-semibold text-slate-900 flex items-center gap-2",children:[r.jsx(er,{size:16,className:"text-sky-500"}),T.originCity??"Origine inconnue","  ",T.destinationCity??"Destination inconnue"]}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[r.jsx(ss,{size:14}),Y]})]}),r.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${K.tone}`,children:K.label})]}),r.jsxs("div",{className:"mt-4 grid gap-3 text-sm text-slate-600 sm:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Rservation"}),r.jsx("p",{className:"font-semibold text-slate-900",children:T.id})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Siges"}),r.jsx("p",{className:"font-semibold text-slate-900",children:T.seats})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Montant"}),r.jsxs("p",{className:"font-semibold text-slate-900",children:[((he=(ue=T.amount)==null?void 0:ue.toLocaleString)==null?void 0:he.call(ue))??T.amount," XOF"]})]})]})]},T.id)})})}),r.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white/95 shadow-xl shadow-indigo-100/70 backdrop-blur p-6 lg:p-10 space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-indigo-100 px-3 py-1 text-[11px] font-semibold text-indigo-700",children:"Mes trajets publis"}),r.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Surveille loccupation de tes trajets."}),r.jsx("p",{className:"text-sm text-slate-600",children:"Suis les places restantes, le tarif et ltat de publication de chaque trajet cr."})]}),r.jsxs("div",{className:"flex flex-col gap-2 lg:items-end",children:[r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>void A(),disabled:S,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-600 disabled:opacity-50",children:[r.jsx(ps,{size:14})," Actualiser"]}),r.jsx("button",{type:"button",className:`inline-flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold transition ${w?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 text-slate-600 hover:border-emerald-200 hover:text-emerald-700"}`,onClick:()=>N(T=>!T),"aria-pressed":w,children:w?"Masquer les prnoms":"Afficher les prnoms"})]}),r.jsx("p",{className:`text-xs ${w?"text-emerald-600":"text-slate-500"}`,children:w?"Les prnoms sont affichs (visible uniquement pour vous).":"Clique sur le bouton pour rvler les prnoms des passagers."})]})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsx(to,{label:"Trajets  venir",value:$.upcoming,icon:r.jsx(ss,{size:14})}),r.jsx(to,{label:"Trajets publis",value:$.published,icon:r.jsx(Q1,{size:14})}),r.jsx(to,{label:"Places offertes",value:$.seatsTotal,icon:r.jsx(Qd,{size:14})}),r.jsx(to,{label:"Places rserves",value:$.seatsBooked,icon:r.jsx(Rp,{size:14})})]}),k&&r.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:k}),S?r.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((T,K)=>r.jsx("div",{className:"h-28 rounded-2xl bg-slate-100 animate-pulse"},K))}):V.length===0?r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-6 py-8 text-center text-slate-600",children:[r.jsx("p",{children:"Tu nas pas encore publi de trajet."}),r.jsx(ze,{to:"/create",className:"mt-3 inline-flex items-center justify-center rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white",children:"Publier un trajet"})]}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:V.map(T=>{var K;return r.jsxs("article",{className:"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm shadow-slate-100 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm uppercase tracking-wide text-slate-500",children:["Trajet #",T.id.slice(0,8)]}),r.jsxs("div",{className:"text-lg font-semibold text-slate-900",children:[T.originCity,"  ",T.destinationCity]}),r.jsx("div",{className:"text-sm text-slate-500",children:eo(T.departureAt)})]}),r.jsx("div",{className:`rounded-full px-3 py-1 text-xs font-semibold ${T.status==="PUBLISHED"?"bg-emerald-100 text-emerald-700":T.status==="CLOSED"?"bg-slate-200 text-slate-700":"bg-amber-100 text-amber-700"}`,children:T.status==="PUBLISHED"?"En ligne":T.status==="CLOSED"?"Cltur":T.status})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[r.jsx("span",{children:"Places rserves"}),r.jsxs("span",{className:"font-semibold text-slate-900",children:[T.seatsReserved,"/",T.seatsTotal," (",T.occupancy,"%)"]})]}),r.jsx("div",{className:"h-2 w-full rounded-full bg-slate-100",children:r.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-sky-500 to-indigo-500",style:{width:`${Math.min(T.occupancy,100)}%`}})}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[r.jsx("span",{children:"Places restantes"}),r.jsx("span",{className:"font-semibold text-slate-900",children:T.seatsAvailable})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[r.jsx("span",{children:"Tarif"}),r.jsxs("span",{className:"font-semibold text-slate-900",children:[(K=T.pricePerSeat)==null?void 0:K.toLocaleString()," XOF"]})]})]}),r.jsxs("div",{className:"space-y-2 border-t border-slate-100 pt-3",children:[r.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Passagers"}),T.reservations.length>0?r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1",children:T.reservations.map(Y=>{var Z;const ue=wm(Y.passengerName)||wm((Z=Y.passengerEmail)==null?void 0:Z.split("@")[0])||"Passager KariGo",he=w?ue:"Prnom masqu",ve=w?Y.passengerEmail||"Contact non renseign":"Contact masqu";return r.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-slate-100 bg-slate-50 px-3 py-2",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white text-slate-600 border border-slate-200",children:r.jsx(zu,{size:14})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:he}),r.jsx("p",{className:"text-xs text-slate-500 truncate",children:ve})]})]}),r.jsxs("div",{className:"text-right text-xs text-slate-500",children:[r.jsxs("p",{className:"font-semibold text-slate-800",children:[Y.seats," sige(s)"]}),r.jsx("p",{children:Rk(Y.status)})]})]},Y.id)})}):r.jsx("p",{className:"text-xs text-slate-400",children:"Aucune rservation pour ce trajet."})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ze,{to:`/ride/${T.id}`,className:"inline-flex items-center gap-2 text-sm font-semibold text-sky-600 hover:text-sky-700",children:["Voir le dtail",r.jsx(es,{size:16})]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Mise  jour ",T.updatedAt?eo(T.updatedAt,!1):"rcente"]})]})]},T.id)})})]})]})})}function to({label:e,value:t,icon:s}){return r.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white px-5 py-4 shadow-sm shadow-slate-100",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-slate-500",children:[s,e]}),r.jsx("div",{className:"mt-2 text-2xl font-semibold text-slate-900",children:t.toLocaleString()})]})}function zk(e){const[t,s]=x.useState([]),i=x.useCallback(()=>{if(!e){s([]);return}s(ON(e))},[e]);return x.useEffect(()=>{i()},[i]),x.useEffect(()=>{if(typeof window>"u")return;const o=l=>{const u=l.detail;!u||u.ownerId!==e||i()};return window.addEventListener("kari:pendingAcquisitions",o),()=>window.removeEventListener("kari:pendingAcquisitions",o)},[e,i]),{items:t,refresh:i}}const so=(e,t=!0)=>{if(!e)return"Date inconnue";try{const s=new Date(e);return t?s.toLocaleString("fr-FR",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):s.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}catch{return e}};function Ok(){const e=ge(R=>R.account),t=ge(R=>R.token),s=(e==null?void 0:e.id)??"guest",i=Ft(),{items:o,refresh:l}=zk(s),[u,h]=x.useState([]),[f,m]=x.useState(!1),[g,_]=x.useState(),[y,v]=x.useState("reserved"),k=ge(R=>R.savedRides),C=ge(R=>R.removeSavedRide);x.useEffect(()=>{if(!t){h([]);return}let R=!1;return(async()=>{var V,$;try{m(!0),_(void 0);const T=await Lg(t,{limit:100});R||h(Array.isArray(T.data)?T.data:[])}catch(T){R||_((($=(V=T==null?void 0:T.response)==null?void 0:V.data)==null?void 0:$.message)||(T==null?void 0:T.message)||"Impossible de charger tes rservations.")}finally{R||m(!1)}})(),()=>{R=!0}},[t]),x.useEffect(()=>{if(!o.length||!u.length)return;const R=u.map($=>$.rideId);o.some($=>R.includes($.rideId))&&(BN(s,R),l())},[o,u,s,l]);const S=x.useMemo(()=>u,[u]),j=x.useMemo(()=>o,[o]),w=x.useMemo(()=>Object.values(k),[k]),N=()=>t?f?r.jsx("div",{className:"space-y-3",children:[...Array(3)].map((R,V)=>r.jsxs("div",{className:"animate-pulse rounded-3xl border border-slate-100 bg-white px-5 py-6 shadow-sm",children:[r.jsx("div",{className:"h-4 w-1/3 rounded bg-slate-100"}),r.jsx("div",{className:"mt-3 h-3 w-2/3 rounded bg-slate-100"}),r.jsx("div",{className:"mt-4 h-10 rounded bg-slate-50"})]},V))}):S.length===0?r.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white px-6 py-10 text-center text-slate-500",children:[r.jsx(lw,{className:"mx-auto mb-3 h-6 w-6 text-slate-400"}),"Aucun trajet rserv pour linstant.",r.jsxs(ze,{to:"/",className:"mt-4 inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-xs font-semibold text-white",children:["Explorer les trajets ",r.jsx(es,{size:14})]})]}):r.jsx("div",{className:"grid gap-4",children:S.map(R=>{var $,T,K,Y;const V=($=R.ride)!=null&&$.departureAt?so((T=R.ride)==null?void 0:T.departureAt):so(R.createdAt);return r.jsxs("article",{className:"rounded-3xl border border-slate-100 bg-white px-5 py-6 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-base font-semibold text-slate-900",children:[((K=R.ride)==null?void 0:K.originCity)??"Origine","  ",((Y=R.ride)==null?void 0:Y.destinationCity)??"Destination"]}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[r.jsx(ss,{size:14})," ",V]})]}),r.jsxs("span",{className:"text-sm font-semibold text-slate-600",children:[R.amount.toLocaleString("fr-FR")," XOF"]})]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 text-xs font-semibold",children:[r.jsxs(ze,{to:`/ride/${R.rideId}`,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-slate-600 hover:border-sky-200 hover:text-sky-600",children:["Voir le trajet ",r.jsx(es,{size:14})]}),r.jsx(ze,{to:`/booking/${R.rideId}`,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-slate-600 hover:border-sky-200 hover:text-sky-600",children:"Dtails rservation"})]})]},R.id)})}):r.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-slate-600",children:["Connecte-toi pour retrouver tes rservations confirmes.",r.jsx("div",{className:"mt-4",children:r.jsx(ze,{to:"/login",className:"btn-primary px-4 py-2",children:"Se connecter"})})]}),O=R=>{DN(s,R.id),l()},A=()=>j.length===0?r.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white px-6 py-10 text-center text-slate-500",children:[r.jsx(pw,{className:"mx-auto mb-3 h-6 w-6 text-slate-400"}),"Tu nas pas encore de trajets en cours dacquisition. Envoie un message  un conducteur depuis un dtail de trajet pour les retrouver ici."]}):r.jsx("div",{className:"grid gap-4",children:j.map(R=>r.jsxs("article",{className:"rounded-3xl border border-slate-100 bg-white px-5 py-6 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-base font-semibold text-slate-900",children:[R.originCity,"  ",R.destinationCity]}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[r.jsx(ss,{size:14})," ",so(R.departureAt)]})]}),r.jsxs("button",{type:"button",onClick:()=>O(R),className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-500 hover:border-rose-200 hover:text-rose-500",children:[r.jsx(Iu,{size:14})," Retirer"]})]}),r.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Contact : ",R.driverLabel]}),R.lastMessagePreview&&r.jsxs("p",{className:"mt-2 rounded-2xl bg-slate-50 px-4 py-2 text-sm text-slate-500",children:["",R.lastMessagePreview,""]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 text-xs font-semibold",children:[r.jsxs("button",{type:"button",onClick:()=>i("/messages",{state:{contact:{id:R.driverId,type:R.driverType,label:R.driverLabel}}}),className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-slate-600 hover:border-sky-200 hover:text-sky-600",children:["Continuer la discussion ",r.jsx(es,{size:14})]}),r.jsx(ze,{to:`/ride/${R.rideId}`,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1.5 text-slate-600 hover:border-emerald-200 hover:text-emerald-600",children:"Voir le trajet"})]})]},R.id))}),F=()=>w.length===0?r.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white px-6 py-10 text-center text-slate-500",children:[r.jsx(Go,{className:"mx-auto mb-3 h-6 w-6 text-slate-400"}),"Tu nas pas encore sauvegard de trajet. Ajoute des trajets  ta liste depuis la recherche pour les retrouver ici."]}):r.jsx("div",{className:"grid gap-4",children:w.map(R=>r.jsxs("article",{className:"rounded-3xl border border-slate-100 bg-white px-5 py-6 shadow-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-base font-semibold text-slate-900",children:[R.originCity,"  ",R.destinationCity]}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[r.jsx(ss,{size:14})," ",so(R.departureAt)]})]}),r.jsxs("button",{type:"button",onClick:()=>C(R.rideId),className:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-500 hover:border-rose-200 hover:text-rose-500",children:[r.jsx(Iu,{size:14})," Retirer"]})]}),r.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4 text-sm text-slate-600",children:[r.jsxs("span",{className:"font-semibold text-slate-900",children:[R.pricePerSeat.toLocaleString("fr-FR")," XOF / sige"]}),r.jsxs("span",{children:[R.seatsAvailable," place(s) dispo"]}),R.driverLabel&&r.jsxs("span",{children:["Conducteur : ",R.driverLabel]})]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 text-xs font-semibold",children:[r.jsxs("button",{type:"button",onClick:()=>nav(`/booking/${R.rideId}`),className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-white hover:bg-slate-800",children:["Continuer lachat ",r.jsx(es,{size:14})]}),r.jsx(ze,{to:`/ride/${R.rideId}`,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-slate-600 hover:border-sky-200 hover:text-sky-600",children:"Voir le dtail"})]})]},R.rideId))});return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-white to-white",children:r.jsxs("div",{className:"container-wide py-10 space-y-8",children:[r.jsxs("section",{className:"rounded-[32px] border border-slate-200 bg-white/90 p-6 shadow-lg shadow-slate-200",children:[r.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"inline-flex items-center gap-2 rounded-full bg-slate-900/5 px-3 py-1 text-xs font-semibold text-slate-600",children:[r.jsx(Go,{size:14})," Mon panier KariGo"]}),r.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Centralise tes rservations et tes discussions."}),r.jsx("p",{className:"text-sm text-slate-500",children:"Accde en un clic aux trajets dj rservs et  ceux pour lesquels tu es en discussion avec un conducteur."})]}),r.jsxs("div",{className:"inline-flex rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-600",children:[j.length," en cours  ",S.length," rserv(s)  ",w.length," sauvegard(s)"]})]}),g&&r.jsx("div",{className:"mt-4 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm text-rose-600",children:g}),r.jsxs("div",{className:"mt-6 inline-flex gap-3 rounded-full bg-slate-100 p-1 text-sm font-semibold text-slate-500",children:[r.jsx("button",{type:"button",onClick:()=>v("reserved"),className:`rounded-full px-4 py-1.5 ${y==="reserved"?"bg-white text-slate-900 shadow":""}`,children:"Rservs"}),r.jsx("button",{type:"button",onClick:()=>v("pending"),className:`rounded-full px-4 py-1.5 ${y==="pending"?"bg-white text-slate-900 shadow":""}`,children:"En cours dacquisition"}),r.jsx("button",{type:"button",onClick:()=>v("saved"),className:`rounded-full px-4 py-1.5 ${y==="saved"?"bg-white text-slate-900 shadow":""}`,children:"Sauvegards"})]})]}),r.jsx("section",{children:y==="reserved"?N():y==="pending"?A():F()})]})})}const Dk=[{title:"Produit",items:[{label:"Rechercher un trajet",to:"/"},{label:"Publier un trajet",to:"/create"},{label:"Mes trajets",to:"/my-trips"}]},{title:"Support",items:[{label:"Centre daide",href:"mailto:support@karigo.ci"},{label:"FAQ",to:"/faq"},{label:"Signaler un problme",href:"mailto:support@karigo.ci?subject=Support%20KariGo"}]},{title:"Lgal",items:[{label:"Conditions dutilisation",to:"/legal/terms"},{label:"Politique de confidentialit",to:"/legal/privacy"},{label:"Cookies",to:"/legal/cookies"}]}];function Bk(){return r.jsx("footer",{className:"border-t border-slate-200 bg-white/95",children:r.jsxs("div",{className:"container-wide py-10 lg:py-12 text-sm text-slate-600",children:[r.jsxs("div",{className:"flex flex-col gap-8 lg:flex-row lg:justify-between",children:[r.jsxs("div",{className:"max-w-sm space-y-3",children:[r.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"KariGo"}),r.jsx("p",{children:"Plateforme ivoirienne de co-mobilit. Nous connectons les passagers et conducteurs autour de trajets fiables et responsables."}),r.jsxs("div",{className:"text-xs text-slate-500",children:["Besoin daide ?"," ",r.jsx("a",{href:"mailto:support@karigo.ci",className:"font-semibold text-sky-600",children:"support@karigo.ci"})," ","ou +225 01 23 45 67 89"]})]}),r.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Dk.map(e=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:e.title}),r.jsx("ul",{className:"space-y-2 text-sm",children:e.items.map(t=>{var s,i;return r.jsx("li",{children:t.to?r.jsx(ze,{to:t.to,className:"transition hover:text-sky-600",children:t.label}):r.jsx("a",{href:t.href,className:"transition hover:text-sky-600",target:(s=t.href)!=null&&s.startsWith("http")?"_blank":void 0,rel:(i=t.href)!=null&&i.startsWith("http")?"noopener noreferrer":void 0,children:t.label})},t.label)})})]},e.title))})]}),r.jsxs("div",{className:"mt-10 flex flex-col gap-2 border-t border-slate-100 pt-6 text-xs text-slate-500 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("p",{children:[" ",new Date().getFullYear()," KariGo. Tous droits rservs."]}),r.jsx("p",{className:"text-slate-400",children:"Fait avec   Abidjan  Conforme RGPD / NDPC"})]})]})})}const ev="kari_cookie_consent_v1",Fk=1e3*60*60*24*90,$k=1e3*60*60*24*7,Uk=()=>{if(typeof window>"u")return null;try{const e=window.localStorage.getItem(ev);if(!e)return null;const t=JSON.parse(e);return!t||typeof t.status!="string"||typeof t.ts!="number"||t.status!=="accepted"&&t.status!=="dismissed"?null:t}catch{return null}},Vk=e=>{if(!e)return!0;const t=Date.now(),s=e.status==="accepted"?Fk:$k;return t-e.ts>s},Nm=e=>{if(!(typeof window>"u"))try{window.localStorage.setItem(ev,JSON.stringify(e))}catch{}};function Zk(){const[e,t]=x.useState(!1),[s,i]=x.useState(!1);x.useEffect(()=>{if(typeof window>"u")return;const u=Uk();t(Vk(u)),i(!0)},[]);const o=()=>{Nm({status:"accepted",ts:Date.now()}),t(!1)},l=()=>{Nm({status:"dismissed",ts:Date.now()}),t(!1)};return!s||!e?null:r.jsx("div",{className:"fixed inset-x-4 bottom-6 z-50 lg:inset-x-auto lg:right-6 lg:w-96",children:r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-2xl shadow-slate-900/10 p-5 space-y-3",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Nous utilisons des cookies "}),r.jsxs("p",{className:"text-sm text-slate-600",children:["Ils servent  scuriser ta session, mesurer lusage et personnaliser ton exprience. Tu peux en savoir plus sur notre ","",r.jsx(ze,{to:"/legal/cookies",className:"font-semibold text-sky-600 hover:underline",children:"politique cookies"}),"."]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{type:"button",onClick:o,className:"flex-1 rounded-2xl bg-slate-900 px-4 py-2.5 text-sm font-semibold text-white transition hover:bg-slate-800",children:"Accepter"}),r.jsx("button",{type:"button",onClick:l,className:"flex-1 rounded-2xl border border-slate-200 px-4 py-2.5 text-sm font-semibold text-slate-700 transition hover:bg-slate-50",children:"Me le rappeler plus tard"})]})]})})}function km({requireAuth:e=!1}){var N,O;const t=Pn(),s=ge(A=>A.authReady),i=ge(A=>A.authLoading),o=ge(A=>A.token),l=ge(A=>A.account),u=ge(A=>A.clearSession),h=ge(A=>A.messageBadge),f=ge(A=>A.refreshMessageBadge),m=(l==null?void 0:l.role)==="ADMIN",g=(l==null?void 0:l.type)==="COMPANY",[_,y]=x.useState(!1),v=x.useMemo(()=>[{to:"/",label:"Rechercher",current:t.pathname==="/"},{to:"/results",label:"Rsultats",current:t.pathname.startsWith("/results")},{to:"/my-trips",label:"Mes trajets",current:t.pathname.startsWith("/my-trips")},{to:"/cart",label:"Panier",current:t.pathname.startsWith("/cart")},...m?[{to:"/admin/accounts",label:"Administration",current:t.pathname.startsWith("/admin")}]:[],...g?[{to:"/company/fleet",label:"Ma flotte",current:t.pathname.startsWith("/company")}]:[]],[m,g,t.pathname]);if(x.useEffect(()=>{o&&f()},[f,o]),x.useEffect(()=>{y(!1)},[t.pathname]),!s||i)return r.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-500",children:"Vrification de la session"});const k={from:t.pathname+t.search+t.hash},C=e&&!o,S=(l==null?void 0:l.fullName)||(l==null?void 0:l.companyName)||(l==null?void 0:l.email)||"Visiteur",j=(N=l==null?void 0:l.profilePhotoUrl)==null?void 0:N.trim(),w=((O=S==null?void 0:S.charAt(0))==null?void 0:O.toUpperCase())??"V";return r.jsxs("div",{className:"flex min-h-screen flex-col",children:[r.jsxs("header",{className:"sticky top-0 z-40 border-b border-slate-200 bg-white/90 backdrop-blur",children:[r.jsxs("div",{className:"container-wide h-16 flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ze,{to:"/",className:"flex items-center gap-2 text-slate-800",children:r.jsx(Jg,{className:"text-lg sm:text-xl"})}),r.jsx("button",{type:"button",onClick:()=>y(A=>!A),className:"inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white p-2 text-slate-600 transition hover:border-sky-200 hover:text-sky-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-200 lg:hidden","aria-expanded":_,"aria-controls":"main-navigation","aria-label":"Ouvrir le menu de navigation",children:_?r.jsx(Nw,{size:18}):r.jsx(hw,{size:18})})]}),r.jsxs("nav",{className:"hidden lg:flex items-center gap-5 text-sm text-slate-700",children:[v.filter(A=>o?!0:A.to==="/"||A.to==="/results"||A.to==="/cart").map(A=>{const F=A.to==="/cart";return r.jsx(ze,{to:A.to,className:`inline-flex items-center gap-1 transition hover:text-sky-600 ${A.current?"text-sky-600 font-semibold":""}`,"aria-label":F?"Panier":void 0,children:F?r.jsxs(r.Fragment,{children:[r.jsx(Go,{size:18}),r.jsx("span",{className:"sr-only",children:"Panier"})]}):A.label},A.to)}),o?r.jsxs(r.Fragment,{children:[r.jsxs(ze,{to:"/messages",className:"relative flex items-center gap-2 rounded-full px-3 py-1.5 transition hover:text-sky-600",children:[r.jsx(Ru,{size:16}),"Messages",h>0&&r.jsx("span",{className:"inline-flex min-w-[1.5rem] h-5 items-center justify-center rounded-full bg-sky-500 px-1 text-[11px] font-semibold text-white",children:h>9?"9+":h})]}),r.jsxs(ze,{to:"/profile",className:"relative flex items-center gap-2 rounded-full border border-slate-200 bg-white px-2.5 py-1 text-xs font-medium text-slate-600 shadow-sm transition hover:border-sky-200 hover:text-sky-700",title:"Mon profil",children:[r.jsx("div",{className:"h-8 w-8 overflow-hidden rounded-full border border-slate-200 bg-slate-100",children:j?r.jsx("img",{src:j,alt:"Profil",className:"h-full w-full object-cover",onError:A=>{const F=A.currentTarget;F.style.display="none"}}):r.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs font-semibold text-slate-500",children:w})}),r.jsx("span",{className:"hidden xl:inline",children:S})]}),r.jsx(ze,{to:"/create",className:"btn-primary px-4 py-2 whitespace-nowrap",children:"Publier un trajet"}),r.jsxs("button",{onClick:()=>u(),className:"inline-flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-600 transition hover:border-sky-300 hover:bg-slate-50",children:[r.jsx(Lp,{size:14}),"Dconnexion"]})]}):r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ze,{to:"/login",className:"rounded-xl border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 hover:border-sky-200",children:"Connexion"}),r.jsx(ze,{to:"/register",className:"btn-primary px-4 py-2 text-xs font-semibold",children:"Crer un compte"})]})]})]}),_&&r.jsx("div",{className:"lg:hidden border-t border-slate-200 bg-white/95 backdrop-blur",id:"main-navigation",children:r.jsxs("div",{className:"container-wide py-4 space-y-4 text-sm text-slate-700",children:[o?r.jsxs(ze,{to:"/profile",className:"flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium shadow-sm",children:[r.jsx("div",{className:"h-10 w-10 overflow-hidden rounded-full border border-slate-200 bg-slate-100",children:j?r.jsx("img",{src:j,alt:"Profil",className:"h-full w-full object-cover",onError:A=>{const F=A.currentTarget;F.style.display="none"}}):r.jsx("div",{className:"flex h-full w-full items-center justify-center text-sm font-semibold text-slate-500",children:w})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-slate-800",children:S}),r.jsx("p",{className:"text-xs text-slate-500",children:"Voir mon profil"})]})]}):r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Bienvenue"}),r.jsx("p",{className:"text-sm text-slate-600",children:"Parcours librement les trajets. Connecte-toi seulement pour rserver."})]}),r.jsxs("div",{className:"grid gap-2",children:[v.filter(A=>o?!0:A.to==="/"||A.to==="/results"||A.to==="/cart").map(A=>{const F=A.to==="/cart";return r.jsx(ze,{to:A.to,className:`flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2 ${A.current?"bg-sky-50 border-sky-200 text-sky-700 font-semibold":"bg-white hover:border-sky-200 hover:text-sky-600"}`,children:F?r.jsxs(r.Fragment,{children:[r.jsx(Go,{size:16}),r.jsx("span",{children:"Panier"})]}):A.label},A.to)}),o?r.jsxs(r.Fragment,{children:[r.jsxs(ze,{to:"/messages",className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-3 py-2 hover:border-sky-200 hover:text-sky-600",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Ru,{size:16}),"Messages"]}),h>0&&r.jsx("span",{className:"inline-flex min-w-[1.75rem] h-5 items-center justify-center rounded-full bg-sky-500 px-1 text-[11px] font-semibold text-white",children:h>9?"9+":h})]}),r.jsx(ze,{to:"/create",className:"btn-primary w-full justify-center px-4 py-2",children:"Publier un trajet"}),r.jsxs("button",{type:"button",onClick:()=>u(),className:"flex items-center justify-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-600 transition hover:border-sky-300 hover:bg-slate-50",children:[r.jsx(Lp,{size:14}),"Dconnexion"]})]}):r.jsxs("div",{className:"grid gap-2",children:[r.jsx(ze,{to:"/login",className:"rounded-xl border border-slate-200 px-3 py-2 text-center font-semibold text-slate-600",children:"Connexion"}),r.jsx(ze,{to:"/register",className:"btn-primary w-full justify-center px-4 py-2",children:"Crer un compte"})]})]})]})})]}),r.jsxs("main",{className:"app-main relative",children:[r.jsx("div",{className:C?"relative blur-sm opacity-70 pointer-events-none select-none transition duration-300":"relative",children:r.jsx(T1,{})}),C&&r.jsxs("div",{className:"pointer-events-auto absolute inset-0 flex items-center justify-center px-4 py-10",children:[r.jsx("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm"}),r.jsx("div",{className:"relative z-10 flex min-h-[60vh] items-center justify-center px-4 py-10",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[28px] border border-white/20 bg-white/98 p-8 text-center shadow-[0_40px_120px_-45px_rgba(15,23,42,0.8)]",children:[r.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-slate-900/5 px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Authentification requise"}),r.jsx("h2",{className:"mt-4 text-2xl font-semibold text-slate-900",children:"Connecte-toi pour accder  cette zone"}),r.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Cet espace contient des informations prives ou des actions sensibles. Connecte-toi pour poursuivre, ou cre un compte KariGo en quelques secondes."}),r.jsxs("div",{className:"mt-6 grid gap-3 sm:grid-cols-2",children:[r.jsx(ze,{to:"/login",state:k,className:"inline-flex items-center justify-center rounded-2xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white transition hover:bg-slate-800",children:"Se connecter"}),r.jsx(ze,{to:"/register",state:k,className:"inline-flex items-center justify-center rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 transition hover:border-sky-200 hover:text-sky-700",children:"Crer un compte"})]}),r.jsxs("div",{className:"mt-4 text-xs text-slate-500",children:["ou"," ",r.jsx(ze,{to:"/",className:"font-semibold text-slate-600 hover:text-sky-600",children:"revenir  laccueil"})]})]})})]})]}),r.jsx(Bk,{})]})}function Hk(){const e=ge(t=>t.initializeAuth);return x.useEffect(()=>{e()},[e]),r.jsxs($1,{children:[r.jsx(Zk,{}),r.jsxs(A1,{children:[r.jsx(mt,{path:"/login",element:r.jsx(ok,{})}),r.jsx(mt,{path:"/register",element:r.jsx(lk,{})}),r.jsx(mt,{path:"/forgot-password",element:r.jsx(ck,{})}),r.jsx(mt,{path:"/reset-password",element:r.jsx(uk,{})}),r.jsxs(mt,{element:r.jsx(km,{requireAuth:!1}),children:[r.jsx(mt,{path:"/",element:r.jsx(LN,{})}),r.jsx(mt,{path:"/results",element:r.jsx(TN,{})}),r.jsx(mt,{path:"/ride/:rideId",element:r.jsx(ak,{})}),r.jsx(mt,{path:"/cart",element:r.jsx(Ok,{})})]}),r.jsxs(mt,{element:r.jsx(km,{requireAuth:!0}),children:[r.jsx(mt,{path:"/booking/:rideId",element:r.jsx(RN,{})}),r.jsx(mt,{path:"/create",element:r.jsx(IN,{})}),r.jsx(mt,{path:"/messages",element:r.jsx(hk,{})}),r.jsx(mt,{path:"/profile",element:r.jsx(Pk,{})}),r.jsx(mt,{path:"/profile/:accountId",element:r.jsx(Lk,{})}),r.jsx(mt,{path:"/company/fleet",element:r.jsx(Ck,{})}),r.jsx(mt,{path:"/admin/accounts",element:r.jsx(xk,{})}),r.jsx(mt,{path:"/my-trips",element:r.jsx(Ik,{})})]}),r.jsx(mt,{path:"*",element:r.jsx(Ho,{to:"/",replace:!0})})]})]})}Oc.createRoot(document.getElementById("root")).render(r.jsx(Tr.StrictMode,{children:r.jsx(Hk,{})}));
